"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[631],{162886:(e,t,i)=>{i.d(t,{Z:()=>l,h:()=>c});var a=i(708608),n=i(696832),r=i(765505),s=i(630886),o=i(174071);const c=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{confirmDeleteSubtitle:r,confirmDeleteTitle:o,confirmDeleteDismiss:c,confirmDeleteConfirm:l}=i;return n.createElement(s.o,{isOpen:!0,disableBackgroundPanelClose:!0,footer:n.createElement(a.cNS,{primaryButtonTitle:l,primaryButtonOnClick:t,primaryButtonProps:{id:"deletion-dialog-confirm-button"},secondaryButtonTitle:c,secondaryButtonOnClick:e,secondaryButtonProps:{autoFocus:!0,id:"deletion-dialog-dismiss-button"},intent:"danger"}),onRequestClose:e,title:o},r)},l=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:c})=>{const l=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:a,genericErrorTitle:n}=e;switch(t){case r.J.LastAdmin:return a;case r.J.GroupSharing:return i;case r.J.Generic:return n;default:return(0,o.U)(t)}})(t,e),u=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:a,genericErrorSubtitle:n}=e;switch(t){case r.J.LastAdmin:return a;case r.J.GroupSharing:return i;case r.J.Generic:return n;default:return(0,o.U)(t)}})(t,e);return n.createElement(s.o,{isOpen:!0,showCloseIcon:!0,disableBackgroundPanelClose:!0,onRequestClose:c,title:l,footer:e===r.J.LastAdmin?n.createElement(a.cNS,{primaryButtonTitle:t.lastAdminActionLabel,primaryButtonOnClick:i,intent:"danger"}):null},u)}},295265:(e,t,i)=>{i.d(t,{N:()=>s});var a=i(696832),n=i(446389),r=i(673146);const s=({item:e,getSharing:t})=>{const{translate:i}=(0,n.Z)();if(!(e=>e&&(!e.sharingStatus.isShared||"admin"===e.sharingStatus.permission)&&!e.attachments.length)(e))return null;const s=t(e.id);return a.createElement(r.Z,{tooltipPlacement:"top-start",sharing:s,text:i("webapp_sharing_invite_share")})}},765505:(e,t,i)=>{let a;i.d(t,{J:()=>a}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(a||(a={}))},280356:(e,t,i)=>{i.r(t),i.d(t,{NoteEditPanel:()=>R});var a=i(616274),n=i(704841),r=i(611792),s=(i(135758),i(696832)),o=i(238250),c=i(511494),l=i(987364),u=i(446389),d=i(190481),m=i(959074),g=i(944537),S=i(78372),h=i(765505),p=i(295265),_=i(162886),C=i(762863),b=i(639988),f=i(205838),y=i(927761),E=i(419581),D=i(225002),A=i(846074),N=i(680441),w=i(75032),T=i(750101);const{CONTENT:I,DOCUMENT_STORAGE:v,MORE_OPTIONS:O,SHARED_ACCESS:G}=S.J,P=e=>(0,b.A1)(e),J=(0,y.DP)((({lee:e,location:t,note:i,noteCategories:n})=>{var r;const{translate:b}=(0,u.Z)(),{routes:y}=(0,m.Xo)(),J=(0,N.aV)(),[k,B]=(0,s.useState)(I),[L,R]=(0,s.useState)(!1),[F]=(0,s.useState)(null),[U,X]=(0,s.useState)(!1),[M,V]=(0,s.useState)(null),[q,H]=(0,s.useState)(!1),[Z,x]=(0,s.useState)(!1),[z,$]=(0,s.useState)(!1),[K,Q]=(0,s.useState)((()=>i.content)),[W,j]=(0,s.useState)((()=>i.title)),Y=s.useCallback((()=>!i&&((0,d.uX)(y.userSecureNotes),!0)),[i,y.userSecureNotes]);if(s.useEffect((()=>{Y()||(0,l.N)(c.PageView.ItemSecureNoteDetails)}),[Y]),s.useEffect((()=>{Y()}),[Y,i]),!i)return null;const ee=()=>{(0,A.z)(),t?.state?.entity?(0,g.d)({routes:y,location:t}):((0,l.N)(c.PageView.ItemSecureNoteList),(0,d.uX)(y.userSecureNotes))},te=async(e=!0)=>{var t;x(!0);const n=null!=F?F:{spaceId:null!=(t=i.spaceId)?t:""};await a.C.updateSecureNote({content:K,title:W,id:i.id,attachments:[...i.attachments],...n}),x(!1),e&&ee()},ie=()=>{$(!0)},ae=async e=>{$(!1),e.success&&(await a.C.commitSecureFile({secureFileInfo:e.secureFileInfo}),i.attachments.push((0,E.w)(e.secureFileInfo)),te(!1))},ne=()=>V(null),re=e=>V({reason:e}),se=()=>R(!0),oe=i?.sharingStatus.isShared,ce=J||i.attachments.length>0,le=[I,O];oe?le.push(G):ce&&le.push(v);const ue={confirmDeleteConfirm:b("webapp_secure_notes_edition_delete_confirm"),confirmDeleteDismiss:b("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:b("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:b("webapp_secure_notes_edition_delete_title"),lastAdminActionLabel:b("webapp_credential_edition_change_permissions"),lastAdminTitle:b("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:b("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:b("webapp_secure_notes_edition_group_sharing_title"),groupSharingSubtitle:b("webapp_credential_edition_group_sharing_subtitle"),genericErrorTitle:"webapp_account_recovery_generic_error_title",genericErrorSubtitle:"webapp_account_recovery_generic_error_subtitle"},de={attachments:i.attachments,category:i.category?i.category.id:"noCategory",content:i.content,id:i.id,limitedPermissions:i.sharingStatus.isShared&&"limited"===i.sharingStatus.permission,secured:i.secured,spaceId:i.spaceId,title:i.title,type:i.color},me=i.sharingStatus.isShared?i.sharingStatus.recipientsCount:0;return s.createElement(C.zI,{isViewingExistingItem:!0,itemHasBeenEdited:L,onSubmit:()=>{te()},submitPending:Z,secondaryActions:(()=>{switch(k){case I:return[r||(r=s.createElement(p.N,{item:i,getSharing:P,key:"shareaction"}))];case v:return[s.createElement(D.d,{isQuotaReached:!1,onFileUploadStarted:ie,onFileUploadDone:ae,isShared:i?.sharingStatus.isShared,itemId:i.id,key:"uploadAction",dataType:"KWSecureNote"})];default:return[]}})(),onNavigateOut:ee,onClickDelete:()=>{const{sharingStatus:e}=i;if(e.isShared){if(e.groupSharing)return void re(h.J.GroupSharing);if(e.lastAdmin)return void re(h.J.LastAdmin)}X(!0)},ignoreCloseOnEscape:U||q,formId:"edit_securenote_panel",header:s.createElement(T.h,{activeTab:k,backgroundColor:de.type,displayDocumentStorage:le.includes(v),displaySharedAccess:le.includes(G),recipientsCount:me,setActiveTab:B,disabled:de.limitedPermissions,title:W,setTitle:e=>{se(),j(e)}})},s.createElement(f.T,{activeTab:k,data:de,content:K,setContent:Q,handleFileInfoDetached:e=>{i.attachments=i.attachments.filter((t=>t.id!==e)),te(!1)},hasAttachment:i.attachments.length>0,isAdmin:i.sharingStatus.isShared&&"admin"===i.sharingStatus.permission,isSecureNoteAttachmentEnabled:J,isShared:i.sharingStatus.isShared,isUploading:z,lee:e,noteCategories:n.items,onModifyData:se,onModalDisplayStateChange:H,saveSecureNoteOptions:e=>{const{category:t,spaceId:n,type:r,secured:s}=e;a.C.updateSecureNote({id:i.id,spaceId:null!=n?n:"",type:r,category:t,secured:s}),(0,w.au)()}}),U&&s.createElement(_.h,{closeConfirmDeleteDialog:()=>X(!1),onDeleteConfirm:async()=>{i.attachments.forEach((async e=>{const{id:t}=e;await a.C.deleteSecureFile({id:t})}));const e=await a.C.deleteSecureNote({id:i.id});e.success?(0,d.uX)(y.userSecureNotes):e.error.code===o.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_GROUP_ITEM?re(h.J.GroupSharing):e.error.code===o.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_LAST_ADMIN?re(h.J.LastAdmin):re(h.J.Generic)},translations:ue}),M&&s.createElement(_.Z,{reason:M.reason,translations:ue,goToSharingAccess:()=>{ne(),B(S.J.SHARED_ACCESS)},closeCantDeleteDialog:ne}))})),k=e=>{if(!e.match.params)throw new Error("missing route `params`");return`{${e.match.params.uuid}}`},B={note:{live:a.C.liveNote,liveParam:k,query:a.C.getNote,queryParam:k},noteCategories:{query:a.C.getNoteCategories}},L={strategies:B},R=(0,n.$)((0,r.i)(J,L),B)},944537:(e,t,i)=>{i.d(t,{d:()=>r});var a=i(230107),n=i(190481);const r=({routes:e,location:t})=>{t?.state?.entity?(0,a.yy)(t?.state?.entity)?(0,n.uX)(e.userSharingGroupInfo(t?.state?.entity?.groupId)):(0,n.uX)(e.userSharingUserInfo(t?.state?.entity?.alias)):(0,n.uX)(e.userSharingCenter)}}}]);