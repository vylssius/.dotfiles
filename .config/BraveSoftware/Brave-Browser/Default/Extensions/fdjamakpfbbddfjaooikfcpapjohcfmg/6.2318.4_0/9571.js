"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9571],{152807:(e,t,a)=>{a.r(t),a.d(t,{BankAccountAddView:()=>y});var n=a(696832),r=a(453576),o=a(238250),c=a(708608),s=a(511494),u=a(925112),i=a(616274),d=a(820523),l=a(446389),m=a(987364),_=a(190481),b=a(959074),p=a(854029),k=a(762863),f=a(633499),w=a(416098),C=a(148038),B=a(350199);const E=e=>(e=>{if(e.status===C.rq.Success&&e.data.matchingCount>0){var t;const{firstName:a,lastName:n}=null!=(t=e.data.items.filter(Boolean).find((e=>""!==e.firstName.trim()||""!==e.lastName.trim())))?t:{firstName:"",lastName:""};return[a,n].join(" ").trim()}return""})((0,B.e)(i.C.getIdentities,i.C.liveIdentities,{spaceId:e,sort:"lastUse",sortDirection:"descend"}));var I;const y=({lee:e})=>{var t;const[a,C]=n.useState(!1),[B,y]=n.useState(!1),[N,S]=n.useState(new Set),{routes:g}=(0,b.Xo)(),h=n.useRef(null);n.useEffect((()=>{(0,m.N)(s.PageView.ItemBankStatementCreate);const e=setTimeout((()=>{h.current?.focus()}),d.s);return()=>clearTimeout(e)}),[]);const A=(()=>{const t=e.carbon.currentLocation.country,a=r.Country.US;var n;return t&&null!=(n=r.Country[t])?n:a})(),v=null!=(t=(0,p.B)(e.globalState))?t:"",[V,T]=n.useState({bank:"",country:A,IBAN:"",BIC:"",name:"",owner:"",spaceId:v}),P=E(v),U=""!==P;n.useEffect((()=>{""!==P&&T((e=>({...e,owner:P})))}),[U]);const{translate:L}=(0,l.Z)(),D=(0,u.V)(),O=()=>{(0,m.N)(s.PageView.ItemPaymentList),(0,_.uX)(g.userPayments)};return n.createElement(k.zI,{isViewingExistingItem:!1,itemHasBeenEdited:a,formId:"bank-account-add-form",onNavigateOut:()=>{O()},onSubmit:async()=>{if(!B){y(!0);try{const t=await i.C.addBankAccount({...V,name:V.name||L("webapp_payment_edition_bank_account_name_default")});if(t.success){const e=""===V.name?L("webapp_payment_edition_bank_account_generic_save_alert"):L("webapp_payment_edition_bank_account_name_save_alert",{accountName:V.name});D.showAlert(e,c.BLW.SUCCESS),O()}else y(!1),t.error?.code===o.AddBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN?S(new Set(["BIC","IBAN"])):e.reportError(new Error("[payments][add-bank-account] Unable to add bank account"),t.error?.code)}catch(t){y(!1),e.reportError(t,"[payments][add-bank-account] Unable to add bank account")}}},header:n.createElement(k.V9,{icon:I||(I=n.createElement(w.L,null)),iconBackgroundColor:c.O9T.dashGreen06,title:L("webapp_payment_edition_header_add_bank_account")})},n.createElement(f.o,{bankAccount:V,errors:N,ref:h,signalEditedValues:(e,t=!1)=>{T(e),t||C(!0)},variant:"add"}))}}}]);