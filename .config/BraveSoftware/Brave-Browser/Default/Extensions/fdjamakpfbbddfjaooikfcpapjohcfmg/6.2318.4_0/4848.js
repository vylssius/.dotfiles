"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4848],{787529:(e,t,a)=>{a.d(t,{t:()=>L});var r=a(696832),n=a(238250),l=a(708608),i=a(190481),s=a(925112),o=a(446389),c=a(160041),d=a(5727);const u=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:n}=(0,o.Z)();return(0,d.tZ)(l.Ejs,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexDirection:"row",flexWrap:"nowrap"},a?(0,d.tZ)(l.zxk,{type:"submit",form:e,disabled:r},n("webapp_panel_edition_generic_save_changes")):null,(0,d.tZ)(l.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button"},n("webapp_panel_edition_generic_cancel_changes")))};var E=a(987364),_=a(511494),m=a(75032);const p="id-add-form",I={GENERIC_ERROR:"_common_generic_error"};function L({addItem:e,children:t,initialValues:a,listRoute:d,reportError:L,countryToKeys:h,header:R,type:b}){const{translate:f}=(0,o.Z)(),[C,g]=r.useState(!1),[y,A]=r.useState(!1),[v,S]=r.useState(a.country),w=(0,s.V)();r.useEffect((()=>{const e={driverLicenses:_.PageView.ItemDriverLicenceCreate,fiscalIds:_.PageView.ItemFiscalStatementCreate,idCards:_.PageView.ItemIdCardCreate,passports:_.PageView.ItemPassportCreate,socialSecurityIds:_.PageView.ItemSocialSecurityStatementCreate};(0,E.N)(e[b])}),[b]);const D=()=>{(0,E.N)(_.PageView.ItemIdList),(0,i.uX)(d)},N=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;g(t),A(a),S(r.country)}}));return r.createElement(r.Fragment,null,R(v),r.createElement(c.P,{formId:p,formRef:N.current,handleSubmit:async(t,{setSubmitting:a,setFieldError:r})=>{try{const i=await e(t);!0===i.success?(w.showAlert(f(h(v).success),l.BLW.SUCCESS),(0,m.au)(),D()):(a(!1),i.error?.code===n.AddIdResultErrorCode.MISSING_ID_NUMBER?r("idNumber",""):(w.showAlert(f(I.GENERIC_ERROR),l.BLW.ERROR),L(new Error("[ids][add] Unable to add id"),i.error?.code)))}catch(e){a(!1),w.showAlert(f(I.GENERIC_ERROR),l.BLW.ERROR),L(e,"[ids][add] Unexpected exception while add id")}},initialValues:a,variant:"add"},(e=>t({values:e}))),r.createElement(u,{formId:p,handleCancel:()=>{D()},hasDataBeenModified:C,isSubmitting:y}))}},434771:(e,t,a)=>{a.r(t),a.d(t,{DriverLicenseAddPanel:()=>m});var r=a(696832),n=a(616274),l=a(446389),i=a(854029),s=a(640461),o=a(531198),c=a(631767),d=a(787529);const u="driverLicenses",E=()=>({title:"webapp_id_creation_driverlicense_title_default",success:"webapp_id_creation_driverlicense_alert_add_success_default"}),_=e=>n.C.addDriverLicense(e),m=({lee:e,listRoute:t,setDialogActive:a})=>{var n;const{translate:m}=(0,l.Z)(),p=(0,s.lt)(e.carbon.currentLocation),I=null!=(n=(0,i.B)(e.globalState))?n:"",L=t=>{e.reportError(t)},h={name:"",idNumber:"",expirationDate:null,issueDate:null,country:p,spaceId:I,state:""};return r.createElement(d.t,{addItem:_,initialValues:h,listRoute:t,reportError:e.reportError,setDialogActive:a,countryToKeys:E,type:u,header:e=>r.createElement(o.h,{title:(0,s.Il)(m("webapp_id_creation_driverlicense_title_default"),m.getLocale(),e),country:e,type:u})},(({values:e})=>r.createElement(c.g,{variant:"add",handleError:L,values:e})))}},200539:(e,t,a)=>{a.d(t,{a:()=>n});var r=a(453576);const n=new Set([r.Country.AU,r.Country.GB,r.Country.IE,r.Country.NZ])},631767:(e,t,a)=>{a.d(t,{g:()=>_});var r,n,l=a(696832),i=a(446389),s=a(820523),o=a(519843),c=a(200539),d=a(984161),u=a(169491);const E={...d.k,STATE_LABEL:"webapp_id_form_field_label_state"},_=l.memo((({variant:e,handleCopy:t,handleError:a,values:d})=>{const{translate:_}=(0,i.Z)(),m=l.useRef(null);return l.useEffect("add"===e?()=>{const e=setTimeout((()=>{m.current?.focus()}),s.s);return()=>clearTimeout(e)}:()=>{},[]),l.createElement(l.Fragment,null,l.createElement(u.YI,{name:"name",label:_(E.NAME_LABEL),placeholder:_(E.NAME_PLACEHOLDER),ref:m}),l.createElement(u.G1,{name:"idNumber",label:_(E.ID_NUMBER_LABEL),placeholder:_(E.ID_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0}),l.createElement(u.Nn,{name:"issueDate",label:_(E.ISSUE_DATE_LABEL)}),l.createElement(u.Nn,{name:"expirationDate",label:_(c.a.has(d.country)?E.EXPIRATION_DATE_LABEL_UK:E.EXPIRATION_DATE_LABEL_US)}),l.createElement(u.ju,{countryFieldLabel:_(E.COUNTRY_LABEL),stateFieldLabel:_(E.STATE_LABEL),handleError:a}),r||(r=l.createElement(o.c,{height:24})),n||(n=l.createElement(u.A0,{name:"spaceId"})))}))}}]);