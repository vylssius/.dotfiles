"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[3457],{812803:(e,t,s)=>{s.d(t,{N:()=>l});var n=s(696832),a=s(383849),i=s.n(a);const l=({disableHover:e=!1,...t})=>{const[s,a]=n.useState(!1),{children:[l,...o]=[]}=t;return n.createElement("div",{className:"buttonsContainer--TiPIoxROXR",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},l,t.enabled&&n.createElement("span",{className:i()("buttons--p98QFrEo3f",{"visible--aWYlZRshE_":e||s})},o))}},481159:(e,t,s)=>{s.d(t,{Z:()=>b});var n=s(696832),a=s(554712),i=s(383849),l=s.n(i),o=s(526849),r=s(769183),d=s(317894),c=s.n(d),p=s(585921),u=s(932954),h=s(793429);const m=e=>{navigator.clipboard.writeText(e.replaceAll(" ",""))};class b extends n.Component{constructor(e){super(e),this.field=void 0,this.handleChange=e=>{this.setState({selectionRangeStart:e.target.selectionStart,selectionRangeEnd:e.target.selectionEnd}),this.props.onChange&&this.props.onChange(e)},this.state={fieldHtmlId:(0,r.Z)(),selectionRangeStart:null,selectionRangeEnd:null}}componentDidUpdate(){null!==this.state.selectionRangeStart&&null!==this.state.selectionRangeEnd&&this.field.setSelectionRange(this.state.selectionRangeStart,this.state.selectionRangeEnd)}shouldComponentUpdate(e,t){return!((0,o.equals)(this.props.value,e.value)&&(0,o.equals)(this.props.error,e.error)&&(0,o.equals)(this.props.mask,e.mask)&&(0,o.equals)(this.props.label,e.label)&&(0,o.equals)(this.state.selectionRangeStart,t.selectionRangeStart)&&(0,o.equals)(this.state.selectionRangeEnd,t.selectionRangeEnd))}getValue(){return this.field.value}focus(){this.field.focus()}getTextarea(){var e;return(0,p.tZ)(a.Z,{inputRef:e=>{this.field=e},id:this.state.fieldHtmlId,disabled:this.props.disabled,value:null!=(e=this.props.value)?e:"",name:this.props.name,"data-name":this.props.dataName,sx:{borderColor:this.props.error&&"ds.border.danger.standard.idle"},className:h.Z.textarea,placeholder:this.props.placeholder,onBlur:this.props.handleFieldBlur,onKeyDown:this.props.onFieldKeyDown,onChange:this.handleChange})}getInput(){var e;const t={onBlur:this.props.handleFieldBlur,onChange:this.handleChange,disabled:this.props.disabled,readOnly:this.props.readOnly,value:null!=(e=this.props.value)?e:""},s={ref:e=>{this.field=e},id:this.state.fieldHtmlId,autoComplete:"off",className:l()(h.Z.input,{[h.Z.error]:Boolean(this.props.error)}),sx:{...this.props.error&&{"::placeholder":{color:"ds.text.danger.quiet"},minWidth:"fit-content"},border:"1px solid",borderColor:this.props.error?"ds.border.danger.standard.idle":"transparent"},name:this.props.name,"data-name":this.props.dataName,type:this.props.type||"text",placeholder:this.props.placeholder,onKeyDown:this.props.onFieldKeyDown};return this.props.mask?(0,p.tZ)(c(),{...t,...this.props.maskProps,mask:this.props.mask,onCopy:()=>m(t.value),onCut:()=>m(t.value)},(e=>(0,p.tZ)("input",{...s,...e}))):(0,p.tZ)("div",{className:h.Z.inputRow},(0,p.tZ)("input",{...s,...t}),(0,p.tZ)("div",{hidden:!this.props.error||"string"!=typeof this.props.error,sx:{color:"ds.text.danger.quiet"},className:h.Z.errorMessage},this.props.error))}render(){const e="password"!==this.props.type?this.props.value||this.props.placeholder:"";return(0,p.tZ)("div",{className:l()(h.Z.container,this.props.multiLine?h.Z.containerMultiLine:null)},this.props.label&&(0,p.tZ)("label",{className:h.Z.label,htmlFor:this.state.fieldHtmlId},(0,p.tZ)("span",{className:h.Z.text,title:this.props.label},this.props.label)),(0,p.tZ)(u.Z,{tooltipText:e,className:l()(h.Z.value,{[h.Z.placeholder]:!this.props.value,[h.Z.multiline]:this.props.multiLine})},this.props.multiLine?this.getTextarea():this.getInput()))}}b.defaultProps={maskProps:{maskChar:""}}},970818:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(696832),a=s(526849),i=s(383849),l=s.n(i),o=s(769183);var r=s(161964);function d(e,t){const s=e.find((e=>String(e.value)===String(t)));return null!=s?s:null}class c extends n.Component{constructor(e){super(e),this.select=n.createRef(),this.handleChange=e=>{const t=e.target;if(!t)return;const s=t.value,n=d(this.props.options,s);this.setState({optionSelected:n}),this.props.onChange&&this.props.onChange(e)},this.handleKeyDown=e=>{"Enter"===e.key&&e.preventDefault(),this.props.onFieldKeyDown?.(e)},this.handleFocus=()=>{this.setState({isSelectFocused:!0})},this.handleBlur=()=>{this.setState({isSelectFocused:!1})};let t=null;this.props.options.length&&(t=d(this.props.options,null===this.props.defaultOption?(0,a.head)(this.props.options).value:this.props.defaultOption.value)),this.state={fieldHtmlId:(0,o.Z)(),optionSelected:t,isSelectFocused:!1}}getValue(){if(!this.select.current)throw new Error("select ref not initialized");return this.select.current.value}render(){var e;const t=this.props.marginSide||"none",s=l()("selectContainer--mo5uz0qo56",r.Z[t],{"transparent--pz8wb74Jmh":this.props.isTransparent,"disabled--I9BAM7Vdre":this.props.disabled,"focused--ietgHqFLIm":this.state.isSelectFocused}),i=l()("selector--fgNHKzkAC3",this.props.classNames);let o;this.state.optionSelected?o=this.state.optionSelected.value:this.props.options.length&&(o=null===this.props.defaultOption?(0,a.head)(this.props.options).value:this.props.defaultOption.value);const d=this.state.optionSelected?this.state.optionSelected.selectedLabel?this.state.optionSelected.selectedLabel:this.state.optionSelected.label:this.props.placeholder;return n.createElement("div",{className:"container--KChkEdb4YV"},this.props.label&&n.createElement("label",{className:r.Z.label,htmlFor:this.state.fieldHtmlId,title:this.props.label},this.props.label),n.createElement("div",{className:s},n.createElement("div",{className:i},this.state.optionSelected&&this.state.optionSelected.icon&&n.createElement("span",{className:"icon--p3a7nsSbg9"},this.state.optionSelected.icon),n.createElement("span",{className:"text--SjkXyB7Kyp"},d)),n.createElement("select",{key:this.state.fieldHtmlId,className:r.Z.select,ref:this.select,id:this.state.fieldHtmlId,value:o,name:this.props.name,disabled:this.props.disabled,"data-name":this.props.dataName,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,"aria-label":null!=(e=this.props.ariaLabel)?e:this.props.label},this.props.options.map((e=>n.createElement("option",{key:e.value,disabled:e.disabled,value:String(e.value)},e.label))))))}}},665968:(e,t,s)=>{s.d(t,{S:()=>Pt});var n=s(696832),a=s(139378),i=s(617509),l=s(292210),o=s(857323),r=s(511494),d=s(708608),c=s(616274),p=s(812803),u=s(481159),h=s(869375),m=s(277786),b=s(80286),g=s(987364),_=s(422615),w=s(355452),f=s(673093);let y;!function(e){e[e.SECONDARY_LOGIN=0]="SECONDARY_LOGIN",e[e.OTP_CODE=1]="OTP_CODE"}(y||(y={}));const C=e=>Boolean(e.values.otpUrl)||Boolean(e.values.otpSecret),v=e=>{const{login:t,secondaryLogin:s}=e.values;return Boolean(t)||Boolean(s)};var Z=s(927761),x=s(191492);const k=e=>{const{requiresMasterPassword:t,credentialId:s,...a}=e,{areProtectedItemsUnlocked:i,openProtectedItemsUnlocker:l}=(0,Z.tY)(),o=n.useCallback((e=>e&&!i&&t&&s?new Promise(((e,t)=>{l({action:x.P7.Show,itemType:x.Ru.Password,showNeverAskOption:!0,credentialId:s,successCallback:e,cancelCallback:t})})):Promise.resolve()),[i,s,l,t]);return n.createElement(d.WUg,{...a,onPasswordVisibilityChangeRequest:o})};var E=s(479189),I=s(5727),P=s(446389),S=s(148038),T=s(585921),L=s(785362);const W={title:"webapp_lock_items_require_master_password_for_credential_title_on",subtitle:"webapp_lock_items_require_master_password_for_credential_subtitle_on",confirm:"webapp_lock_items_require_master_password_confirm_on_for_credential"},N={title:"webapp_lock_items_require_master_password_for_credential_title_off",subtitle:"webapp_lock_items_require_master_password_for_credential_subtitle_off",confirm:"webapp_lock_items_require_master_password_confirm_off_for_credential"},R=({name:e,title:t,description:s,setValue:a,isMpProtected:i=!1,value:l,disabled:o=!1})=>{const{areProtectedItemsUnlocked:r,openProtectedItemsUnlocker:c}=(0,Z.tY)(),p=(0,n.useCallback)((e=>{const t=e.target.checked,s=async()=>{await a(t)};return i&&!r?((0,L.jF)(),c({itemType:x.Ru.SecuritySettings,options:{fieldsKeys:t?W:N,translated:!1},successCallback:s})):s()}),[r,i,c,a]),u=`setting-${e}`;return(0,I.tZ)(d.Ejs,{sx:{marginTop:"-0.5em"}},(0,I.tZ)(T.XZ,{label:t,description:s,checked:l,onChange:p,id:u,disabled:o}))};var F=s(975131),D=s(658273),O=s(860039),V=s(670138);const B="webapp_credential_edition_field_options_always_log_me",U="webapp_credential_edition_field_options_always_log_me_details",q="webapp_credential_edition_field_options_subdomain_only",M="webapp_credential_edition_field_options_subdomain_only_details_associated",z="webapp_credential_edition_field_options_subdomain_only_infobox",A="webapp_credential_edition_field_options_subdomain_only_details_linked_websites",G="webapp_credential_edition_field_options_always_require_master_password",H="webapp_credential_edition_field_options_always_require_master_password_details",K="webapp_credential_edition_field_options_always_require_master_password_disable_feedback_markup",j=({credentialPreferences:e,isNewCredential:t,url:s,dashlaneDefinedLinkedWebsites:a,update:i})=>{const r=(0,D.nO)(),c=(0,V.w)("autofill_web_autologin_on_url_with_port_dev"),p=(0,F.q)(),u=(0,n.useMemo)((()=>{if(!s)return!1;try{return new URL(s),!0}catch(e){try{return new URL("https://"+s),!0}catch(e){return!1}}}),[s]),{translate:h}=(0,P.Z)(),m=(0,O.F)(),b=t=>i({...e,requiresMp:t}),g=r?c?new l.ParsedURL(s).getHost():new l.ParsedURL(s).getHostname():o.HQ.getAuthorityForUrl(s),_=a.length>1;return(0,I.tZ)(d.T5p,{gridTemplateColumns:"173px 1fr",alignItems:"flex-start",justifyItems:"flex-end"},(0,I.tZ)(d.nvN,{sx:{fontWeight:600,paddingRight:"24px"}},h("webapp_credential_edition_field_options")),(0,I.tZ)(d.Ejs,{gap:"24px"},u?null:(0,I.tZ)(d.vDh,{severity:"warning",size:"small",title:h("webapp_credential_edition_field_options_no_url_warning")}),(0,I.tZ)(R,{name:"autoLogin",description:h(U),isMpProtected:!1,title:h(B),setValue:t=>i({...e,autoLogin:t}),value:e.autoLogin,disabled:!u}),(0,I.tZ)(R,{name:"fixedDomain",isMpProtected:!1,title:(0,I.tZ)("span",{sx:{display:"inline-flex",flexWrap:"wrap"}},(0,I.tZ)("span",null,h(q)," "),(0,I.tZ)("span",{sx:{fontStyle:"italic",color:d.O9T.midGreen00}},g)),description:_?(0,I.tZ)(d.Ejs,null,h(M),(0,I.tZ)(d.vDh,{severity:"subtle",size:"descriptive",title:h(z,{associatedWebsitesLength:a.length}),expandable:!0,iconSizePx:20},(0,I.tZ)("div",{sx:{marginLeft:"32px"}},a.map((e=>(0,I.tZ)("div",{key:e},e)))))):h(A),setValue:t=>i({...e,subDomainOnly:t}),value:e.subDomainOnly,disabled:!u}),m?null:p.status===S.rq.Success?(0,I.tZ)(R,{name:"requireMP",isMpProtected:!t,title:h(G),description:(0,I.tZ)("div",null,p.data?(0,I.tZ)("div",{sx:{marginBottom:"8px",color:d.O9T.midGreen00}},h.markup(K)):null,(0,I.tZ)("span",null,h(H))),setValue:b,value:!!p.data||e.requiresMp,disabled:!u||p.data}):(0,I.tZ)(R,{name:"requireMP",isMpProtected:!t,title:h(G),description:h(H),setValue:b,value:e.requiresMp,disabled:!u})))};var Y,X=s(851970),$=s(562150),J=s.n($);const{black:Q,midGreen00:ee,white:te}=d.O9T,se={backgroundColor:te,borderRadius:"4px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},ne={display:"flex",flexWrap:"wrap",maxWidth:"20ch",wordWrap:"break-word",fontFamily:J()["--dashlane-fontfamily-mono"],fontSize:J()["--password-font-size"],lineHeight:J()["--password-line-height"],fontWeight:J()["--dashlane-font-weight-regular"],letterSpacing:J()["--password-letter-spacing"],fontVariantLigatures:"none",fontFeatureSettings:'"calt" 0'},ae={base:{display:"flex"},numbers:{color:"#3366ff"},symbols:{color:"#c15315"},letters:{color:Q}},ie=({password:e,onRefreshPassword:t})=>{const{translate:s}=(0,P.Z)(),a=e=>"0123456789".includes(e)?ae.numbers:"&@$!#?".includes(e)?ae.symbols:ae.letters,i=(0,n.useMemo)((()=>e.split("").map(((e,t)=>(0,I.tZ)("span",{key:`char-${t}`,sx:{...ae.base,...a(e)}},e)))),[e]);return(0,I.tZ)("div",{sx:se},(0,I.tZ)("div",{sx:{...ne,transition:"opacity 0.1s ease"}},i),(0,I.tZ)(d.zxk,{sx:{minWidth:"auto",padding:"4px",marginRight:"0"},size:"small","aria-label":s("webapp_credential_edition_field_generator_refresh"),type:"button",nature:"ghost",onClick:t},Y||(Y=(0,I.tZ)(d.DuK,{hoverColor:ee}))))},le="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890!@#$&?";function oe(e=0,t=1){return Math.floor(Math.random()*(t-e))+e}function re(){return le.substr(oe(0,le.length-1),1)}function de(e){return le.substr(0,e).split("").map((()=>re())).join("")}function ce(e,t=oe(0,e.length)){return e.substr(0,t)+re()+e.substr(t+1)}const pe={0:"too_guessable",1:"very_guessable",2:"somewhat_guessable",3:"safely_unguessable",4:"very_unguessable"};function ue(e){return e>=100?4:e>=75?3:e>=50?2:e>=25?1:e>=0?0:void 0}const{midGreen03:he,white:me}=d.O9T,be={margin:0,borderRadius:"4px",padding:"10px",boxSizing:"border-box",color:me,display:"flex",flexDirection:"column",justifyContent:"space-between"},ge={boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"center"},_e=({isLoading:e,generatedPassword:t,passwordLength:s,onRefreshPassword:a,strength:i})=>{const{translate:l}=(0,P.Z)(),o=(0,V.w)("webplatform_web_prideColors"),r=(0,n.useMemo)((()=>function(e){return`webapp_credential_edition_field_generator_strength/${function(e){const t=ue(e);return t?pe[t]:""}(e)||"none"}`}(i)),[i]),c=(0,n.useMemo)((()=>ue(i)),[i]),{shuffledPassword:p,isPasswordShuffling:u}=function({shouldShuffle:e,passwordLength:t}){const s=(0,n.useRef)(null),[a,i]=(0,n.useState)(de(t)),l=(0,n.useCallback)((()=>{let e=ce(a);const t=e.length/6;for(let s=0;s<t;s++)e=ce(e);i(e)}),[a]),[o,r]=(0,n.useState)(e);return(0,n.useEffect)((()=>{let t;return e?r(!0):t=window.setTimeout((()=>{r(!1)}),150),()=>window.clearTimeout(t)}),[e]),(0,n.useEffect)((()=>(a.length!==t&&i(de(t)),o?s.current=window.setInterval(l,10):s.current&&window.clearInterval(s.current),()=>{s.current&&window.clearInterval(s.current)})),[o,t,l,a]),{shuffledPassword:a,isPasswordShuffling:o}}({shouldShuffle:e,passwordLength:s}),h=u?p:t;return(0,I.tZ)("div",{sx:be},(0,I.tZ)("div",{sx:ge},(0,I.tZ)(ie,{onRefreshPassword:a,password:h}),(0,I.tZ)("div",{sx:{marginTop:"4px"}},(0,I.tZ)(d.YVT,{score:c,showAdditionalText:!0,additionalText:l(r),backgroundColor:he,showQueerColors:o}))))},{grey00:we}=d.O9T,fe=({options:e,onOptionsChanged:t})=>{const{translate:s}=(0,P.Z)(),a=(0,n.useCallback)((s=>{const n=s.currentTarget.checked;t({...e,digits:n})}),[t,e]),i=(0,n.useCallback)((s=>{const n=s.currentTarget.checked;t({...e,letters:n})}),[t,e]),l=(0,n.useCallback)((s=>{const n=s.currentTarget.checked;t({...e,symbols:n})}),[t,e]),o=(0,n.useCallback)((s=>{const n=s.currentTarget.checked;t({...e,avoidAmbiguous:!n})}),[t,e]),r=(0,n.useCallback)((e=>{const t=s(e),n=t.search(/(\(.*\))$/);if(-1===n)return t;const a=t.substring(0,n),i=t.substring(n);return(0,I.tZ)(d.nvN,{size:"small"},a,(0,I.tZ)("span",{sx:{color:we}},i))}),[s]);return(0,I.tZ)(d.T5p,{justifyItems:"left",gap:"10px",sx:{paddingBottom:"10px"}},(0,I.tZ)(d.XZJ,{label:r("webapp_credential_edition_field_generator_use_letters"),onChange:i,checked:e.letters,disabled:e.letters&&!e.digits}),(0,I.tZ)(d.XZJ,{label:r("webapp_credential_edition_field_generator_use_digits"),onChange:a,checked:e.digits,disabled:e.digits&&!e.letters}),(0,I.tZ)(d.XZJ,{label:r("webapp_credential_edition_field_generator_use_symbols"),onChange:l,checked:e.symbols}),(0,I.tZ)(d.XZJ,{label:r("webapp_credential_edition_field_generator_similar_characters"),onChange:o,checked:!e.avoidAmbiguous}))},ye=({length:e,onLengthChanged:t})=>{const{translate:s}=(0,P.Z)(),[a,i]=(0,n.useState)(e);return(0,I.tZ)("div",{"aria-label":s("webapp_credential_edition_field_generator_min_max_a11y",{min:4,max:40})},(0,I.tZ)(d.iRW,{label:s("webapp_credential_edition_field_generator_password_length",{length:a}),min:4,max:40,step:1,onChange:e=>{i(e)},onChangeComplete:t,value:a}))},{dashGreen05:Ce,dashGreen06:ve}=d.O9T,Ze=({options:e,handleSettingsChange:t,handleUsePassword:s})=>{const{translate:n}=(0,P.Z)();return(0,I.tZ)(d.T5p,{gap:"10px",sx:{padding:"10px"}},(0,I.tZ)(d.T5p,{gap:"10px",sx:{textAlign:"left",padding:"10px",backgroundColor:ve,borderRadius:"4px"}},(0,I.tZ)(ye,{length:e.length,onLengthChanged:s=>{t({...e,length:s})}}),(0,I.tZ)("hr",{sx:{border:"none",borderBottom:`solid 1px ${Ce}`,margin:"10px 0"}}),(0,I.tZ)(fe,{onOptionsChanged:e=>{t(e)},options:e})),(0,I.tZ)(d.zxk,{sx:{mx:0},type:"button",nature:"primary",size:"small",onClick:s},n("webapp_credential_edition_field_generator_use_password_button")))};var xe,ke,Ee;const{white:Ie,dashGreen06:Pe}=d.O9T,Se={length:16,digits:!0,letters:!0,symbols:!0,avoidAmbiguous:!0},Te="webapp_credential_edition_field_generator_generate_tooltip",Le=({credential:e,handleChangePassword:t})=>{const[s,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)(Se),{translate:o}=(0,P.Z)();(0,n.useEffect)((()=>{c.C.getPasswordGenerationSettings().then((e=>{l(e)}))}),[]);const[p,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(""),[b,_]=(0,n.useState)(25),w=e=>{u(!0),c.C.generatePassword({settings:e}).then((e=>{e.success&&(m(e.password),_(e.strength))})).finally((()=>{(0,g.K)(new r.UserGeneratePasswordEvent({hasDigits:e.digits,hasLetters:e.letters,hasSymbols:e.symbols,hasSimilar:!e.avoidAmbiguous,length:e.length})),u(!1)}))};return(0,I.tZ)(d.ua7,{sx:{width:"300px",backgroundColor:Ie,padding:"0",borderRadius:"4px"},offset:[0,0],trigger:"persist",placement:"left",passThrough:!s,arrowSize:0,content:(0,I.tZ)(X.Y,{onClickOutside:()=>a(!1),autoFocus:!1},(0,I.tZ)(d.T5p,{sx:{bg:Pe}},(0,I.tZ)(d.dDn,{justifySelf:"end","aria-label":o("_common_dialog_dismiss_button"),as:d.hU,icon:xe||(xe=(0,I.tZ)(d.Two,null)),onClick:()=>a(!1)},ke||(ke=(0,I.tZ)(d.Two,null)))),(0,I.tZ)(d.T5p,{sx:{padding:"4px"}},(0,I.tZ)(_e,{onRefreshPassword:()=>{w(i)},isLoading:p,passwordLength:i.length,generatedPassword:h,strength:b}),(0,I.tZ)(Ze,{options:i,handleSettingsChange:e=>{l(e),w(e)},handleUsePassword:()=>{t(h),a(!1)}})))},(0,I.tZ)("div",null,(0,I.tZ)(d.ua7,{placement:"top",content:o(Te)},(0,I.tZ)(d.zxk,{"aria-label":o(Te),nature:"secondary",type:"button",onClick:()=>{s||w(i),a(!s)},disabled:e.limitedPermissions,sx:{border:"none",minWidth:"fit-content",padding:"10px"}},Ee||(Ee=(0,I.tZ)(T.JO,{name:"FeaturePasswordGeneratorOutlined",color:"ds.oddity.brand"}))))))};var We,Ne=s(657818);const Re="webapp_credential_edition_field_website_action_goto",Fe=({url:e,hasUrlError:t,editViewButtonEnabled:s,limitedPermissions:n=!1,handleChange:a,handleGoToWebsite:i})=>{const{translate:l}=(0,P.Z)();return(0,I.tZ)(p.N,{enabled:s,disableHover:!0},(0,I.tZ)(u.Z,{label:l("webapp_credential_edition_field_website"),placeholder:l("webapp_credential_edition_field_placeholder_no_url"),dataName:"url",value:e,error:t,readOnly:n,onChange:a}),(0,I.tZ)(d.ua7,{placement:"top",content:l(Re)},(0,I.tZ)(T.zx,{mood:"neutral",intensity:"supershy",type:"button",onClick:i,sx:{border:"none",minWidth:"fit-content",padding:"10px"},role:"link","aria-label":l(Re)},We||(We=(0,I.tZ)(d.RTC,null)))))};var De=s(63703);const Oe=({children:e,url:t,hasUrlError:s,limitedPermissions:a,editViewButtonEnabled:i,handleMainWebsiteChange:l,handleGoToWebsite:o})=>n.createElement("div",{className:De.Z.containerBlock},n.createElement(Fe,{url:t,hasUrlError:s,editViewButtonEnabled:i,limitedPermissions:a,handleChange:l,handleGoToWebsite:o}),e),Ve=({url:e,hasUrlError:t,linkedWebsites:s,handleMainWebsiteChange:a,handleChanges:i,handleGoToWebsite:l})=>{const[o,r]=n.useState(!1),[d,c]=n.useState([]);return n.useEffect((()=>{d.length&&r(!0),i({linkedWebsites:{...s,addedByUser:d}})}),[d]),n.createElement(Oe,{url:e,hasUrlError:t,limitedPermissions:!1,editViewButtonEnabled:!1,handleMainWebsiteChange:a,handleGoToWebsite:l},n.createElement(Ne.a,{linkedWebsitesList:d,areItemsLocked:!1,credentialId:"",isListEditable:!0,isEditing:o,showUrlProtocol:!0,updateLinkedWebsitesList:c}))};var Be,Ue=s(645810);const qe=({linkedWebsites:e,handleOnClickLinkedWebsitesCount:t})=>{const{translate:s}=(0,P.Z)(),a=e.addedByUser.length,i=(e.addedByDashlane.length>1?e.addedByDashlane.length:0)+a;return i>0?n.createElement("button",{type:"button",className:Ue.Z.linkedWebsitesDetails,onClick:t},s("webapp_credential_edition_linked_websites_title_with_count",{count:i}),Be||(Be=n.createElement(d.XCv,{size:12}))):null};var Me=s(637789);const ze=({url:e,linkedWebsites:t,hasUrlError:s,editViewButtonEnabled:a,limitedPermissions:i=!1,handleChange:l,handleGoToWebsite:o,onClickAddNewWebsite:r,onClickLinkedWebsitesCount:d})=>n.createElement(Oe,{url:e,hasUrlError:s,limitedPermissions:i,editViewButtonEnabled:a,handleMainWebsiteChange:l,handleGoToWebsite:o},n.createElement("div",{className:"linkedWebsitesContainer--xiS0SFSZB2"},d?n.createElement(qe,{linkedWebsites:t,handleOnClickLinkedWebsitesCount:d}):null,r&&!i?n.createElement(Me.E,{handleOnClickAddLinkedWebsiteButton:r}):null));var Ae,Ge=s(383967);const He=(0,n.memo)((({credential:e})=>{const{translate:t}=(0,P.Z)(),[s,a]=(0,n.useState)(null),i=(0,n.useCallback)((e=>a(e)),[]),l=(0,n.useCallback)((()=>a(null)),[]);return(0,T.tZ)(n.Fragment,null,(0,T.tZ)(d.ua7,{placement:"top",content:t("webapp_credential_edition_autochange")},(0,T.tZ)(T.zx,{mood:"neutral",intensity:"supershy",onClick:()=>i(e.id),disabled:e.limitedPermissions,sx:{border:"none",minWidth:"fit-content",padding:"10px"}},Ae||(Ae=(0,T.tZ)(d.HfT,null)))),s&&(0,T.tZ)(Ge.R,{credentialId:s,dismissCallback:l}))}));var Ke=s(383849),je=s.n(Ke),Ye=s(793429),Xe=s(154539),$e=s(24836);const Je=({credentialId:e,onCopy:t})=>{const{translate:s}=(0,P.Z)(),n=function(e){return(0,$e.k$)(Xe.otpApi,"otpCode",{credentialId:e})}(e);if(n.status!==S.rq.Success||void 0===n.data||null===n.data)return null;const[a,i,l]=n.status===S.rq.Success&&n.data?[n.data.code,n.data.validityTime,n.data.validityEndDate]:[null,3e4,1/0];return(0,I.tZ)(p.N,{enabled:n.status===S.rq.Success,disableHover:!0},(0,I.tZ)(d.Ejs,{alignItems:"center",sx:{paddingRight:"18px"}},(0,I.tZ)("label",{id:"otp-label",className:je()([Ye.Z.label,Ye.Z.text])},s("webapp_credential_edition_field_security_code")),(0,I.tZ)(d.CnT,{alertThreshold:5e3,"aria-labelledby":"otp-label",clockSize:18,code:a,sx:{marginLeft:"18px",width:"184px"},validityPeriod:i,validityEndDate:l})),(0,I.tZ)(f.m,{data:null!=a?a:"",onCopy:t,disabled:n.status!==S.rq.Success}))};var Qe=s(275907),et=s(989302),tt=(s(135758),s(425178));const st=(0,n.createContext)({}),nt=(0,n.createContext)({}),at=({children:e,vaultItemId:t,spaceId:s,signalEditedValues:a})=>{const[i,l]=(0,n.useState)(""),[o,r]=(0,n.useState)(!1),{collections:d}=(0,Qe.b)(),[c,p]=(0,n.useState)((()=>""===t?[]:d.flatMap((e=>e.vaultItems.some((e=>e.id===t))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),u=(0,n.useMemo)((()=>c.filter((e=>!e.hasBeenDeleted))),[c]),h=d.filter((e=>e.spaceId===s&&e.name.toLowerCase().includes(i.toLowerCase())&&!u.some((t=>t.id===e.id)))),m={setInput:l,setIsInputVisible:r,onSubmit:(e=i)=>{if((e=e.trimEnd()).length<=0)return;const t=c.findIndex((t=>t.name===e));if(-1===t)p((t=>{var n;const a=[...t],i=null!=(n=d.find((t=>t.name===e&&t.spaceId===s))?.id)?n:"";return a.push({id:i,name:e,spaceId:s,vaultItems:[],initiallyExisting:!1}),(0,tt.p)(a)}));else{const e=c[t];e.initiallyExisting&&e.hasBeenDeleted&&p((e=>{const s=[...e];return s[t].hasBeenDeleted=!1,s}))}a?.(!0),l("")},onDelete:e=>{const t=c.findIndex((t=>t.name===e));-1!==t&&(p((e=>{const s=[...e];return c[t].initiallyExisting?s[t].hasBeenDeleted=!0:s.splice(t,1),s})),a?.(!0))},clearVaultItemCollections:()=>p((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return n.createElement(st.Provider,{value:{input:i,isInputVisible:o,filteredCollections:h,vaultItemCollections:c,vaultItemCollectionsToDisplay:u,vaultItemId:t,spaceId:s}},n.createElement(nt.Provider,{value:m},e))},it=()=>(0,n.useContext)(st),lt=()=>(0,n.useContext)(nt);var ot=s(116551),rt=s(970818);const dt=({credentialCategories:e,onChange:t,selectedCategoryName:s})=>{const{translate:a}=(0,P.Z)();if(!e.length)return null;s||(s=a("webapp_credential_edition_field_placeholder_no_category"));const i=e.map((e=>({name:e.categoryName,id:e.id})));return n.createElement(rt.Z,{key:s,label:a("webapp_credential_edition_field_category"),placeholder:s,dataName:"category",options:(0,ot.rD)("credential",i,a("webapp_credential_edition_field_category_option_no_category")),defaultOption:(0,ot.pn)("credential",s,i,a("webapp_credential_edition_field_category_option_no_category")),onChange:t})},ct=({text:e,searchValue:t})=>{if(!t||!e)return(0,T.tZ)("span",null,e);const s=e.toLowerCase().indexOf(t.toLowerCase());return-1===s?(0,T.tZ)("span",null,e):(0,T.tZ)(n.Fragment,null,(0,T.tZ)("span",null,e.substring(0,s)),(0,T.tZ)("span",{sx:{color:"ds.text.brand.standard"}},e.substring(s,s+t.length)),(0,T.tZ)("span",null,e.substring(s+t.length)))},pt=e=>(0,T.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e}),ut=(0,s(481820).F4)({from:{transform:"scale3d(1, 0, 1)"},to:{transform:"scale3d(1, 1, 1)"}}),ht=e=>(0,T.tZ)("span",{sx:{position:"absolute",top:"calc(100% - 4px)",zIndex:7,width:"100%",backgroundColor:"white",boxShadow:"0px 4px 8px rgb(0 0 0 / 25%)",border:"1px solid",borderColor:"ds.border.neutral.quiet.idle",transformOrigin:"0 0",animation:`${ut} 150ms`},...e}),mt=e=>(0,T.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e});var bt,gt=s(226832);const _t=({hasMultipleCollections:e,...t})=>{const{spaceId:s}=it(),a=(0,gt.b)(s),{translate:i}=(0,P.Z)();return(0,T.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t},(0,T.tZ)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},a&&(0,T.tZ)(n.Fragment,null,`${a}`,bt||(bt=(0,T.tZ)("br",null))),i(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")))};var wt=s(699718);const ft=e=>(0,T.tZ)("ul",{sx:{display:"flex",flexDirection:"column",gap:"16px",overflowY:"scroll",maxHeight:"25vh",padding:"8px",...wt.W},...e});var yt=s(273732);const Ct=({onClick:e})=>{const{translate:t}=(0,P.Z)(),{input:s,filteredCollections:n}=it(),a=n.some((e=>e.name===s));return!s||a?null:(0,T.tZ)("li",{sx:{display:"flex",alignItems:"center"}},(0,T.tZ)(yt.h,{style:{color:"ds.text.brand.standard",margin:"0 12px",overflow:"unset",width:"fit-content"}},t("webapp_collections_input_create")),(0,T.tZ)(T.zx,{onClick:()=>e(s),intensity:"quiet",mood:"neutral",sx:{overflow:"hidden"}},(0,T.tZ)(yt.h,null,s)))},vt=({id:e,withSelection:t=!1,...s})=>{const a=(0,n.useRef)(null),{input:i,filteredCollections:l}=it(),{setInput:o,onSubmit:r}=lt(),d=e=>{r(e),a.current?.focus()};return(0,T.tZ)(mt,{sx:{gap:"16px"},...s},(0,T.tZ)("span",{sx:{position:"relative",width:"240px"}},(0,T.tZ)(et.rz,{ref:a,id:e,input:i,setInput:o,onSubmit:d}),t&&(l.length||i)&&(0,T.tZ)(ht,null,(0,T.tZ)(ft,null,(0,T.tZ)(Ct,{onClick:d}),l.map((t=>(0,T.tZ)("li",{key:`${e}_collection_input_${t.id}`,sx:{width:"fit-content",maxWidth:"100%"}},(0,T.tZ)(et.Au,{onClick:()=>d(t.name),title:t.name},(0,T.tZ)(ct,{text:t.name,searchValue:i})))))))))};var Zt;const xt=({id:e,hasCollections:t})=>{const{translate:s}=(0,P.Z)(),{isInputVisible:n}=it(),{setIsInputVisible:a}=lt();return n?(0,T.tZ)(vt,{id:e,withSelection:!0,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{a(!1)}),100)}}):(0,T.tZ)(T.zx,{sx:{margin:"4px 0"},onClick:()=>a(!0),icon:Zt||(Zt=(0,T.tZ)(d.dtP,null)),layout:"iconLeading",intensity:"supershy"},s(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new"))},kt="collectionsFieldId",Et=(0,n.forwardRef)(((e,t)=>{const{vaultItemCollections:s,vaultItemCollectionsToDisplay:a}=it(),{onDelete:i,clearVaultItemCollections:l}=lt(),o=a?.length>0;return(0,n.useImperativeHandle)(t,(()=>({getVaultItemCollections:()=>s,clearVaultItemCollections:l}))),(0,T.tZ)(mt,{sx:{gap:"24px",alignItems:!o&&"center"}},(0,T.tZ)(_t,{hasMultipleCollections:a?.length>1,htmlFor:kt,sx:{marginTop:o&&"15px"}}),(0,T.tZ)(pt,{sx:{...o&&{gap:"8px",marginTop:"10px"}}},(0,T.tZ)(et.zT,{sx:{marginLeft:"16px"},collectionListItems:a.map((e=>(0,T.tZ)(et.cF,{key:`collections_field_li_${e.name}`},(0,T.tZ)(et.KH,{onDismiss:()=>i(e.name)},e.name))))}),(0,T.tZ)(xt,{id:kt,hasCollections:o})))})),It=(0,n.forwardRef)((({credentialCategories:e,selectedCategoryId:t,vaultItemId:s,spaceId:n,signalEditedValues:a,...i},l)=>{const{isCollectionsEnabled:o,isCollectionsLoading:r}=(0,Qe.b)();return o&&r?null:o?(0,T.tZ)(at,{vaultItemId:s,spaceId:n,signalEditedValues:a},(0,T.tZ)(Et,{ref:l})):(0,T.tZ)(dt,{credentialCategories:e,selectedCategoryName:e.find((e=>e.id===t))?.categoryName,...i})}));class Pt extends w.ZP{constructor(e){super(e),this.passwordInitiallyEmpty=void 0,this.GENERATE_PASSWORD_FEATURE_FLIP="techweek_web_passwordGeneratorInEditView_v2",this.collectionsFieldRef=void 0,this.handleSpaceChange=e=>{this.state.values.spaceId!==e&&(this.collectionsFieldRef.current?.clearVaultItemCollections(),this.handleChange(e,"spaceId"))},this.isValueFieldVisible=(e=>{const t={[y.OTP_CODE]:C(e),[y.SECONDARY_LOGIN]:v(e)};return(e,s)=>t[e]||!!s})(this.state),this.onCopyField=async(e,t,s)=>{const n=await(0,D.gm)(c.C)?new l.ParsedURL(this.state.values.url).getRootDomain():(0,i.extractRootDomain)(this.state.values.url);(0,g.K)(new r.UserCopyVaultItemFieldEvent({itemType:r.ItemType.Credential,field:e,itemId:this.state.values.id,isProtected:!(e!==r.Field.Password||!this.state.values.autoProtected&&!this.state.internal.credentialsGloballyRequireMP)})),(0,g.K)(new r.AnonymousCopyVaultItemFieldEvent({itemType:r.ItemType.Credential,field:e,domain:{id:await(0,r.hashDomain)(n),type:r.DomainType.Web}})),s&&this.props.lee.dispatchGlobal((0,b.Z)("[credentials-form]: unable to copy to clipboard",s))},this.handlePasswordFocused=e=>{if(!this.state.internal.isNewItemType&&this.isItemLocked()&&!this.state.internal.showingPassword){const{currentTarget:t}=e,s=()=>{t?.focus()};this.props.additionalProps?.openProtectedItemsUnlocker({action:x.P7.Show,itemType:x.Ru.Password,showNeverAskOption:!0,credentialId:this.state.values.id,successCallback:s})}},this.onCopyEmailField=this.onCopyField.bind(this,r.Field.Email),this.onCopyLoginField=this.onCopyField.bind(this,r.Field.Login),this.onCopyOtpCodeField=this.onCopyField.bind(this,r.Field.OtpCode),this.onCopyPasswordField=this.onCopyField.bind(this,r.Field.Password),this.onCopySecondaryField=this.onCopyField.bind(this,r.Field.SecondaryLogin),this.isItemLocked=()=>!this.passwordInitiallyEmpty&&(void 0!==this.props.additionalProps?.areProtectedItemsUnlocked?!this.props.additionalProps.areProtectedItemsUnlocked&&(this.state.values.autoProtected||this.state.internal.credentialsGloballyRequireMP):void 0),this.toggleShowPassword=e=>{this.setInternalState({showingPassword:e}),e&&this.logRevealPassword()},this.logRevealPassword=async()=>{const e=await(0,D.gm)(c.C)?new l.ParsedURL(this.state.values.url).getRootDomain():(0,i.extractRootDomain)(this.state.values.url),t=!!this.state.values.autoProtected||!!this.state.internal.credentialsGloballyRequireMP;this.state.values.id&&((0,g.K)(new r.UserRevealVaultItemFieldEvent({field:r.Field.Password,isProtected:t,itemId:this.state.values.id,itemType:r.ItemType.Credential})),(0,g.K)(new r.AnonymousRevealVaultItemFieldEvent({field:r.Field.Password,itemType:r.ItemType.Credential,domain:{id:await(0,r.hashDomain)(e),type:r.DomainType.Web}})))};const{additionalProps:{activeSpaces:t,credentialCategories:s,shouldShowRequireMasterPassword:a},newItemType:o}=e,d={activeSpaces:t,credentialCategories:s,isNewItemType:!!o,shouldShowRequireMasterPassword:a,showingPassword:!1,credentialsGloballyRequireMP:void 0};this.passwordInitiallyEmpty=!this.state.values.password,this.state={...this.state,internal:{...this.state.internal,...d}},this.collectionsFieldRef=n.createRef()}componentDidMount(){c.C.arePasswordsProtected().then((e=>{this.setState((t=>({internal:{...t.internal,credentialsGloballyRequireMP:e}})))}))}isFormValid(){return!0}getVaultItemCollections(){return this.collectionsFieldRef.current?.getVaultItemCollections()}goToWebsite(e){(0,_.k)(e),(0,m.Yo)(e.redirectUrl)}isEditViewButtonEnabled(e){const{internal:t}=this.state;return!t.isNewItemType&&Boolean(e)}isNotLimitedPermissions(){const{internal:e,values:t}=this.state;return!e.isNewItemType&&!t.limitedPermissions}render(){var e,t,s,i;const l=this.props.lee.translate.namespace("webapp_credential_edition_field_"),{internal:r,values:c,errors:m}=this.state,{credentialCategories:b=[]}=this.state.internal,g=(0,a.capitalize)(null!=(e=o.HQ.getDomainForUrl(c.url))?e:"");let _=c.spaceId;c.forceCategorizedSpace?.details?.teamName&&(_=c.forceCategorizedSpace?.teamId);const w=r.activeSpaces?.find((e=>e.teamId===_)),C=null!=(t=w?.teamName)?t:l("space_personal");return n.createElement(n.Fragment,null,n.createElement("div",{className:De.Z.containerBlock},(v=this.state,Boolean(v.internal.isNewItemType)?n.createElement(Ve,{url:c.url,hasUrlError:m.url,linkedWebsites:c.linkedWebsites,handleMainWebsiteChange:this.handleChange,handleChanges:this.handleChanges,handleGoToWebsite:()=>this.goToWebsite(c)}):null),(e=>!this.state.internal.isNewItemType)()&&n.createElement(p.N,{enabled:this.isEditViewButtonEnabled(c.email),disableHover:!0},n.createElement(u.Z,{label:l("email"),placeholder:l("placeholder_no_email"),dataName:"email",readOnly:c.limitedPermissions,value:c.email,onChange:this.handleChange}),n.createElement(f.m,{data:c.email,onCopy:this.onCopyEmailField})),n.createElement(p.N,{enabled:this.isEditViewButtonEnabled(c.login),disableHover:!0},n.createElement(u.Z,{label:l("login"),placeholder:l("placeholder_no_login"),dataName:"login",readOnly:c.limitedPermissions,value:c.login,onChange:this.handleChange}),n.createElement(f.m,{data:c.login,onCopy:this.onCopyLoginField})),this.isValueFieldVisible(y.SECONDARY_LOGIN,c.secondaryLogin)&&n.createElement(p.N,{enabled:Boolean(c.secondaryLogin),disableHover:!0},n.createElement(u.Z,{label:l("secondary_login"),placeholder:l("placeholder_no_secondary_login"),dataName:"secondaryLogin",value:c.secondaryLogin,readOnly:c.limitedPermissions,onChange:this.handleChange}),n.createElement(f.m,{data:c.secondaryLogin,onCopy:this.onCopySecondaryField})),n.createElement(p.N,{enabled:!0,disableHover:!0},n.createElement("div",{className:"centeredFieldContainer--hqprAHIrBT"},n.createElement("label",{className:Ye.Z.label,htmlFor:"password"},n.createElement("span",{className:Ye.Z.text,title:l("password")},l("password"))),n.createElement(k,{key:"password",className:"passwordInput--hOFtro6yVO",id:"password",requiresMasterPassword:!r.isNewItemType&&this.isItemLocked(),credentialId:c.id,value:c.password,placeholder:l("placeholder_no_password"),hidePasswordTooltipText:l("password_action_hide"),showPasswordTooltipText:l("password_action_show"),disabled:!r.isNewItemType&&c.limitedPermissions,readOnly:!r.isNewItemType&&this.isItemLocked(),onFocus:this.handlePasswordFocused,onChange:e=>this.handleChange(e.target.value,"password"),onPasswordVisibilityChanged:this.toggleShowPassword,style:{width:"240px"}})),n.createElement("div",{className:"passwordButtonsActions--sHufzyFHxV"},this.isNotLimitedPermissions()&&c.password?n.createElement(n.Fragment,null,n.createElement(f.m,{itemId:c.id,disabled:void 0===this.isItemLocked(),data:c.password,checkProtected:this.isItemLocked,onCopy:this.onCopyPasswordField}),n.createElement(He,{credential:c})):null,c.password?null:n.createElement(h.h,{featureFlips:[this.GENERATE_PASSWORD_FEATURE_FLIP]},n.createElement(Le,{handleChangePassword:e=>this.handleChange(e,"password"),credential:c})))),this.isValueFieldVisible(y.OTP_CODE)?n.createElement(Je,{credentialId:this.state.values.id,onCopy:this.onCopyOtpCodeField}):null),(e=>!this.state.internal.isNewItemType)()?n.createElement(ze,{url:c.url,linkedWebsites:c.linkedWebsites,hasUrlError:m.url,editViewButtonEnabled:this.isEditViewButtonEnabled(c.url),limitedPermissions:c.limitedPermissions,handleChange:this.handleChange,handleGoToWebsite:()=>this.goToWebsite(c),onClickAddNewWebsite:this.props.additionalProps?.onClickAddNewWebsite,onClickLinkedWebsitesCount:this.props.additionalProps?.onClickLinkedWebsitesCount}):null,n.createElement("div",{className:De.Z.containerBlock},n.createElement(u.Z,{label:l("name"),placeholder:l("placeholder_no_title"),dataName:"title",value:c.title||g,readOnly:c.limitedPermissions,onChange:this.handleChange}),(e=>{var t;return(null!=(t=e.internal.activeSpaces?.length)?t:0)>0})(this.state)?n.createElement(d.ua7,{content:l("force_categorized",{space:C}),passThrough:!c.forceCategorizedSpace},n.createElement("div",null,n.createElement(E.M,{labelSx:E.e,spaceId:null!=(s=this.state.values.spaceId)?s:"",isDisabled:Boolean(c.forceCategorizedSpace),onChange:this.handleSpaceChange}))):null,n.createElement(It,{credentialCategories:b,onChange:this.handleChange,selectedCategoryId:c.category,spaceId:null!=(i=this.state.values.spaceId)?i:"",vaultItemId:c.id,ref:this.collectionsFieldRef,signalEditedValues:this.props.signalEditedValues}),n.createElement(u.Z,{label:l("note"),placeholder:l("placeholder_no_note"),dataName:"note",value:c.note,disabled:c.limitedPermissions,onChange:this.handleChange,multiLine:!0,testId:"credential_edit_note_value"})),n.createElement(j,{isNewCredential:!!r.isNewItemType,credentialPreferences:{autoLogin:c.autoLogin,requiresMp:!!c.autoProtected,subDomainOnly:!!c.onlyForThisSubdomain},update:e=>(this.handleChanges({autoLogin:e.autoLogin,autoProtected:e.requiresMp,protectWithMasterPassword:e.requiresMp,onlyForThisSubdomain:e.subDomainOnly}),Promise.resolve()),url:c.url,dashlaneDefinedLinkedWebsites:c.linkedWebsites.addedByDashlane}));var v}}},637789:(e,t,s)=>{s.d(t,{E:()=>d});var n=s(696832),a=s(383849),i=s.n(a),l=s(708608),o=s(446389),r=s(645810);const d=({disabled:e=!1,handleOnClickAddLinkedWebsiteButton:t})=>{const{translate:s}=(0,o.Z)();return n.createElement("button",{type:"button",className:i()(r.Z.linkedWebsitesDetails,r.Z.addButton),onClick:t,disabled:e},n.createElement(l.dtP,{size:12,color:l.O9T.dashGreen03}),s("webapp_credential_edition_linked_websites_add_website"))}},657818:(e,t,s)=>{s.d(t,{a:()=>v});var n,a,i=s(696832),l=s(139378),o=s.n(l),r=s(708608),d=s(446389),c=s(481159),p=s(637789),u=s(511494),h=s(987364),m=s(277786),b=s(616274),g=s(292210),_=s(658273);const w="webapp_credential_linked_websites_action_delete",f="webapp_credential_linked_websites_action_goto",y=({linkedWebsite:e,credentialId:t,onRemoveItem:s})=>{const{translate:l}=(0,d.Z)();return i.createElement(i.Fragment,null,e.trim()?i.createElement(r.ua7,{placement:"top",content:l(f)},i.createElement(r.zxk,{nature:"secondary",type:"button",onClick:(o=e,async()=>{const e=await(0,_.gm)(b.C)?new g.ParsedURL(o).getRootDomain():(0,m.JI)(o);(0,h.K)(new u.UserOpenExternalVaultItemLinkEvent({domainType:u.DomainType.Web,itemId:t,itemType:u.ItemTypeWithLink.Credential})),(0,h.K)(new u.AnonymousOpenExternalVaultItemLinkEvent({itemType:u.ItemTypeWithLink.Credential,domain:{id:await(0,u.hashDomain)(e),type:u.DomainType.Web}})),(0,m.Yo)((e=>/^[a-z]+:\/\//i.test(e)?e:["https://",e].join(""))(o))}),style:{border:"none",minWidth:"fit-content",padding:"10px"},role:"link",name:"hiddenAction","aria-label":l(f),"data-testid":"open_linked_website"},n||(n=i.createElement(r.RTC,null)))):null,s?i.createElement(r.ua7,{placement:"top",content:l(w)},i.createElement(r.zxk,{nature:"secondary",type:"button",onClick:s,style:{border:"none",minWidth:"fit-content",padding:"10px"},role:"link",name:"hiddenAction","aria-label":l(w)},a||(a=i.createElement(r.XHJ,null)))):null);var o};var C=s(645810);const v=i.memo((({label:e,linkedWebsitesList:t,areItemsLocked:s,credentialId:n,isListEditable:a=!1,isEditing:l=!1,showUrlProtocol:u=!1,updateLinkedWebsitesList:h})=>{const{translate:m}=(0,d.Z)(),b=i.useRef(null),[g,_]=i.useState(!1),[w,f]=i.useState(t.length),[v,Z]=i.useState(t.map(((e,t)=>({linkedWebsite:e,id:t})))),x=e=>{_(!0);const t=w+1;Z([...v,{linkedWebsite:"",id:t}]),f(t),e?.preventDefault(),e?.stopPropagation()},k=e=>{const{name:t,value:s}=e.target,n=Number(t),a=v.findIndex((e=>e.id===n));if(-1!==a){const e=o().cloneDeep(v);e[a].linkedWebsite=s,Z(e)}},E=e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),x())};return i.useEffect((()=>{l&&x()}),[]),i.useEffect((()=>{w!==t.length&&b.current?.focus()}),[w]),i.useEffect((()=>{h?.(v.map((({linkedWebsite:e})=>e))),(e=>{e.every((e=>e.linkedWebsite))?_(!1):_(!0)})(v)}),[h,JSON.stringify(v)]),i.createElement("div",{className:C.Z.listContainer},i.createElement("div",{className:C.Z.label},s?i.createElement(r.UnL,{height:12,sx:{paddingTop:"3px"}}):null,e?` ${m(e)}`:null),i.createElement("div",{className:C.Z.addUrlContainer},a?i.createElement("div",{className:C.Z.linkedWebsitesList},v.map((({linkedWebsite:e,id:t})=>i.createElement("div",{className:C.Z.linkedWebsitesRow,key:t},i.createElement(c.Z,{placeholder:m("webapp_credential_linked_websites_new_website_placeholder"),ref:b,onChange:k,onFieldKeyDown:E,value:e,name:t.toString()}),i.createElement(y,{linkedWebsite:e,credentialId:n,onRemoveItem:()=>(e=>{Z(v.filter((t=>t.id!==e)))})(t)})))),i.createElement(p.E,{disabled:g,handleOnClickAddLinkedWebsiteButton:x})):i.createElement("div",{className:C.Z.linkedWebsitesList},v.map((({linkedWebsite:e,id:t})=>i.createElement("div",{className:C.Z.linkedWebsitesRow,key:t},i.createElement("div",{className:C.Z.linkedWebsitesLockedItem},u?e:(e=>{const t=e.match(/^(?:\w+:\/\/)?(.*)$/);return t&&t.length>=2?t[1]:e})(e)),i.createElement(y,{linkedWebsite:e,credentialId:n})))))))}))},355452:(e,t,s)=>{s.d(t,{Jh:()=>o,UE:()=>i,ZP:()=>r});var n=s(696832),a=s(526849);const i=(0,a.compose)(a.not,a.isEmpty,a.trim,(0,a.defaultTo)("")),l=/.+@.+\..+/,o=e=>l.test(e.trim());class r extends n.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:s}=this.props,n={...this.state.values,...e};this.setState({values:n},(()=>{t&&t(this.hasFormBeenEdited()),s&&s(n)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const s=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(s)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,a.reduce)(((t,s)=>(t[s]=e[s]?(0,a.compose)(a.not,e[s]):()=>!1,t)),{},Object.keys(this.state.values)),s=(0,a.evolve)(t,this.state.values);return this.setState({errors:s}),(0,a.all)((0,a.equals)(!1),(0,a.values)(s))},this.hasFormBeenEdited=()=>!(0,a.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,a.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},116551:(e,t,s)=>{function n(e,t){return{label:t,value:("credential"===e?"":"noCategory")||""}}function a(e,t,s){const a=t.map((e=>({label:e.name,value:e.id})));return[n(e,s)].concat(a)}function i(e,t,s,a){const i=t.find((e=>e.label===s));return null!=i?i:n(e,a)}function l(e,t,s,n){return i(e,a(e,s,n),t,n)}s.d(t,{Dx:()=>r,Ld:()=>i,hg:()=>o,pn:()=>l,rD:()=>a,rZ:()=>d});const o=["BLUE","GRAY","PURPLE","PINK","RED","BROWN","GREEN","ORANGE","YELLOW"];function r(e,t,s){return t.filter((t=>e[t])).map((t=>({icon:s,label:`${e[t]}`,value:t})))}function d(e,t){const s=r(e,[t],null);return s.length?s[0]:{}}},793429:(e,t,s)=>{s.d(t,{Z:()=>n});const n={container:"container--Qypu77vxOn",containerMultiLine:"containerMultiLine--ncWYFwQEnR",_field:"_field--KII5X4xmLN",input:"input--Iq10hxAz32 _field--KII5X4xmLN",inputRow:"inputRow--gdD_j5S1R8",textarea:"textarea--VpIWTZemV2 _field--KII5X4xmLN",label:"label--Ww_r49kt_J",text:"text--oXyCzpUMwG",value:"value--aD7nWEqBIq",multiline:"multiline--fdPM1KFHPT"}},161964:(e,t,s)=>{s.d(t,{Z:()=>n});const n={left:"left--jltGqC2ld6",right:"right--r4mXfTZRXo",select:"select--ivbO452zoA",disable:"disable--F2KcdR2ssV",label:"label--EhkwVb63v9"}},178948:(e,t,s)=>{s.d(t,{Z:()=>n});const n={icon:"icon--gEZfcCvjSg",dummyIcon:"dummyIcon--ix6eIwyFEN"}},645810:(e,t,s)=>{s.d(t,{Z:()=>n});const n={header:"header--GePOOHOBzn",backButton:"backButton--ApWZZ3esh6",listContainer:"listContainer--njknVVuG8n",label:"label--ERiGGqtKHY",linkedWebsitesList:"linkedWebsitesList--ZSuJnbXQxS",linkedWebsitesRow:"linkedWebsitesRow--WfdNXmrkL4",linkedWebsitesEditableItem:"linkedWebsitesEditableItem--Ns6V467EzV",linkedWebsitesLockedItem:"linkedWebsitesLockedItem--RYRFapL_Jw",addUrlContainer:"addUrlContainer--OJSLm0uPSs",linkedWebsitesDetails:"linkedWebsitesDetails--uaFRgv0zeT",addButton:"addButton--z1WN5Nny3_"}},63703:(e,t,s)=>{s.d(t,{Z:()=>n});const n={container:"container--BvfulnQcuP",containerBlock:"containerBlock--lIB_8rMAqf",horizontalContainerBlock:"horizontalContainerBlock--XzyL0HxXte",secondItem:"secondItem--YxYGi1WTY5"}}}]);