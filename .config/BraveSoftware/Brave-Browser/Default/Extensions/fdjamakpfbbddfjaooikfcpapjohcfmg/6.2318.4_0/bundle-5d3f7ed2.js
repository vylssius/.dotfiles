"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[1399],{651046:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(215904),o=r(549259),s=r(661222),i=r(92204);async function a(){const e=await async function(){const e=await(0,s.I)({}),t=(0,i.A)("");return e.filter((e=>"string"==typeof e.url&&e.url.startsWith(t))).filter((e=>""!==e.url))}();if(!e.length)return;const t=(0,n.a)(),r=e.map((e=>e.id)).filter((e=>"number"==typeof e&&e!==t));await(0,o.O)(r)}},666561:(e,t,r)=>{let n;r.d(t,{rq:()=>n}),function(e){e.Success="success",e.Loading="loading",e.Error="error"}(n||(n={})),n.Loading},635818:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(691478),t)},541342:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.permissionsApi=void 0;const n=r(468224),o=r(137392),s=r(635174);t.permissionsApi=(0,n.defineModuleApi)({name:"permissions",commands:{addGroupManager:o.AddGroupManager,removeGroupManager:o.RemoveGroupManager},events:{},queries:{userPermissions:s.UserPermissionsQuery}})},714054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddGroupManager=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.AddGroupManager=o},137392:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(714054),t),o(r(942763),t)},942763:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveGroupManager=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RemoveGroupManager=o},691478:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(541342),t),o(r(137392),t),o(r(635174),t),o(r(445073),t)},635174:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(71367),t)},71367:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserPermissionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.UserPermissionsQuery=o},445073:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionSchema=void 0;const n=r(910295);t.PermissionSchema=n.z.enum(["GROUP_CREATE","GROUP_DELETE","GROUP_EDIT","GROUP_READ"])},70430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryKeyApi=void 0;const n=r(468224),o=r(83550),s=r(188522);t.accountRecoveryKeyApi=(0,n.defineModuleApi)({name:"accountRecoveryKey",commands:{goToActivationNextStep:o.GoToActivationNextStepCommand,goToActivationPrevStep:o.GoToActivationPrevStepCommand,requestActivation:o.RequestActivationCommand,cancelActivation:o.CancelActivationCommand,cancelGeneration:o.CancelGenerationCommand,confirmActivation:o.ConfirmActivationCommand,deactivate:o.DeactivateCommand,goToRecoveryNextStep:o.GoToRecoveryNextStepCommand,goToRecoveryPrevStep:o.GoToRecoveryPrevStepCommand},queries:{activationFlowStatus:s.ActivationFlowStatusQuery,accountRecoveryKeyStatus:s.AccountRecoveryKeyStatusQuery,recoveryFlowStatus:s.RecoveryFlowStatusQuery,recoveryMethodsInfo:s.RecoveryMethodsInfoQuery},events:{}})},78589:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelActivationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CancelActivationCommand=o},720130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelGenerationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CancelGenerationCommand=o},958661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmActivationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ConfirmActivationCommand=o},789289:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeactivateCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DeactivateCommand=o},675006:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoToActivationNextStepCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.GoToActivationNextStepCommand=o},326927:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoToActivationPrevStepCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.GoToActivationPrevStepCommand=o},572133:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoToRecoveryNextStepCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.GoToRecoveryNextStepCommand=o},239621:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoToRecoveryPrevStepCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.GoToRecoveryPrevStepCommand=o},83550:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(675006),t),o(r(326927),t),o(r(239621),t),o(r(572133),t),o(r(131614),t),o(r(958661),t),o(r(78589),t),o(r(789289),t),o(r(720130),t)},131614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestActivationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RequestActivationCommand=o},408532:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(70430),t),o(r(83550),t),o(r(188522),t),o(r(516143),t)},730530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountRecoveryKeyStatusQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.AccountRecoveryKeyStatusQuery=o},376870:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationFlowStatusQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.ActivationFlowStatusQuery=o},188522:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(730530),t),o(r(376870),t),o(r(372334),t),o(r(924771),t)},924771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecoveryFlowStatusQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.RecoveryFlowStatusQuery=o},372334:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecoveryMethodsInfoQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.RecoveryMethodsInfoQuery=o},516143:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecoveryFlowViewStep=t.ActivationFlowViewStep=void 0,function(e){e[e.InitActivation=0]="InitActivation",e[e.DisplayKey=1]="DisplayKey",e[e.ConfirmKey=2]="ConfirmKey",e[e.ActivationDone=3]="ActivationDone",e[e.ShowError=4]="ShowError",e[e.GenerateNewKey=5]="GenerateNewKey",e[e.CancelGenerateNewKey=6]="CancelGenerateNewKey"}(t.ActivationFlowViewStep||(t.ActivationFlowViewStep={})),function(e){e[e.InitRecovery=0]="InitRecovery",e[e.TwoFactorAuthentication=1]="TwoFactorAuthentication",e[e.EnterRecoveryKey=2]="EnterRecoveryKey"}(t.RecoveryFlowViewStep||(t.RecoveryFlowViewStep={}))},331628:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(408532),t)},827331:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(146942),t)},38835:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.overridesApi=void 0;const n=r(468224),o=r(698329);t.overridesApi=(0,n.defineModuleApi)({name:"overrides",commands:{},events:{},queries:{OverridesQuery:o.OverridesQuery}})},146942:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(38835),t),o(r(698329),t),o(r(858321),t)},657848:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OverridesQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.OverridesQuery=o},698329:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(657848),t)},858321:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isOverridesFileFormat=void 0,t.isOverridesFileFormat=e=>null!=e&&"object"==typeof e&&Object.values(e).every((e=>Array.isArray(e)&&e.every((e=>(e=>{if(!e||"object"!=typeof e)return!1;const t="type"in e&&void 0!==e.type&&("startsWith"===e.type||"regexp"===e.type),r="value"in e&&void 0!==e.value&&(Array.isArray(e.value)&&e.value.every((e=>"string"==typeof e))||"string"==typeof e.value),n="conditions"in e&&void 0!==e.conditions&&Array.isArray(e.conditions)&&e.conditions.every((e=>(e=>{const t="type"in e&&void 0!==e.type&&("css"===e.type||"xpath"===e.type),r="selector"in e&&void 0!==e.selector&&"string"==typeof e.selector;return t&&r})(e))),o="actions"in e&&void 0!==e.actions&&Array.isArray(e.actions)&&e.actions.every((e=>(e=>{const t="type"in e&&void 0!==e.type&&("set"===e.type||"ignore"===e.type),r="cssSelector"in e&&void 0!==e.cssSelector&&"string"==typeof e.cssSelector;return t&&r})(e)));return t&&r&&n&&o})(e)))))},822829:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationFlowApi=void 0;const n=r(468224),o=r(123493),s=r(865433);t.authenticationFlowApi=(0,n.defineModuleApi)({name:"authenticationFlow",commands:{changeLogin:s.ChangeAccountEmailCommand,changeTwoFactorAuthenticationOtpType:s.ChangeTwoFactorAuthenticationOtpTypeCommand,clearError:s.ClearErrorCommand,resendEmailToken:s.ResendEmailTokenCommand,resendPushNotification:s.ResendPushNotificationCommand,sendAccountEmail:s.SendAccountEmailCommand,sendMasterPassword:s.SendMasterPasswordCommand,submitBackupCode:s.SubmitBackupCodeCommand,submitEmailToken:s.SubmitEmailTokenCommand,submitTotp:s.SubmitTotpCommand,switchToDashlaneAuthenticator:s.SwitchToDashlaneAuthenticatorCommand,switchToEmailToken:s.SwitchToEmailTokenCommand,retryWebAuthnAuthentication:s.RetryWebAuthnAuthenticationCommand,useMasterPassword:s.UseMasterPasswordCommand,webAuthnAuthenticationFail:s.WebAuthnAuthenticationFailCommand,logout:s.LogoutCommand,lockSession:s.LockCommand,loginViaSSO:s.LoginViaSSOCommand,initiateLoginWithSSO:s.InitiateLoginWithSSOCommand,initiateAutologinWithSSOCommand:s.InitiateAutologinWithSSOCommand},queries:{authenticationFlowStatus:o.AuthenticationFlowStatusQuery,getSsoInfoQuery:o.GetSsoInfoQuery},events:{}})},865433:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitiateAutologinWithSSOCommand=t.InitiateLoginWithSSOCommand=t.LoginViaSSOCommand=t.LockCommand=t.LogoutCommand=t.WebAuthnAuthenticationFailCommand=t.UseMasterPasswordCommand=t.RetryWebAuthnAuthenticationCommand=t.ClearErrorCommand=t.SwitchToEmailTokenCommand=t.ResendPushNotificationCommand=t.SendMasterPasswordCommand=t.ResendEmailTokenCommand=t.ChangeTwoFactorAuthenticationOtpTypeCommand=t.SubmitBackupCodeCommand=t.SubmitTotpCommand=t.SubmitEmailTokenCommand=t.SwitchToDashlaneAuthenticatorCommand=t.ChangeAccountEmailCommand=t.SendAccountEmailCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SendAccountEmailCommand=o;class s extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ChangeAccountEmailCommand=s;class i extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SwitchToDashlaneAuthenticatorCommand=i;class a extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SubmitEmailTokenCommand=a;class c extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SubmitTotpCommand=c;class u extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SubmitBackupCodeCommand=u;class d extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ChangeTwoFactorAuthenticationOtpTypeCommand=d;class l extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ResendEmailTokenCommand=l;class p extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SendMasterPasswordCommand=p;class f extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ResendPushNotificationCommand=f;class m extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SwitchToEmailTokenCommand=m;class h extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ClearErrorCommand=h;class y extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.RetryWebAuthnAuthenticationCommand=y;class v extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.UseMasterPasswordCommand=v;class b extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.WebAuthnAuthenticationFailCommand=b;class g extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LogoutCommand=g;class _ extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LockCommand=_;class O extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LoginViaSSOCommand=O;class C extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.InitiateLoginWithSSOCommand=C;class S extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.InitiateAutologinWithSSOCommand=S},123493:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetSsoInfoQuery=t.AuthenticationFlowStatusQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.AuthenticationFlowStatusQuery=o;class s extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.GetSsoInfoQuery=s},71329:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SSOMigrationType=t.SsoMigrationServerMethod=void 0,function(e){e.SSO="sso",e.MP="master_password"}(t.SsoMigrationServerMethod||(t.SsoMigrationServerMethod={})),function(e){e[e.MP_TO_SSO=0]="MP_TO_SSO",e[e.MP_TO_SSO_WITH_INFO=1]="MP_TO_SSO_WITH_INFO",e[e.SSO_TO_MP=2]="SSO_TO_MP"}(t.SSOMigrationType||(t.SSOMigrationType={}))},463674:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(822829),t),o(r(865433),t),o(r(123493),t),o(r(71329),t)},435105:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(463674),t)},80552:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillDataApi=void 0;const n=r(468224);t.autofillDataApi=(0,n.defineModuleApi)({name:"autofillData",commands:{},events:{},queries:{}})},634947:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(80552),t)},96709:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillTrackingApi=void 0;const n=r(468224),o=r(868006),s=r(715995);t.autofillTrackingApi=(0,n.defineModuleApi)({name:"autofillTracking",commands:{temporaryEmitPasswordAutofillPerformedEvent:s.TemporaryEmitPasswordAutofillPerformedEventCommand},events:{passwordAutofillPerformedEvent:o.PasswordAutofillPerformedEvent},queries:{}})},715995:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(131979),t)},131979:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryEmitPasswordAutofillPerformedEventCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TemporaryEmitPasswordAutofillPerformedEventCommand=o},868006:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(685707),t)},685707:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordAutofillPerformedEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.PasswordAutofillPerformedEvent=o},61211:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(96709),t),o(r(868006),t),o(r(715995),t)},562301:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayOfAutofillableDataModel=t.isAutofillableDataModel=t.CREDENTIAL_DATA_MODELS=t.FORM_DATA_MODELS=void 0,t.FORM_DATA_MODELS=["KWAddress","KWBankStatement","KWCompany","KWDriverLicence","KWEmail","KWFiscalStatement","KWIDCard","KWIdentity","KWMerchand","KWPassport","KWPaymentMean_creditCard","KWPaymentMean_paypal","KWPersonalWebsite","KWPhone","KWSecureNote","KWSecureNoteCategory","KWSocialSecurityStatement"],t.CREDENTIAL_DATA_MODELS=["KWAuthentifiant","KWGeneratedPassword","KWPasskey"];const r=[...t.FORM_DATA_MODELS,...t.CREDENTIAL_DATA_MODELS];t.isAutofillableDataModel=e=>!!e&&"string"==typeof e&&r.includes(e),t.isArrayOfAutofillableDataModel=e=>!!e&&"object"==typeof e&&Array.isArray(e)&&e.every(t.isAutofillableDataModel)},153354:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(200391),t),o(r(253644),t),o(r(719215),t),o(r(562301),t),o(r(286302),t)},286302:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDashlaneDisabledPermanently=t.isArrayOfUserAutofillCorrections=void 0,t.isArrayOfUserAutofillCorrections=e=>e instanceof Array&&!e.find((e=>{return!("object"==typeof(t=e)&&null!==t&&"id"in t&&"fieldIdentifier"in t&&"domain"in t);var t})),t.isDashlaneDisabledPermanently=e=>"none"===e.correctedDataSource},200391:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},253644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isVaultSourceType=t.isOtherSourceType=t.OtherSourceType=void 0;const n=r(719215);var o;!function(e){e.NewPassword="newPassword",e.SubmitButton="submitButton",e.WebauthnConditionalUI="WebauthnConditionalUI"}(o=t.OtherSourceType||(t.OtherSourceType={})),t.isOtherSourceType=e=>Object.values(o).includes(e),t.isVaultSourceType=e=>e in n.VaultSourceType},719215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultSourceType=void 0,function(e){e.Address="Address",e.BankAccount="BankAccount",e.Company="Company",e.Credential="Credential",e.CredentialCategory="CredentialCategory",e.DriverLicense="DriverLicense",e.Email="Email",e.FiscalId="FiscalId",e.GeneratedPassword="GeneratedPassword",e.IdCard="IdCard",e.Identity="Identity",e.NoteCategory="NoteCategory",e.Note="Note",e.Passport="Passport",e.Passkey="Passkey",e.PaymentCard="PaymentCard",e.PersonalWebsite="PersonalWebsite",e.Phone="Phone",e.SocialSecurityId="SocialSecurityId"}(t.VaultSourceType||(t.VaultSourceType={}))},124979:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(88709),t),o(r(153354),t),o(r(634947),t),o(r(61211),t),o(r(967822),t)},715481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillSecurityApi=void 0;const n=r(468224);t.autofillSecurityApi=(0,n.defineModuleApi)({name:"autofillSecurity",commands:{},events:{},queries:{}})},967822:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(715481),t)},37513:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillSettingsApi=void 0;const n=r(468224),o=r(61375),s=r(654345),i=r(311639),a=r(400034),c=r(450030);t.autofillSettingsApi=(0,n.defineModuleApi)({name:"autofillSettings",commands:{toggleDashlane:i.ToggleDashlaneCommand,enableAnalysis:c.EnableAnalysisCommand,enableAutofillOnForms:c.EnableAutofillOnFormsCommand,enableAutofillOnLogins:c.EnableAutofillOnLoginsCommand,enableFollowUpNotification:c.EnableFollowUpNotificationCommand,disableAnalysis:c.DisableAnalysisCommand,disableAutofillOnForms:c.DisableAutofillOnFormsCommand,disableAutofillOnLogins:c.DisableAutofillOnLoginsCommand,disableFollowUpNotification:c.DisableFollowUpNotificationCommand,addDisabledSourceTypes:s.AddDisabledSourceTypesCommand,removeDisabledSourceTypes:o.RemoveDisabledSourceTypesCommand,setUserAutofillCorrections:c.SetUserAutofillCorrectionsCommand},events:{},queries:{getAnalysisStatusOnUrl:a.GetAnalysisStatusOnUrlQuery,getAutofillSettings:a.GetAutofillSettingsQuery,getUserAutofillCorrections:a.GetUserAutofillCorrectionsQuery}})},654345:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddDisabledSourceTypesCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.AddDisabledSourceTypesCommand=o},455943:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableAnalysisCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableAnalysisCommand=o},622351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableAutofillOnFormsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableAutofillOnFormsCommand=o},971113:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableAutofillOnLoginsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableAutofillOnLoginsCommand=o},316037:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableFollowUpNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableFollowUpNotificationCommand=o},788735:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableAnalysisCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableAnalysisCommand=o},835332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableAutofillOnFormsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableAutofillOnFormsCommand=o},832956:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableAutofillOnLoginsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableAutofillOnLoginsCommand=o},368762:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableFollowUpNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableFollowUpNotificationCommand=o},450030:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(654345),t),o(r(455943),t),o(r(622351),t),o(r(971113),t),o(r(316037),t),o(r(788735),t),o(r(835332),t),o(r(832956),t),o(r(368762),t),o(r(61375),t),o(r(311639),t),o(r(564231),t)},61375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveDisabledSourceTypesCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RemoveDisabledSourceTypesCommand=o},564231:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SetUserAutofillCorrectionsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.SetUserAutofillCorrectionsCommand=o},311639:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleDashlaneCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ToggleDashlaneCommand=o},88709:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(37513),t),o(r(400034),t),o(r(450030),t)},967258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAnalysisStatusOnUrlQuery=t.AnalysisStatus=void 0;const n=r(468224);!function(e){e.ANALYSIS_ENABLED="ANALYSIS_ENABLED",e.ANALYSIS_DISABLED_BY_USER="ANALYSIS_DISABLED_BY_USER",e.ANALYSIS_DISABLED_BY_B2B_ADMIN="ANALYSIS_DISABLED_BY_B2B_ADMIN",e.ANALYSIS_DISABLED_BY_KILLSWITCH="ANALYSIS_DISABLED_BY_KILLSWITCH",e.ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT="ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT"}(t.AnalysisStatus||(t.AnalysisStatus={}));class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.GetAnalysisStatusOnUrlQuery=o},331270:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAutofillSettingsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetAutofillSettingsQuery=o},631027:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetUserAutofillCorrectionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetUserAutofillCorrectionsQuery=o},400034:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(967258),t),o(r(331270),t),o(r(631027),t)},482983:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e="World")=>`Hello ${e}!`},695031:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(0,s(r(482983)).default)(),o(r(477270),t)},111886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsApi=void 0;const n=r(468224),o=r(859212);t.notificationsApi=(0,n.defineModuleApi)({name:"notifications",commands:{},events:{},queries:{GetPlanPricingQuery:o.GetPlanPricingQuery}})},477270:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(111886),t),o(r(859212),t)},988160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetPlanPricingQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetPlanPricingQuery=o},859212:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(988160),t)},634246:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.antiphishingApi=void 0;const n=r(468224),o=r(128106),s=r(824150);t.antiphishingApi=(0,n.defineModuleApi)({name:"antiphishing",commands:{addAutoRedirectedDomain:s.AddAutoRedirectedDomainCommand},events:{},queries:{isAutoRedirectedDomain:o.IsAutoRedirectedDomainQuery}})},118756:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddAutoRedirectedDomainCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.AddAutoRedirectedDomainCommand=o},824150:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(118756),t)},752803:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(634246),t),o(r(128106),t),o(r(824150),t)},128106:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(546515),t)},546515:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsAutoRedirectedDomainQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.IsAutoRedirectedDomainQuery=o},747524:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.breachesApi=void 0;const n=r(468224),o=r(913516),s=r(607659);t.breachesApi=(0,n.defineModuleApi)({name:"breaches",commands:{dismissBreach:o.DismissBreachCommand,markBreachAsSeen:o.MarkBreachAsSeenCommand},events:{},queries:{breach:s.BreachQuery,unreadBreachesCount:s.UnreadBreachesCountQuery}})},812263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachLeakedDataType=t.BreachState=void 0,function(e){e.PENDING="PENDING",e.VIEWED="VIEWED",e.ACKNOWLEDGED="ACKNOWLEDGED"}(t.BreachState||(t.BreachState={})),function(e){e.Username="username",e.Password="password",e.Email="email",e.CreditCard="creditcard",e.Phone="phone",e.Address="address",e.SSN="ssn",e.IP="ip",e.Location="geolocation",e.PersonalInfo="personalinfo",e.SocialNetwork="social"}(t.BreachLeakedDataType||(t.BreachLeakedDataType={}))},181142:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DismissBreachCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DismissBreachCommand=o},913516:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(181142),t),o(r(507694),t)},507694:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarkBreachAsSeenCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.MarkBreachAsSeenCommand=o},198640:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(747524),t),o(r(913516),t),o(r(607659),t),o(r(812263),t)},12857:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.BreachQuery=o},607659:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(12857),t),o(r(225107),t)},225107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnreadBreachesCountQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.UnreadBreachesCountQuery=o},413658:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.emailMonitoringApi=void 0;const n=r(468224),o=r(961155),s=r(1677);t.emailMonitoringApi=(0,n.defineModuleApi)({name:"emailMonitoring",commands:{dismissOnboardingNotification:o.DismissOnboardingNotificationCommand,optinEmail:o.OptinEmailCommand,optoutEmail:o.OptoutEmailCommand},events:{},queries:{emailList:s.EmailsListQuery,onboardingNotificationState:s.OnboardingNotificationStateQuery,domainIcon:s.DomainIconQuery}})},977880:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DismissOnboardingNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DismissOnboardingNotificationCommand=o},961155:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(977880),t),o(r(923042),t),o(r(135881),t)},923042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptinEmailCommand=t.OptinGenericError=t.OptinTooManySubscriptionsError=t.OptinAlreadySubscribedError=t.OptinInvalidEmailError=t.OptinDataLeaksResultErrorCode=t.OptinDataLeaksResultOkCode=void 0;const n=r(468224),o=r(361475);var s;t.OptinDataLeaksResultOkCode="OK",function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.ALREADY_SUBSCRIBED="USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION",e.TOO_MANY_SUBSCRIPTIONS="USER_HAS_TOO_MANY_SUBSCRIPTIONS",e.GENERIC_ERROR="GENERIC_ERROR"}(s=t.OptinDataLeaksResultErrorCode||(t.OptinDataLeaksResultErrorCode={}));class i extends((0,o.FunctionalError)(s.INVALID_EMAIL,"")){}t.OptinInvalidEmailError=i;class a extends((0,o.FunctionalError)(s.ALREADY_SUBSCRIBED,"")){}t.OptinAlreadySubscribedError=a;class c extends((0,o.FunctionalError)(s.TOO_MANY_SUBSCRIPTIONS,"")){}t.OptinTooManySubscriptionsError=c;class u extends((0,o.FunctionalError)(s.GENERIC_ERROR,"")){}t.OptinGenericError=u;class d extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.OptinEmailCommand=d},135881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptoutEmailCommand=t.OptoutGenericError=t.OptoutNoSubscriptionError=t.OptoutInvalidEmailError=t.OptoutDataLeaksResultErrorCode=t.OptoutDataLeaksResultOkCode=void 0;const n=r(468224),o=r(361475);var s;t.OptoutDataLeaksResultOkCode="OK",function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.NO_SUBSCRIPTION="USER_HAS_NO_SUBSCRIPTION",e.GENERIC_ERROR="GENERIC_ERROR"}(s=t.OptoutDataLeaksResultErrorCode||(t.OptoutDataLeaksResultErrorCode={}));class i extends((0,o.FunctionalError)(s.INVALID_EMAIL,"")){}t.OptoutInvalidEmailError=i;class a extends((0,o.FunctionalError)(s.NO_SUBSCRIPTION,"")){}t.OptoutNoSubscriptionError=a;class c extends((0,o.FunctionalError)(s.GENERIC_ERROR,"")){}t.OptoutGenericError=c;class u extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.OptoutEmailCommand=u},347668:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconMapSchema=t.IconSchema=void 0;const n=r(910295),o=["crawled","xs","sm","sm@2x","md","md.tiff","xmd","xmd@2x","l","l@2x","xl","xl@2x","46x30","46x30@2x","50x33","50x33@2x","56x56","56x56@2x","118x98","118x98@2x","160x106","160x106@2x"],s=(n.z.enum(o),o.reduce(((e,t)=>e.setKey(t,n.z.string().optional().nullable())),n.z.object({})));t.IconSchema=n.z.object({backgroundColor:n.z.string(),mainColor:n.z.string(),urls:s}),t.IconMapSchema=n.z.map(n.z.string(),t.IconSchema)},336234:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDarkWebOnboardingState=t.DarkWebOnboardingState=void 0,function(e){e.UNKNOWN="UNKNOWN",e.SEEN="SEEN",e.NOT_SEEN="NOT_SEEN"}(t.DarkWebOnboardingState||(t.DarkWebOnboardingState={})),t.isDarkWebOnboardingState=function(e){return"UNKNOWN"===e||"SEEN"===e||"NOT_SEEN"===e}},295954:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(413658),t),o(r(961155),t),o(r(1677),t),o(r(336234),t),o(r(347668),t)},155117:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomainIconQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.DomainIconQuery=o},691293:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmailsListQuery=t.isDataLeaksEmailStatus=t.DataLeaksEmailStatus=void 0;const n=r(468224);!function(e){e.PENDING="pending",e.ACTIVE="active",e.DISABLED="disabled"}(t.DataLeaksEmailStatus||(t.DataLeaksEmailStatus={})),t.isDataLeaksEmailStatus=function(e){return"pending"===e||"active"===e||"disabled"===e};class o extends((0,n.defineQuery)()){}t.EmailsListQuery=o},1677:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(691293),t),o(r(366419),t),o(r(155117),t)},366419:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnboardingNotificationStateQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.OnboardingNotificationStateQuery=o},154539:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(295954),t),o(r(198640),t),o(r(245263),t),o(r(754121),t),o(r(752803),t),o(r(937933),t),o(r(403783),t)},65310:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.masterPasswordSecurityApi=void 0;const n=r(468224),o=r(266329),s=r(480664);t.masterPasswordSecurityApi=(0,n.defineModuleApi)({name:"masterPasswordSecurity",commands:{dismissMasterPasswordLeakedNotification:o.DismissMasterPasswordLeakedNotificationCommand,temporaryCheckMasterPassword:o.TemporaryCheckMasterPasswordCommand,temporaryResetMasterPasswordLeaked:o.TemporaryResetMasterPasswordLeakedCommand,temporaryCheckMasterPasswordWeak:o.TemporaryCheckMasterPasswordWeakCommand,temporaryResetMasterPasswordWeak:o.TemporaryResetMasterPasswordWeakCommand},events:{},queries:{isMasterPasswordLeaked:s.IsMasterPasswordLeakedQuery,isMasterPasswordWeak:s.IsMasterPasswordWeakQuery,isMasterPasswordLeakedNotificationDismissed:s.IsMasterPasswordLeakedNotificationDismissedQuery}})},453219:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DismissMasterPasswordLeakedNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DismissMasterPasswordLeakedNotificationCommand=o},266329:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(453219),t),o(r(527095),t),o(r(622635),t),o(r(927343),t),o(r(788192),t)},927343:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryCheckMasterPasswordWeakCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TemporaryCheckMasterPasswordWeakCommand=o},527095:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryCheckMasterPasswordCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TemporaryCheckMasterPasswordCommand=o},622635:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryResetMasterPasswordLeakedCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TemporaryResetMasterPasswordLeakedCommand=o},788192:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryResetMasterPasswordWeakCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TemporaryResetMasterPasswordWeakCommand=o},403783:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(65310),t),o(r(480664),t),o(r(266329),t)},480664:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44858),t),o(r(868082),t),o(r(557276),t)},868082:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsMasterPasswordLeakedNotificationDismissedQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.IsMasterPasswordLeakedNotificationDismissedQuery=o},44858:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsMasterPasswordLeakedQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.IsMasterPasswordLeakedQuery=o},557276:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsMasterPasswordWeakQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.IsMasterPasswordWeakQuery=o},39566:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.otpApi=void 0;const n=r(468224),o=r(181220);t.otpApi=(0,n.defineModuleApi)({name:"otp",commands:{},events:{},queries:{otpCode:o.OtpCodeQuery}})},937933:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(39566),t),o(r(181220),t)},181220:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(921522),t)},921522:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OtpCodeQuery=t.OtpCodeGenerationError=void 0;const n=r(468224),o=r(361475);class s extends((0,o.FunctionalError)("Cannot generate OTP code due to no OtpSecret or OtpUrl found","")){}t.OtpCodeGenerationError=s;class i extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.OtpCodeQuery=i},665341:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHealthApi=void 0;const n=r(468224),o=r(361798),s=r(303568),i=r(94486);t.passwordHealthApi=(0,n.defineModuleApi)({name:"passwordHealth",commands:{updateIsCredentialExcluded:o.UpdateIsCredentialExcludedCommand,recalculatePasswordHealth:o.RecalculatePasswordHealthCommand},events:{passwordHealthComputationFinished:s.PasswordHealthComputationFinishedEvent},queries:{credentialHealthData:i.CredentialHealthDataQuery,filterCredentials:i.FilterCredentialsQuery,score:i.ScoreQuery,compromisedCredentials:i.CompromisedCredentialsQuery,passwordHealthReport:i.PasswordHealthReportQuery}})},316441:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateIsCredentialExcludedCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateIsCredentialExcludedCommand=o},361798:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(316441),t),o(r(33276),t)},33276:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecalculatePasswordHealthCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RecalculatePasswordHealthCommand=o},303568:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(697189),t)},697189:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordHealthComputationFinishedEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.PasswordHealthComputationFinishedEvent=o},245263:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(665341),t),o(r(94486),t),o(r(361798),t),o(r(303568),t),o(r(250687),t)},250687:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CorruptionDataSeverity=t.CorruptionDataStrength=t.HealthFilter=t.RiskType=void 0,function(e){e.Weak="weak",e.Reused="reused",e.Compromised="compromised",e.Excluded="excluded"}(t.RiskType||(t.RiskType={})),function(e){e.All="all",e.Weak="weak",e.Reused="reused",e.Compromised="compromised",e.Excluded="excluded"}(t.HealthFilter||(t.HealthFilter={})),function(e){e.WEAK="weak",e.EXTREMELY_WEAK="extremely_weak"}(t.CorruptionDataStrength||(t.CorruptionDataStrength={})),function(e){e.COMMON="common",e.STRONG="strong"}(t.CorruptionDataSeverity||(t.CorruptionDataSeverity={}))},654929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompromisedCredentialsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.CompromisedCredentialsQuery=o},202479:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialHealthDataQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.CredentialHealthDataQuery=o},462683:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterCredentialsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.FilterCredentialsQuery=o},94486:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(202479),t),o(r(180750),t),o(r(462683),t),o(r(654929),t),o(r(551526),t)},551526:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordHealthReportQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.PasswordHealthReportQuery=o},180750:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.ScoreQuery=o},163811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportApi=void 0;const n=r(468224);t.vaultReportApi=(0,n.defineModuleApi)({name:"vaultReport",commands:{},events:{},queries:{}})},754121:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(163811),t)},714258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.auditLogsApi=void 0;const n=r(468224),o=r(112524);t.auditLogsApi=(0,n.defineModuleApi)({name:"auditLogs",commands:{storeAuditLogs:o.StoreAuditLogsCommand},events:{},queries:{}})},717033:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(112524),t)},112524:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoreAuditLogsCommand=t.StoreAuditLogsInvalidLogsError=void 0;const n=r(468224);!function(e){e.AUDIT_LOG_MISSING_JSON_SCHEMA="AUDIT_LOG_MISSING_JSON_SCHEMA",e.AUDIT_LOG_INVALID_JSON_FOR_JSON_SCHEMA="AUDIT_LOG_INVALID_JSON_FOR_JSON_SCHEMA",e.AUDIT_LOG_INVALID_LOG_SCHEMA_TYPE_OR_VERSION="AUDIT_LOG_INVALID_LOG_SCHEMA_TYPE_OR_VERSION",e.AUDIT_LOG_ERROR_READING_JSON_SCHEMA="AUDIT_LOG_ERROR_READING_JSON_SCHEMA",e.STORING_SENSITIVE_AUDIT_LOGS_NOT_ALLOWED="STORING_SENSITIVE_AUDIT_LOGS_NOT_ALLOWED"}(t.StoreAuditLogsInvalidLogsError||(t.StoreAuditLogsInvalidLogsError={}));class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.StoreAuditLogsCommand=o},761899:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(714258),t),o(r(717033),t),o(r(975711),t)},20676:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},728279:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuditLogCategory=t.AuditLogType=void 0,function(e){e.UserInvited="user_invited",e.UserReinvited="user_reinvited",e.UserRemoved="user_removed",e.TeamCaptainAdded="team_captain_added",e.TeamCaptainRemoved="team_captain_removed",e.GroupManagerAdded="group_manager_added",e.GroupManagerRemoved="group_manager_removed",e.MasterPasswordResetAccepted="master_password_reset_accepted",e.MasterPasswordResetRefused="master_password_reset_refused",e.BillingAdminAdded="billing_admin_added",e.BillingAdminRemoved="billing_admin_removed",e.UserGroupCreated="user_group_created",e.UserGroupRenamed="user_group_renamed",e.UserGroupDeleted="user_group_deleted",e.UserJoinedUserGroup="user_joined_user_group",e.UserLeftUserGroup="user_left_user_group",e.UserInvitedToUserGroup="user_invited_to_user_group",e.UserDeclinedInviteToUserGroup="user_declined_invite_to_user_group",e.UserRemovedFromUserGroup="user_removed_from_user_group",e.DomainRequested="domain_requested",e.DomainValidated="domain_validated",e.SensitiveLogsEnabled="collect_sensitive_data_audit_logs_enabled",e.SensitiveLogsDisabled="collect_sensitive_data_audit_logs_disabled",e.SsoIdpMetadataSet="sso_idp_metadata_set",e.SsoServiceProviderUrlSet="sso_service_provider_url_set",e.SsoEnabled="sso_enabled",e.SsoDisabled="sso_disabled",e.TeamNameChanged="team_name_changed",e.NewBillingPeriodCreated="new_billing_period_created",e.SeatsAdded="seats_added",e.ContactEmailChanged="contact_email_changed",e.MasterPasswordMobileResetEnabled="master_password_mobile_reset_enabled",e.MasterPasswordMobileResetDisabled="master_password_mobile_reset_disabled",e.MasterPasswordMobileReset="master_password_mobile_reset",e.MasterPasswordChanged="master_password_changed",e.MpToViewPasswordsEnabled="mp_to_view_passwords_enabled",e.MpToViewPasswordsDisabled="mp_to_view_passwords_disabled",e.TwoFactorAuthenticationLoginMethodAdded="two_factor_authentication_login_method_added",e.TwoFactorAuthenticationLoginMethodRemoved="two_factor_authentication_login_method_removed",e.BiometricSignInDisabled="biometric_sign_in_disabled",e.DWMEmailAdded="dwm_email_added",e.DWMEmailRemoved="dwm_email_removed",e.DWMAlertReceived="dwm_alert_received",e.UserDeviceAdded="user_device_added",e.UserDeviceRemoved="user_device_removed",e.UserDeviceLogin="user_device_login",e.MasterPasswordReset="master_password_reset",e.RequestedAccountRecovery="requested_account_recovery",e.CompletedAccountRecovery="completed_account_recovery",e.UserSharedCredentialWithGroup="user_shared_credential_with_group",e.UserSharedCredentialWithEmail="user_shared_credential_with_email",e.UserSharedCredentialWithExternal="user_shared_credential_with_external",e.UserSharedSecureNoteWithGroup="user_shared_secure_note_with_group",e.UserSharedSecureNoteWithEmail="user_shared_secure_note_with_email",e.UserSharedSecureNoteWithExternal="user_shared_secure_note_with_external",e.UserRevokedSharedCredentialGroup="user_revoked_shared_credential_group",e.UserRevokedSharedCredentialEmail="user_revoked_shared_credential_email",e.UserRevokedSharedCredentialExternal="user_revoked_shared_credential_external",e.UserRevokedSharedSecureNoteGroup="user_revoked_shared_secure_note_group",e.UserRevokedSharedSecureNoteEmail="user_revoked_shared_secure_note_email",e.UserRevokedSharedSecureNoteExternal="user_revoked_shared_secure_note_external",e.UserAcceptedSharingInviteSecureNote="user_accepted_sharing_invite_secure_note",e.UserRejectedSharingInviteSecureNote="user_rejected_sharing_invite_secure_note",e.UserAcceptedSharingInviteCredential="user_accepted_sharing_invite_credential",e.UserRejectedSharingInviteCredential="user_rejected_sharing_invite_credential",e.UserCreatedCredential="user_created_credential",e.UserModifiedCredential="user_modified_credential",e.UserDeletedCredential="user_deleted_credential",e.UserImportedCredentials="user_imported_credentials",e.UserCreatedSecureNote="user_created_secure_note",e.UserModifiedSecureNote="user_modified_secure_note",e.UserDeletedSecureNote="user_deleted_secure_note"}(t.AuditLogType||(t.AuditLogType={})),function(e){e.Account="account",e.Authentication="authentication",e.DarkWebMonitoring="dark_web_monitoring",e.Groups="groups",e.ImportExport="import_export",e.TeamSettings="team_settings",e.TeamSettingsActiveDirectory="team_settings_activedirectory",e.TeamSettingsPolicies="team_settings_policies",e.TeamSettingsSAMLProvisioning="team_settings_samlprovisioning",e.TeamSettingsSCIM="team_settings_scim",e.TeamSettingsSSO="team_settings_sso",e.Sharing="sharing",e.UserSettings="user_settings",e.UserSettingsAccountRecovery="user_settings_accountrecovery",e.Users="users",e.VaultIDs="vault_ids",e.VaultPasswords="vault_passwords",e.VaultPayments="vault_payments",e.VaultPersonalInfo="vault_personalinfo",e.VaultSecureNotes="vault_securenotes"}(t.AuditLogCategory||(t.AuditLogCategory={}))},8132:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},535484:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},295312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},169767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},975711:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(728279),t),o(r(20676),t),o(r(8132),t),o(r(295312),t),o(r(169767),t),o(r(317098),t),o(r(45665),t),o(r(145491),t),o(r(37564),t),o(r(266767),t),o(r(535484),t)},317098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},45665:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},145491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},37564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},266767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},750990:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(761899),t)},26938:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(799314),t)},362884:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sessionApi=void 0;const n=r(468224),o=r(649741),s=r(211938);t.sessionApi=(0,n.defineModuleApi)({name:"session",commands:{FlushLocalDataCommand:o.FlushLocalDataCommand,PrepareLocalDataFlushCommand:s.PrepareLocalDataFlushCommand},queries:{},events:{}})},649741:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FlushLocalDataCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.FlushLocalDataCommand=o},925885:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(649741),t),o(r(211938),t)},211938:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrepareLocalDataFlushCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.PrepareLocalDataFlushCommand=o},854148:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(608323),t)},608323:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.SampleEvent=o},799314:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(362884),t),o(r(925885),t),o(r(854148),t),o(r(278049),t)},278049:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(283062),t)},283062:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SampleQuery=o},643838:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(775696),t),o(r(920985),t),o(r(981831),t)},675676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCollectionsApi=void 0;const n=r(468224),o=r(432841),s=r(540177);t.sharingCollectionsApi=(0,n.defineModuleApi)({name:"sharingCollections",commands:{createSharedCollection:o.CreateSharedCollectionCommand},events:{},queries:{getSharedCollections:s.GetSharedCollectionsQuery}})},432841:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateSharedCollectionCommand=t.getCreateSharedCollectionFunctionalError=t.CreateSharedCollectionUserMustSpecifyKeyError=t.CreateSharedCollectionSharingDisabledError=t.CreateSharedCollectionNonExistingGroupError=t.CreateSharedCollectionNonUserProposeSigError=t.CreateSharedCollectionNotAMemberError=t.CreateSharedCollectionExistsError=t.CreateSharedCollectionMissingAuthorError=t.CreateSharedCollectionAuthorNotAdminError=t.CreateSharedCollectionNoAuthorAcceptSigError=t.CreateSharedCollectionNoGroupAcceptSigError=t.CreateSharedCollectionInvalidPlatformError=t.CreateSharedCollectionCommandErrorCode=void 0;const n=r(468224),o=r(361475);var s;!function(e){e.INVALID_PLATFORM="INVALID_PLATFORM",e.NO_USER_GROUP_ACCEPT_SIGNATURE="NO_USER_GROUP_ACCEPT_SIGNATURE",e.AUTHOR_ACCEPT_SIGNATURE_IS_MISSING="AUTHOR_ACCEPT_SIGNATURE_IS_MISSING",e.AUTHOR_MUST_BE_ADMIN="AUTHOR_MUST_BE_ADMIN",e.AUTHOR_IS_MISSING="AUTHOR_IS_MISSING",e.COLLECTION_ALREADY_EXISTS="COLLECTION_ALREADY_EXISTS",e.NOT_A_MEMBER_CANNOT_SHARE_WITH_USER_GROUP="NOT_A_MEMBER_CANNOT_SHARE_WITH_USER_GROUP",e.NON_EXISTING_USER_MUST_SPECIFY_PROPOSE_SIGNATURE_USING_ALIAS="NON_EXISTING_USER_MUST_SPECIFY_PROPOSE_SIGNATURE_USING_ALIAS",e.PROVIDED_USERGROUP_ID_DOES_NOT_EXIST="PROVIDED_USERGROUP_ID_DOES_NOT_EXIST",e.SHARING_DISABLED_BY_TEAM="SHARING_DISABLED_BY_TEAM",e.EXISTING_USER_MUST_SPECIFY_COLLECTION_KEY="EXISTING_USER_MUST_SPECIFY_COLLECTION_KEY"}(s=t.CreateSharedCollectionCommandErrorCode||(t.CreateSharedCollectionCommandErrorCode={}));class i extends((0,o.FunctionalError)(s.INVALID_PLATFORM,"Invalid platform")){}t.CreateSharedCollectionInvalidPlatformError=i;class a extends((0,o.FunctionalError)(s.NO_USER_GROUP_ACCEPT_SIGNATURE,"User group was missing accept signature")){}t.CreateSharedCollectionNoGroupAcceptSigError=a;class c extends((0,o.FunctionalError)(s.AUTHOR_ACCEPT_SIGNATURE_IS_MISSING,"The collection author did not have an accept signature")){}t.CreateSharedCollectionNoAuthorAcceptSigError=c;class u extends((0,o.FunctionalError)(s.AUTHOR_MUST_BE_ADMIN,"The collection author was not an admin")){}t.CreateSharedCollectionAuthorNotAdminError=u;class d extends((0,o.FunctionalError)(s.AUTHOR_IS_MISSING,"The collection author information unavailable")){}t.CreateSharedCollectionMissingAuthorError=d;class l extends((0,o.FunctionalError)(s.COLLECTION_ALREADY_EXISTS,"This collection already exists")){}t.CreateSharedCollectionExistsError=l;class p extends((0,o.FunctionalError)(s.NOT_A_MEMBER_CANNOT_SHARE_WITH_USER_GROUP,"Users cannot share with user groups that they are not a member of")){}t.CreateSharedCollectionNotAMemberError=p;class f extends((0,o.FunctionalError)(s.NON_EXISTING_USER_MUST_SPECIFY_PROPOSE_SIGNATURE_USING_ALIAS,"Non existing users must use alias for propose signature")){}t.CreateSharedCollectionNonUserProposeSigError=f;class m extends((0,o.FunctionalError)(s.PROVIDED_USERGROUP_ID_DOES_NOT_EXIST,"No user group exists with an ID provided to this collection")){}t.CreateSharedCollectionNonExistingGroupError=m;class h extends((0,o.FunctionalError)(s.SHARING_DISABLED_BY_TEAM,"Cannot share a collection while sharing is disabled")){}t.CreateSharedCollectionSharingDisabledError=h;class y extends((0,o.FunctionalError)(s.EXISTING_USER_MUST_SPECIFY_COLLECTION_KEY,"Existing user must specify collection key")){}t.CreateSharedCollectionUserMustSpecifyKeyError=y,t.getCreateSharedCollectionFunctionalError=function(e){switch(e){case"INVALID_PLATFORM":return new i;case"NO_USER_GROUP_ACCEPT_SIGNATURE":return new a;case"AUTHOR_ACCEPT_SIGNATURE_IS_MISSING":return new c;case"AUTHOR_MUST_BE_ADMIN":return new u;case"AUTHOR_IS_MISSING":return new d;case"COLLECTION_ALREADY_EXISTS":return new l;case"NOT_A_MEMBER_CANNOT_SHARE_WITH_USER_GROUP":return new p;case"NON_EXISTING_USER_MUST_SPECIFY_PROPOSE_SIGNATURE_USING_ALIAS":return new f;case"PROVIDED_USERGROUP_ID_DOES_NOT_EXIST":return new m;case"SHARING_DISABLED_BY_TEAM":return new h;case"EXISTING_USER_MUST_SPECIFY_COLLECTION_KEY":return new y;default:throw new Error("Unknown server error")}};class v extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CreateSharedCollectionCommand=v},259769:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(432841),t)},981831:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(675676),t),o(r(540177),t),o(r(259769),t)},60915:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetSharedCollectionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetSharedCollectionsQuery=o},540177:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(60915),t)},230438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingInvitesApi=void 0;const n=r(468224),o=r(55498),s=r(278044);t.sharingInvitesApi=(0,n.defineModuleApi)({name:"sharingInvites",commands:{RefuseItemGroupInviteCommand:o.RefuseItemGroupInviteCommand,RefuseUserGroupInviteCommand:o.RefuseUserGroupInviteCommand},events:{},queries:{GetInvitesQuery:s.GetInvitesQuery}})},55498:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(389494),t),o(r(842166),t)},389494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefuseItemGroupInviteCommand=t.getRefuseItemGroupInviteFunctionalError=t.RefuseItemGroupInviteUserIsNotInPendingStatusError=t.RefuseItemGroupInviteNotEnoughAdminsError=t.RefuseItemGroupInviteInvalidItemGroupRevisionError=t.RefuseItemGroupInviteUserGroupIsNotInItemGroupError=t.RefuseItemGroupInviteUserIsNotInItemGroupError=t.RefuseItemGroupInviteGroupHasInvalidStatusError=t.RefuseItemGroupInviteAuthorHasInvalidStatusError=t.RefuseItemGroupInviteNotFoundError=t.RefuseItemGroupInviteResultErrorCode=void 0;const n=r(468224),o=r(361475);var s;!function(e){e.ItemGroupNotFound="ItemGroupNotFound",e.AuthorHasInvalidStatus="AuthorHasInvalidStatus",e.GroupHasInvalidStatus="GroupHasInvalidStatus",e.UserIsNotInItemGroup="UserIsNotInItemGroup",e.UserGroupIsNotInItemGroup="UserGroupIsNotInItemGroup",e.InvalidItemGroupRevision="InvalidItemGroupRevision",e.NotEnoughAdmins="NotEnoughAdmins",e.UserIsNotInPendingStatus="UserIsNotInPendingStatus"}(s=t.RefuseItemGroupInviteResultErrorCode||(t.RefuseItemGroupInviteResultErrorCode={}));class i extends((0,o.FunctionalError)(s.ItemGroupNotFound,"Item Group not found")){}t.RefuseItemGroupInviteNotFoundError=i;class a extends((0,o.FunctionalError)(s.AuthorHasInvalidStatus,"User is not in accepted/pending status (already refused or revoked)")){}t.RefuseItemGroupInviteAuthorHasInvalidStatusError=a;class c extends((0,o.FunctionalError)(s.GroupHasInvalidStatus,"UserGroup is not in accepted/pending status (already refused or revoked)")){}t.RefuseItemGroupInviteGroupHasInvalidStatusError=c;class u extends((0,o.FunctionalError)(s.UserIsNotInItemGroup,"User is not part of item group")){}t.RefuseItemGroupInviteUserIsNotInItemGroupError=u;class d extends((0,o.FunctionalError)(s.UserGroupIsNotInItemGroup,"User group is not part of item group")){}t.RefuseItemGroupInviteUserGroupIsNotInItemGroupError=d;class l extends((0,o.FunctionalError)(s.InvalidItemGroupRevision,"Item group revision is not valid")){}t.RefuseItemGroupInviteInvalidItemGroupRevisionError=l;class p extends((0,o.FunctionalError)(s.NotEnoughAdmins,"The operation would let the item group with no admin")){}t.RefuseItemGroupInviteNotEnoughAdminsError=p;class f extends((0,o.FunctionalError)(s.UserIsNotInPendingStatus,'User is not in "pending" status or not part of a group')){}t.RefuseItemGroupInviteUserIsNotInPendingStatusError=f,t.getRefuseItemGroupInviteFunctionalError=function(e){switch(e){case"AUTHOR_HAS_INVALID_STATUS":return new a;case"GROUP_HAS_INVALID_STATUS":return new c;case"USER_IS_NOT_IN_ITEM_GROUP":return new u;case"USER_GROUP_IS_NOT_IN_ITEM_GROUP":return new d;case"INVALID_ITEM_GROUP_REVISION":return new l;case"NOT_ENOUGH_ADMINS":return new p;case"USER_IS_NOT_IN_PENDING_STATUS":return new f;default:throw new Error("Unknown server error")}};class m extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RefuseItemGroupInviteCommand=m},842166:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefuseUserGroupInviteCommand=t.getRefuseUserGroupInviteFunctionalError=t.RefuseUserGroupInviteAuthorHasInvalidStatusError=t.RefuseUserGroupInviteGroupHasInvalidStatusError=t.RefuseUserGroupInviteUserIsNotInPendingStatusError=t.RefuseUserGroupInviteUserIsNotInUserGroupError=t.RefuseUserGroupInviteInsufficientPrivilegesError=t.RefuseUserGroupInviteUserGroupUpdateConflictError=t.RefuseUserGroupInviteInvalidItemGroupRevisionError=t.RefuseUserGroupInviteUserGroupIsNotFoundError=t.RefuseUserGroupInviteInvalidTeamIdError=t.RefuseUserGroupInviteNotFoundError=t.RefuseUserGroupInviteResultErrorCode=void 0;const n=r(468224),o=r(361475);var s;!function(e){e.UserGroupNotFound="UserGroupNotFound",e.InvalidTeamId="InvalidTeamId",e.UserGroupIsNotFound="UserGroupIsNotFound",e.InvalidItemGroupRevision="InvalidItemGroupRevision",e.UserGroupUpdateConflict="UserGroupUpdateConflict",e.InsufficientPrivileges="InsufficientPrivileges",e.UserIsNotInUserGroup="UserIsNotInUserGroup",e.UserIsNotInPendingStatus="UserIsNotInPendingStatus",e.GroupHasInvalidStatus="GroupHasInvalidStatus",e.AuthorHasInvalidStatus="AuthorHasInvalidStatus"}(s=t.RefuseUserGroupInviteResultErrorCode||(t.RefuseUserGroupInviteResultErrorCode={}));class i extends((0,o.FunctionalError)(s.UserGroupNotFound,"User Group not found")){}t.RefuseUserGroupInviteNotFoundError=i;class a extends((0,o.FunctionalError)(s.InvalidTeamId,"Provided Team ID is not a number")){}t.RefuseUserGroupInviteInvalidTeamIdError=a;class c extends((0,o.FunctionalError)(s.UserGroupIsNotFound,"User group for provided ID does not exist")){}t.RefuseUserGroupInviteUserGroupIsNotFoundError=c;class u extends((0,o.FunctionalError)(s.InvalidItemGroupRevision,"User group revision is not valid")){}t.RefuseUserGroupInviteInvalidItemGroupRevisionError=u;class d extends((0,o.FunctionalError)(s.UserGroupUpdateConflict,"Conflict between users attempting to update the same user group")){}t.RefuseUserGroupInviteUserGroupUpdateConflictError=d;class l extends((0,o.FunctionalError)(s.InsufficientPrivileges,"The user does not have User Group permission to refuse the invitation")){}t.RefuseUserGroupInviteInsufficientPrivilegesError=l;class p extends((0,o.FunctionalError)(s.UserIsNotInUserGroup,"User is not part of a group")){}t.RefuseUserGroupInviteUserIsNotInUserGroupError=p;class f extends((0,o.FunctionalError)(s.UserIsNotInPendingStatus,'User is not in "pending" status or not part of a group')){}t.RefuseUserGroupInviteUserIsNotInPendingStatusError=f;class m extends((0,o.FunctionalError)(s.GroupHasInvalidStatus,'UserGroup is not in "accepted" or "pending" status (already refused or revoked)')){}t.RefuseUserGroupInviteGroupHasInvalidStatusError=m;class h extends((0,o.FunctionalError)(s.AuthorHasInvalidStatus,"User is not in accepted/pending status (already refused or revoked)")){}t.RefuseUserGroupInviteAuthorHasInvalidStatusError=h,t.getRefuseUserGroupInviteFunctionalError=function(e){switch(e){case"INVALID_TEAM_ID":return new a;case"USER_GROUP_IS_NOT_FOUND":return new c;case"INVALID_USER_GROUP_REVISION":return new u;case"USER_GROUP_UPDATE_CONFLICT":return new d;case"INSUFFICIENT_PRIVILEGES":return new l;case"USER_IS_NOT_IN_USER_GROUP":return new p;case"USER_IS_NOT_IN_PENDING_STATUS":return new f;case"GROUP_HAS_INVALID_STATUS":return new m;case"AUTHOR_HAS_INVALID_STATUS":return new h;default:throw new Error("Unknown server error")}};class y extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RefuseUserGroupInviteCommand=y},920985:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(230438),t),o(r(55498),t),o(r(278044),t)},634173:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetInvitesQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetInvitesQuery=o},278044:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(634173),t)},476293:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingItemsApi=void 0;const n=r(468224),o=r(861735);t.sharingItemsApi=(0,n.defineModuleApi)({name:"sharingItems",commands:{},events:{},queries:{sharingEnabled:o.SharingEnabledQuery}})},775696:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(476293),t),o(r(861735),t)},861735:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(296732),t)},296732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SharingEnabledQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SharingEnabledQuery=o},275324:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enclaveSdkApi=void 0;const n=r(468224),o=r(211180),s=r(236314);t.enclaveSdkApi=(0,n.defineModuleApi)({name:"enclaveSdkApi",commands:{CheckDNSValidationCommand:o.CheckDNSValidationCommand,ClearSettingsCommand:o.ClearSettingsCommand,CreateTeamCommand:o.CreateTeamCommand,DeleteDomainCommand:o.DeleteDomainCommand,EnableSsoCommand:o.EnableSsoCommand,InitSsoProvisioningCommand:o.InitSsoProvisioningCommand,LoginUserWithEnclaveSSOCommand:o.LoginUserWithEnclaveSSOCommand,ProvisionDomainCommand:o.ProvisionDomainCommand,TestLoginUserWithEnclaveSSOCommand:o.TestLoginUserWithEnclaveSSOCommand,UpdateMetadataCommand:o.UpdateMetadataCommand,ValidateMetadataCommand:o.ValidateMetadataCommand},events:{},queries:{SsoProvisioningQuery:s.SsoProvisioningQuery}})},632440:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckDNSValidationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CheckDNSValidationCommand=o},729332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClearSettingsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ClearSettingsCommand=o},295160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateTeamCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CreateTeamCommand=o},466113:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDomainCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DeleteDomainCommand=o},832346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableSsoCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableSsoCommand=o},211180:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(632440),t),o(r(295160),t),o(r(296699),t),o(r(834252),t),o(r(881815),t),o(r(466113),t),o(r(179526),t),o(r(429463),t),o(r(591172),t),o(r(832346),t),o(r(729332),t)},179526:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitSsoProvisioningCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.InitSsoProvisioningCommand=o},296699:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginUserWithEnclaveSSOCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LoginUserWithEnclaveSSOCommand=o},834252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProvisionDomainCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ProvisionDomainCommand=o},881815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestLoginUserWithEnclaveSSOCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TestLoginUserWithEnclaveSSOCommand=o},429463:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateMetadataCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateMetadataCommand=o},591172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateMetadataCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ValidateMetadataCommand=o},568057:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(275324),t),o(r(211180),t),o(r(236314),t),o(r(173587),t)},236314:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(753226),t)},753226:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SsoProvisioningQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SsoProvisioningQuery=o},173587:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SsoProvisioning=t.InferredSsoState=t.Domain=t.DomainPendingReason=t.DomainVerificationStatus=void 0;const n=r(910295);t.DomainVerificationStatus=n.z.enum(["valid","pending","expired","invalid"]),t.DomainPendingReason=n.z.enum(["tokenNotFound","invalidToken"]),t.Domain=n.z.object({domainName:n.z.string(),status:t.DomainVerificationStatus.nullable(),verificationToken:n.z.string(),lastCheckDateUnix:n.z.number(),pendingReason:t.DomainPendingReason.nullable()}),t.InferredSsoState=n.z.enum(["NitroComplete","NitroIncomplete","SelfHostedComplete","SelfHostedIncomplete","SsoConnectorIncomplete","SsoConnectorComplete","None","Unknown"]),t.SsoProvisioning=n.z.object({global:n.z.object({adminProvisioningKey:n.z.string().nullable(),isTeamProvisionedInNitro:n.z.boolean().nullable(),inferredSsoState:t.InferredSsoState,teamUuid:n.z.string().nullable(),ssoCapable:n.z.boolean().nullable()}),idpApplication:n.z.object({entityId:n.z.string().nullable(),acsUrl:n.z.string().nullable(),signOnUrl:n.z.string().nullable()}),idpMetadata:n.z.object({metadataValue:n.z.string().nullable()}),domainSetup:n.z.array(n.z.object({domainName:n.z.string().url(),verificationStatus:t.DomainVerificationStatus})),domainVerificationInfo:n.z.record(n.z.string().url(),n.z.object({subdomainValue:n.z.string().nullable(),txtValue:n.z.string().nullable(),verificationStatus:t.DomainVerificationStatus.nullable(),tokenFound:n.z.string().nullable(),pendingReason:t.DomainPendingReason.nullable()})),enableSSO:n.z.object({ssoEnabled:n.z.boolean().nullable()})})},785669:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(568057),t)},971664:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(341228),t),o(r(155775),t),o(r(285155),t),o(r(976045),t)},341228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncApi=void 0;const n=r(468224),o=r(155775),s=r(285155);t.syncApi=(0,n.defineModuleApi)({name:"sync",commands:{SyncCommand:o.SyncCommand},queries:{SyncProgressQuery:s.SyncProgressQuery},events:{}})},155775:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SyncCommand=o},285155:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncProgressQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.SyncProgressQuery=o},976045:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStatuses=void 0,function(e){e.READY="ready",e.IN_PROGRESS="in_progress",e.SUCCESS="success",e.FAILURE="failure"}(t.SyncStatuses||(t.SyncStatuses={}))},702639:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(953784),t)},818232:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamMembersApi=void 0;const n=r(468224),o=r(828539);t.teamMembersApi=(0,n.defineModuleApi)({name:"teamMembers",commands:{ProposeMembersCommand:o.ProposeMembersCommand},events:{},queries:{}})},828539:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(746316),t)},746316:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProposeMembersCommand=t.getProposeMembersFunctionalError=t.ProposeMembersCannotAddSeatDuringGracePeriod=t.ProposeMembersNotBillingAdmin=t.ProposeMembersPaymentFailed=t.ProposeMembersUserTeamInviteTokenNotFound=t.ProposeMembersNoFreeSloFreePlan=t.ProposeMembersNoFreeSlot=t.ProposeMembersInvalidOriginError=t.ProposeMembersErrorType=void 0;const n=r(468224),o=r(361475);var s;!function(e){e.InvalidOrigin="InvalidOrigin",e.NoFreeSlot="NoFreeSlot",e.NoFreeSlotFreePlan="NoFreeSlotFreePlan",e.UserTeamInviteTokenNotFound="UserTeamInviteTokenNotFound",e.PaymentFailed="PaymentFailed",e.NotBillingAdmin="NotBillingAdmin",e.CannotAddSeatDuringGracePeriod="CannotAddSeatDuringGracePeriod"}(s=t.ProposeMembersErrorType||(t.ProposeMembersErrorType={}));class i extends((0,o.FunctionalError)(s.InvalidOrigin,"Invalid origin")){}t.ProposeMembersInvalidOriginError=i;class a extends((0,o.FunctionalError)(s.NoFreeSlot,"No free slot")){}t.ProposeMembersNoFreeSlot=a;class c extends((0,o.FunctionalError)(s.NoFreeSlotFreePlan,"No free slot in free plan")){}t.ProposeMembersNoFreeSloFreePlan=c;class u extends((0,o.FunctionalError)(s.UserTeamInviteTokenNotFound,"No invite token to a team available for user")){}t.ProposeMembersUserTeamInviteTokenNotFound=u;class d extends((0,o.FunctionalError)(s.PaymentFailed,"Payment failed")){}t.ProposeMembersPaymentFailed=d;class l extends((0,o.FunctionalError)(s.NotBillingAdmin,"User is not the billing admin")){}t.ProposeMembersNotBillingAdmin=l;class p extends((0,o.FunctionalError)(s.CannotAddSeatDuringGracePeriod,"Seats cannot be added during grace period")){}t.ProposeMembersCannotAddSeatDuringGracePeriod=p,t.getProposeMembersFunctionalError=function(e){switch(e){case"invalid_origin":return new i;case"no_free_slot":return new a;case"no_free_slot_free_plan":return new c;case"USER_TEAM_INVITE_TOKEN_NOT_FOUND":return new u;case"payment_failed":return new d;case"not_billing_admin":return new l;case"cannot_add_seat_during_grace_period":return new p;default:throw new Error("Unknown server error")}};class f extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ProposeMembersCommand=f},914054:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(24699),t)},24699:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.SampleEvent=o},953784:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(818232),t),o(r(828539),t),o(r(914054),t),o(r(162535),t)},162535:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(947438),t)},947438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SampleQuery=o},216530:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(477704),t),o(r(621028),t)},143541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultItemsCrudApi=void 0;const n=r(468224),o=r(651836),s=r(850154),i=r(724094);t.vaultItemsCrudApi=(0,n.defineModuleApi)({name:"vaultItemsCrud",commands:{createVaultItem:o.CreateVaultItemCommand,deleteVaultItems:o.DeleteVaultItemsCommand,updateVaultItem:o.UpdateVaultItemCommand,emitTemporaryVaultItemEvent:o.EmitTemporaryVaultItemEventCommand},events:{createdEvent:s.CreatedEvent,deletedEvent:s.DeletedEvent,updatedEvent:s.UpdatedEvent},queries:{query:i.VaultItemsQuery}})},808892:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateVaultItemCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CreateVaultItemCommand=o},201704:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteVaultItemsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DeleteVaultItemsCommand=o},529160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmitTemporaryVaultItemEventCommand=t.EventType=void 0;const n=r(468224);!function(e){e.Deleted="deleted",e.Updated="updated",e.Created="created"}(t.EventType||(t.EventType={}));class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EmitTemporaryVaultItemEventCommand=o},651836:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(808892),t),o(r(201704),t),o(r(617863),t),o(r(529160),t)},617863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateVaultItemCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateVaultItemCommand=o},277911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.BaseEvent=o},9656:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreatedEvent=void 0;const n=r(277911);class o extends n.BaseEvent{}t.CreatedEvent=o},876962:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedEvent=void 0;const n=r(277911);class o extends n.BaseEvent{}t.DeletedEvent=o},850154:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9656),t),o(r(876962),t),o(r(335713),t)},335713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdatedEvent=void 0;const n=r(277911);class o extends n.BaseEvent{}t.UpdatedEvent=o},477704:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(143541),t),o(r(651836),t),o(r(850154),t),o(r(724094),t),o(r(233475),t)},724094:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(495859),t)},495859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultItemsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.VaultItemsQuery=o},976666:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Country=void 0,function(e){e.AD="AD",e.AE="AE",e.AF="AF",e.AG="AG",e.AI="AI",e.AL="AL",e.AM="AM",e.AO="AO",e.AQ="AQ",e.AR="AR",e.AS="AS",e.AT="AT",e.AU="AU",e.AW="AW",e.AX="AX",e.AZ="AZ",e.BA="BA",e.BB="BB",e.BD="BD",e.BE="BE",e.BF="BF",e.BG="BG",e.BH="BH",e.BI="BI",e.BJ="BJ",e.BL="BL",e.BM="BM",e.BN="BN",e.BO="BO",e.BR="BR",e.BS="BS",e.BT="BT",e.BV="BV",e.BW="BW",e.BY="BY",e.BZ="BZ",e.CA="CA",e.CC="CC",e.CD="CD",e.CF="CF",e.CG="CG",e.CH="CH",e.CI="CI",e.CK="CK",e.CL="CL",e.CM="CM",e.CN="CN",e.CO="CO",e.CR="CR",e.CU="CU",e.CV="CV",e.CX="CX",e.CY="CY",e.CZ="CZ",e.DE="DE",e.DJ="DJ",e.DK="DK",e.DM="DM",e.DO="DO",e.DZ="DZ",e.EC="EC",e.EE="EE",e.EG="EG",e.EH="EH",e.ER="ER",e.ES="ES",e.ET="ET",e.FI="FI",e.FJ="FJ",e.FK="FK",e.FM="FM",e.FO="FO",e.FR="FR",e.GA="GA",e.GB="GB",e.GD="GD",e.GE="GE",e.GF="GF",e.GG="GG",e.GH="GH",e.GI="GI",e.GL="GL",e.GM="GM",e.GN="GN",e.GP="GP",e.GQ="GQ",e.GR="GR",e.GS="GS",e.GT="GT",e.GU="GU",e.GW="GW",e.GY="GY",e.HK="HK",e.HM="HM",e.HN="HN",e.HR="HR",e.HT="HT",e.HU="HU",e.ID="ID",e.IE="IE",e.IL="IL",e.IM="IM",e.IN="IN",e.IO="IO",e.IQ="IQ",e.IR="IR",e.IS="IS",e.IT="IT",e.JE="JE",e.JM="JM",e.JO="JO",e.JP="JP",e.KE="KE",e.KG="KG",e.KH="KH",e.KI="KI",e.KM="KM",e.KN="KN",e.KP="KP",e.KR="KR",e.KW="KW",e.KY="KY",e.KZ="KZ",e.LA="LA",e.LB="LB",e.LC="LC",e.LI="LI",e.LK="LK",e.LR="LR",e.LS="LS",e.LT="LT",e.LU="LU",e.LV="LV",e.LY="LY",e.MA="MA",e.MC="MC",e.MD="MD",e.ME="ME",e.MF="MF",e.MG="MG",e.MH="MH",e.MK="MK",e.ML="ML",e.MM="MM",e.MN="MN",e.MO="MO",e.MP="MP",e.MQ="MQ",e.MR="MR",e.MS="MS",e.MT="MT",e.MU="MU",e.MV="MV",e.MW="MW",e.MX="MX",e.MY="MY",e.MZ="MZ",e.NA="NA",e.NC="NC",e.NE="NE",e.NF="NF",e.NG="NG",e.NI="NI",e.NL="NL",e.NO="NO",e.NO_TYPE="NO_TYPE",e.NP="NP",e.NR="NR",e.NU="NU",e.NZ="NZ",e.OM="OM",e.PA="PA",e.PE="PE",e.PF="PF",e.PG="PG",e.PH="PH",e.PK="PK",e.PL="PL",e.PM="PM",e.PN="PN",e.PR="PR",e.PS="PS",e.PT="PT",e.PW="PW",e.PY="PY",e.QA="QA",e.RE="RE",e.RO="RO",e.RS="RS",e.RU="RU",e.RW="RW",e.SA="SA",e.SB="SB",e.SC="SC",e.SD="SD",e.SE="SE",e.SG="SG",e.SH="SH",e.SI="SI",e.SJ="SJ",e.SK="SK",e.SL="SL",e.SM="SM",e.SN="SN",e.SO="SO",e.SR="SR",e.ST="ST",e.SV="SV",e.SY="SY",e.SZ="SZ",e.TC="TC",e.TD="TD",e.TF="TF",e.TG="TG",e.TH="TH",e.TJ="TJ",e.TK="TK",e.TL="TL",e.TM="TM",e.TN="TN",e.TO="TO",e.TR="TR",e.TT="TT",e.TV="TV",e.TW="TW",e.TZ="TZ",e.UA="UA",e.UG="UG",e.UM="UM",e.UNIVERSAL="UNIVERSAL",e.US="US",e.UY="UY",e.UZ="UZ",e.VA="VA",e.VC="VC",e.VE="VE",e.VG="VG",e.VI="VI",e.VN="VN",e.VU="VU",e.WF="WF",e.WS="WS",e.XK="XK",e.YE="YE",e.YT="YT",e.ZA="ZA",e.ZM="ZM",e.ZW="ZW"}(t.Country||(t.Country={}))},132545:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Country=void 0;var n=r(976666);Object.defineProperty(t,"Country",{enumerable:!0,get:function(){return n.Country}})},717484:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},372713:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},998548:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24603:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},343484:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(372713),t),o(r(998548),t),o(r(24603),t),o(r(138509),t),o(r(289205),t)},138509:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},289205:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},233475:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Country=void 0;var s=r(132545);Object.defineProperty(t,"Country",{enumerable:!0,get:function(){return s.Country}}),o(r(717484),t),o(r(343484),t),o(r(396394),t),o(r(216988),t),o(r(441126),t),o(r(4720),t)},435018:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},396394:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(435018),t),o(r(904453),t)},904453:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCardType=t.PaymentCardColorType=void 0,function(e){e.BLACK="BLACK",e.BLUE_1="BLUE_1",e.BLUE_2="BLUE_2",e.GOLD="GOLD",e.GREEN_1="GREEN_1",e.GREEN_2="GREEN_2",e.ORANGE="ORANGE",e.RED="RED",e.SILVER="SILVER",e.WHITE="WHITE"}(t.PaymentCardColorType||(t.PaymentCardColorType={})),function(e){e.PAYMENT_TYPE_AMEX="PAYMENT_TYPE_AMEX",e.PAYMENT_TYPE_DINERSCLUB="PAYMENT_TYPE_DINERSCLUB",e.PAYMENT_TYPE_DISCOVER="PAYMENT_TYPE_DISCOVER",e.PAYMENT_TYPE_JCB="PAYMENT_TYPE_JCB",e.PAYMENT_TYPE_MASTERCARD="PAYMENT_TYPE_MASTERCARD",e.PAYMENT_TYPE_VISA="PAYMENT_TYPE_VISA"}(t.PaymentCardType||(t.PaymentCardType={}))},774590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},267871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95278:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},262647:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},216988:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(774590),t),o(r(267871),t),o(r(95278),t),o(r(262647),t),o(r(120056),t),o(r(764826),t)},120056:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneType=void 0,function(e){e.PHONE_TYPE_ANY="PHONE_TYPE_ANY",e.PHONE_TYPE_FAX="PHONE_TYPE_FAX",e.PHONE_TYPE_LANDLINE="PHONE_TYPE_LANDLINE",e.PHONE_TYPE_MOBILE="PHONE_TYPE_MOBILE",e.PHONE_TYPE_WORK_FAX="PHONE_TYPE_WORK_FAX",e.PHONE_TYPE_WORK_LANDLINE="PHONE_TYPE_WORK_LANDLINE",e.PHONE_TYPE_WORK_MOBILE="PHONE_TYPE_WORK_MOBILE"}(t.PhoneType||(t.PhoneType={}))},764826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},441126:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoteColors=void 0,function(e){e.BLUE="BLUE",e.BROWN="BROWN",e.GRAY="GRAY",e.GREEN="GREEN",e.ORANGE="ORANGE",e.PINK="PINK",e.PURPLE="PURPLE",e.RED="RED",e.YELLOW="YELLOW"}(t.NoteColors||(t.NoteColors={}))},4720:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultItemType=void 0,function(e){e.Address="KWAddress",e.BankAccount="KWBankStatement",e.Company="KWCompany",e.Credential="KWAuthentifiant",e.DriversLicense="KWDriverLicence",e.Email="KWEmail",e.FiscalId="KWFiscalStatement",e.IdCard="KWIDCard",e.Identity="KWIdentity",e.Passport="KWPassport",e.PaymentCard="KWPaymentMean_creditCard",e.Phone="KWPhone",e.SecureNote="KWSecureNote",e.SocialSecurityId="KWSocialSecurityStatement",e.Website="KWPersonalWebsite"}(t.VaultItemType||(t.VaultItemType={}))},624494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultOrganizationApi=void 0;const n=r(468224),o=r(877834),s=r(182824);t.vaultOrganizationApi=(0,n.defineModuleApi)({name:"vaultOrganization",commands:{deleteCollection:o.DeleteCollectionCommand,createCollection:o.CreateCollectionCommand,migrateCategories:o.MigrateCategoriesCommand,updateCollection:o.UpdateCollectionCommand},events:{},queries:{queryCollections:s.CollectionsQuery}})},226424:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateCollectionCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CreateCollectionCommand=o},695795:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteCollectionCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DeleteCollectionCommand=o},877834:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(695795),t),o(r(226424),t),o(r(857547),t),o(r(684608),t)},684608:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MigrateCategoriesCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.MigrateCategoriesCommand=o},857547:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateCollectionCommand=t.OperationType=void 0;const n=r(468224);!function(e){e.SUBSTRACT="subtract",e.APPEND="append",e.OVERRIDE="override"}(t.OperationType||(t.OperationType={}));class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateCollectionCommand=o},621028:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(624494),t),o(r(877834),t),o(r(182824),t),o(r(251515),t)},836217:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.CollectionsQuery=o},182824:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(836217),t)},251515:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},932839:(e,t,r)=>{r.r(t),r.d(t,{AcknowledgedChannel:()=>J,AllowedToFail:()=>mt,AppLifeCycle:()=>ie,AppLogger:()=>ae,AppTimers:()=>be,BadStatus:()=>o.RV,BaseEventEmitter:()=>Or,ChannelMessageBroker:()=>A,ChannelState:()=>O,CommandHandler:()=>lr,CommandRefresherFactory:()=>Ce,ContextLessCqrsClient:()=>H,ContextlessBaseEventEmitter:()=>Cr,CqrsBroker:()=>M,CqrsClient:()=>q,CqrsCommandRefresher:()=>Oe,CronLowLevelSource:()=>At,DefaultEncryptionCodecForDeviceData:()=>we,DefaultEncryptionCodecForUserData:()=>Pe,EXCEPTION_LOGGING_FEATURE_FLIP:()=>dt,EventHandler:()=>Mr,ExceptionCriticality:()=>ct,ExceptionLogger:()=>ft,ExceptionLoggingSink:()=>pt,FeatureFlipsServiceAbstract:()=>ir,FetchFailedError:()=>o.a7,FrameworkInit:()=>x,Global:()=>N,HttpClient:()=>ur,HttpHeaders:()=>o.WM,HttpModule:()=>dr,HttpParams:()=>o.LE,HttpRequest:()=>o.aW,HttpResponse:()=>o.Zn,HttpStatusCode:()=>o.WE,Injectable:()=>T,JsonApplicationResourceFetcher:()=>ot,JsonApplicationResourceLoader:()=>at,KeyValueStorageFactory:()=>Me,KeyValueStorageInfrastructure:()=>Ae,LoadingState:()=>De,ManualTriggeredTimers:()=>ge,MemoryChannel:()=>j,MemoryKeyValueStorageInfrastructure:()=>Ue,MemoryStoreInfrastructureFactory:()=>se,MockFeatureFlipsService:()=>cr,MockJsonApplicationResourceFetcher:()=>st,MockedFeatureFlipsEnum:()=>ar,Module:()=>Kt,NoDynamicChannels:()=>$,NodeConfiguration:()=>F,NodeEventBroker:()=>re,NodeToModuleEventBroker:()=>vr,NullLogger:()=>ce,ParameterProviderType:()=>Mt,QueryHandler:()=>Ir,RequestContext:()=>U,RequestContextModule:()=>Kr,SingleNodeAppBuilder:()=>sr,StoreCapacity:()=>$e,StoreFlusher:()=>nt,StoreInfrastructureFactory:()=>oe,TaskTrackingModule:()=>Ar,TimerBasedCronSource:()=>It,createApplicationClient:()=>wr,createClientFactory:()=>Sr,createCqrsClient:()=>k,createCqrsClients:()=>L,defineApplication:()=>or,defineBatchExecutor:()=>Yr,defineStore:()=>Ve,deviceScopedSingletonProvider:()=>ze,getQueryValue:()=>Er,getStoresProviders:()=>tt,isExceptionLogEntry:()=>ut,isLazyState:()=>Ne,isSendMessageRequest:()=>Z,isVersionedData:()=>je,mockStore:()=>Fe,provideClass:()=>Zt,provideValue:()=>Xt,refresherCreationToken:()=>_e,scopedSingleton:()=>Je,sendMessageRequest:()=>X,startApplicationNode:()=>rr,startSingleApplicationNode:()=>nr,useEventsOfModule:()=>Vt,userScopedSingletonProvider:()=>Ye});var n=r(769183),o=r(660354),s=r(530523),i=r(160399),a=r(536414),c=r(670695),u=r(828489),d=r(773201),l=r(386924),p=r(87065),f=r(317350),m=r(295087);const h=e=>"response"===e.type;var y=r(724966),v=r(102049),b=r(464659);const g=e=>!(!e||"object"!=typeof e)&&"unSubscription"===e.type,_=(e,t,r)=>{const n=new Set(r),o=new Map,i=t.receivedMessages$.pipe((0,s.h)(g)).subscribe((e=>{const t=o.get(e.id);t?.unsubscribe(),o.delete(e.id)})),c=t.receivedMessages$.pipe((0,s.h)((e=>{return!(!(t=e)||"object"!=typeof t)&&"start"===t.type&&n.has(e.definition.destination)&&!o.has(e.definition.id);var t})),(0,a.z)((e=>(0,l.D)((async e=>(o.set(e.definition.id,{unsubscribe:()=>{}}),await t.send({type:"initial-acknowledgement",id:e.definition.id}),e))(e))))).subscribe((r=>{const n=r.definition.destination,s=e(n,r.definition.content,r.metadata),i={type:"end",id:r.definition.id},c=s.pipe((0,p.U)((e=>({id:r.definition.id,data:e,type:"data"}))),(0,b.l)(i),(0,a.z)((e=>(0,l.D)(t.send(e))))).subscribe();o.set(r.definition.id,{unsubscribe:()=>{c.unsubscribe()}})}));return{unsubscribe:()=>{c.unsubscribe(),i.unsubscribe();for(const e of o.values())e.unsubscribe()}}};var O,C=r(227257),S=r(385390),w=r(915023),P=r(6136),E=r(442946),R=r(198187);!function(e){e.Connected="Connected",e.Disconnected="Disconnected"}(O||(O={}));class j{constructor(){this.autoConnects=!1,this.sentMessages$=new R.x,this.receivedMessagesSubject$=new R.x,this.channelStateSubject$=new y.X(O.Disconnected)}send(e){if(this.channelStateSubject$.value!==O.Connected)throw new Error("Channel is not connected");return this.sentMessages$.next(e),Promise.resolve()}get receivedMessages$(){return this.receivedMessagesSubject$}get channelState$(){return this.channelStateSubject$}stop(){this.receivedMessages$.complete()}connect(e){if(this.channelStateSubject$.value===O.Connected)return{disconnect:()=>{}};const t=this.sentMessages$.subscribe((t=>{e.receivedMessages$.next(t)}));return this.channelState$.next(O.Connected),{disconnect:()=>{this.channelState$.next(O.Disconnected),t.unsubscribe()}}}}class A{constructor(e){this.stopped$=new y.X(!1);const t={routes:(0,u.Ay)({})};this.routes=(()=>{const{routes:r}=Object.keys(e).reduce(((t,r)=>{const o=e[r];if("local"===o.type&&(t.routes[r]={send:o.onMessage,trySend:async(...e)=>(await(0,v.n)(o.onMessage(...e)),!0)}),"remote"===o.type){const e=((e,t)=>{const r=(r,o,i)=>{const a={content:o,destination:String(r),id:(0,n.Z)()};return new C.y((r=>{let n={type:"start",definition:a,metadata:i};const o=(0,S.a)({message:e.receivedMessages$,stopped:t}).pipe((0,w.o)((({stopped:e})=>!e)),(0,p.U)((({message:e})=>e))).subscribe((e=>{var t;(t=e)&&"object"==typeof t&&"initial-acknowledgement"===t.type&&e.id===a.id?n={...n,metadata:{...n.metadata,isReminder:!0}}:(e=>!(!e||"object"!=typeof e)&&"data"===e.type)(e)&&e.id===a.id?r.next(e.data):(e=>!(!e||"object"!=typeof e)&&"end"===e.type)(e)&&e.id===a.id&&r.complete()})),c=(0,S.a)({sendTimes:e.channelState$.pipe((0,P.x)(),(0,s.h)((t=>t===O.Connected||e.autoConnects))),stopped:t}).pipe((0,w.o)((({stopped:e})=>!e)),(0,E.z)((()=>(0,l.D)(e.send(n))))).subscribe();return()=>{e.send({type:"unSubscription",id:a.id}),c.unsubscribe(),o.unsubscribe()}}))};return{send:r,trySend:async(t,n,o)=>!(!e.autoConnects&&await(0,i.z)(e.channelState$)!==O.Connected||(await(0,v.n)(r(t,n,o)),0))}})(o.channel,this.stopped$);t.routes[r]=e}return t}),t);return r})()}connect(e,t){let r=!1;return{start:()=>{if(r)throw new Error("Already started");r=!0;const n=e=>_(((e,t,r)=>this.routes[e].send(e,t,r)),e,Object.keys(this.routes)),o=e.map(n),s=new Map,i=t.connectedChannels$.subscribe((e=>{const t=[...s.entries()].filter((([t])=>!(t in e))),r=Object.keys(e).filter((e=>!s.has(e)));t.forEach((([e,t])=>{s.delete(e),t.unsubscribe()})),r.forEach((t=>{const r=e[t],o=n(r);s.set(t,o)}))}));return Promise.resolve({stop:()=>([...o,i,...s.values()].forEach((e=>e.unsubscribe())),this.stopped$.next(!0),Promise.resolve())})}}}sendMessage(e,t){return this.routes[e].send(e,t,{isReminder:!1})}trySendMessage(e,t){return this.routes[e].trySend(e,t,{isReminder:!1})}}const I=()=>(0,l.D)([]);class M{constructor(e){this.config=e}async sendCommand(e,t,r,n){if(!this.broker)throw new Error("call connect() first");return await(0,i.z)(this.broker.sendMessage(`command-${e}`,{type:"command",module:e,commandName:String(t),command:r,context:n}).pipe((0,s.h)(h),(0,p.U)((e=>e.response))))}sendQuery(e,t,r,n){if(!this.broker)throw new Error("call connect() first");return this.broker.sendMessage(`query-${e}`,{type:"query",module:e,queryName:String(t),query:r,context:n}).pipe((0,s.h)(h),(0,p.U)((e=>e.response)))}connect(e){const t=e?(t,r,n)=>{switch(r.type){case"response":return f.E;case"command":return(0,l.D)(e.onCommand(r.module,r.commandName,r.command,r.context,{isReminder:n.isReminder})).pipe((0,p.U)((e=>({type:"response",response:e}))));case"query":return(0,l.D)(e.onQuery(r.module,r.queryName,r.query,r.context)).pipe((0,p.U)((e=>({type:"response",response:e}))))}(0,m.U)(r)}:I,r=((e,t,r,n)=>Object.keys(e).reduce(((o,s)=>{const{commandMailbox:i,queryMailbox:a}=(o=>{const{main:s,queryOnly:i}=e[o],a={type:"local",onMessage:n};if(s===t)return{commandMailbox:a,queryMailbox:a};const c={type:"remote",channel:r[s]};return{commandMailbox:c,queryMailbox:t&&i.includes(t)?a:c}})(s);return o[`command-${s}`]=i,o[`query-${s}`]=a,o}),(0,u.Ay)({})))(this.config.appDefinition,this.config.currentNode,this.config.channels,t);return this.broker=new A(r),this.broker.connect(Object.values(this.config.channels),this.config.channelsListener)}}class U{constructor(e){this.useCaseId=e.useCaseId,this.userName=e.userName,this.featureFlips=e.featureFlips,this.requiredFeatureFlips=e.requiredFeatureFlips}}var D=r(632875);function N(){return(0,D.Global)()}function T(e){return(0,D.Injectable)({scope:e?.neverReuseInstance?D.Scope.TRANSIENT:D.Scope.DEFAULT})}const x=()=>T();class F{constructor(e){this.appDefinition=e.appDefinition,this.currentNode=e.currentNode,this.channels=e.channels,this.subscriptions=e.subscriptions,this.channelsListener=e.channelsListener}getNodeList(){return this.currentNode?[...this.getRemoteNodeList(),this.currentNode]:this.getRemoteNodeList()}getRemoteNodeList(){return Object.keys(this.channels)}getModuleNames(){return Object.keys(this.appDefinition)}}const k=(e,t,r,o)=>({commands:Object.keys(e[r].api.commands).reduce(((e,s)=>(e[s]=e=>{const i=o??new U({useCaseId:(0,n.Z)()});return t.sendCommand(r,s,e,i)},e)),(0,u.Ay)({})),queries:Object.keys(e[r].api.queries).reduce(((e,s)=>(e[s]=e=>{const i=o??new U({useCaseId:(0,n.Z)()});return t.sendQuery(r,s,e,i)},e)),(0,u.Ay)({}))}),L=(e,t,r)=>{const o=o=>Object.keys(e[o].api.commands).reduce(((e,s)=>(e[s]=e=>{const i=r??new U({useCaseId:(0,n.Z)()});return t.sendCommand(o,s,e,i)},e)),(0,u.Ay)({})),s=o=>Object.keys(e[o].api.queries).reduce(((e,s)=>(e[s]=e=>{const i=r??new U({useCaseId:(0,n.Z)()});return t.sendQuery(o,s,e,i)},e)),(0,u.Ay)({}));return Object.keys(e).map((e=>e)).reduce(((e,t)=>(e[t]={commands:o(t),queries:s(t)},e)),{})};var G=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},B=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let q=class{constructor(e,t,r){this.broker=e,this.configuration=t,this.context=r}getClient(e){return k(this.configuration.appDefinition,this.broker,e.name,this.context)}};q=G([T(),B("design:paramtypes",[M,F,U])],q);let H=class{constructor(e,t){this.configuration=e,this.broker=t}getClient(e){return k(this.configuration.appDefinition,this.broker,e.name)}};H=G([T(),B("design:paramtypes",[F,M])],H);var V=r(69885);const $={connectedChannels$:new y.X({})};var K=r(116433),Q=r(489618),W=r(537182),z=r(897280),Y=r(507074);class J{constructor(e,t=3e4){this.autoConnects=e.autoConnects;const r=e.status$.pipe((0,P.x)());let o=!1;const i=new R.x,c=i.pipe((0,a.z)((async i=>{const a=(0,n.Z)();let c=!1;const u=e.messages$.pipe((0,w.o)((()=>!o)),(0,s.h)((e=>"acknowledgement"===e.type&&e.id===a)),(0,K.q)(1),(0,Q.V)(t),(0,W.K)((()=>f.E)),(0,z.d)(1)),d=u.subscribe((()=>{c=!0,d.unsubscribe()})),p=r.pipe((0,w.o)((()=>!c&&!o)),(0,E.z)((()=>(0,l.D)(e.sendMessage({type:"send",id:a,message:i.message}))))).subscribe();try{await(0,v.n)(u),p.unsubscribe(),i.resolve()}catch(e){p.unsubscribe(),i.reject(e)}}))).subscribe();this.stop=()=>(o=!0,c.unsubscribe(),e.stop()),this.send=e=>new Promise(((t,r)=>{const n={message:e,resolve:t,reject:r};i.next(n)})),this.channelState$=e.status$,this.receivedMessages$=e.messages$.pipe((0,s.h)((e=>"send"===e.type)),(0,a.z)((async t=>{if("send"===t.type)return await e.sendMessage({type:"acknowledgement",id:t.id}),t.message})),(0,Y.B)())}}const X=({channelName:e,message:t})=>({channelName:e,message:t,type:"graphene-message"}),Z=e=>!(!e||"object"!=typeof e)&&"graphene-message"===e.type,ee={type:"ask"},te={type:"eventResponse"};let re=class{constructor(e){this.regenerateReverseSubscriptionMap=()=>{const{configuration:e,subscriberToEvent:t}=this,r=e.getModuleNames().reduce(((e,t)=>({...e,[t]:new Map})),{});return e.getNodeList().reduce(((e,r)=>{const n=t[r];return Object.entries(n).forEach((([t,n])=>{const o=e[t];n.forEach((e=>{const t=[...o.get(e)??[],r];o.set(e,t)}))})),e}),r)},this.configuration=e;const t=Object.entries(e.appDefinition).reduce(((e,[t,r])=>(e[t]=Object.keys(r.api.events),e)),{});this.subscriberToEvent=this.configuration.getNodeList().reduce(((e,r)=>(e[r]={...t},e)),{}),this.eventToSubscriber=this.regenerateReverseSubscriptionMap()}async publishEvent(e,t,r,n){const{broker:o,eventToSubscriber:s}=this;if(!o)throw new Error("Not started");const i=(s[e].get(t)??[]).map((o=>({type:"event",context:n,event:r,eventName:t,moduleSource:e,nodeDestination:o})));await Promise.all(i.map((async e=>{await o.trySendMessage(`event-${e.nodeDestination}`,e)})))}connect(e){const{configuration:t}=this,r=Object.keys(t.subscriptions).reduce(((e,r)=>({...e,...t.subscriptions[r]})),(0,u.Ay)({})),n={type:"subscriptions",nodeName:t.currentNode,subscribesTo:r},o=((e,t)=>e.getNodeList().reduce(((r,n)=>(n===e.currentNode?r[`event-${n}`]={type:"local",onMessage:t}:r[`event-${n}`]={type:"remote",channel:e.channels[n]},r)),(0,u.Ay)({})))(this.configuration,((t,r,o)=>{switch(r.type){case"event":return(0,l.D)(e.onLocalEvent(r.moduleSource,r.nodeDestination,r.eventName,r.event,r.context,o)).pipe((0,p.U)((()=>te)));case"eventResponse":return f.E;case"subscriptions":return this.subscriberToEvent[r.nodeName]=r.subscribesTo,this.eventToSubscriber=this.regenerateReverseSubscriptionMap(),(0,V.of)(te);case"ask":return(0,V.of)(n)}})),s=new A(o);return t.getNodeList().map((async e=>{await s.trySendMessage(`event-${e}`,n),await s.trySendMessage(`event-${e}`,ee)})),this.broker=s,s.connect(Object.values(t.channels),t.channelsListener)}};re=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([T(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[F])],re);class ne{constructor(e){this.state$=new y.X(e)}get(){return Promise.resolve(this.state$.getValue())}set(e){return this.state$.next(e),Promise.resolve()}init(e){return this.state$.next(e),Promise.resolve()}stop(){this.state$.complete()}}class oe{}class se extends oe{createUserScopedInfrastructure(){return new ne({timestamp:void 0})}createDeviceScopedInfrastructure(){return new ne({timestamp:void 0})}}class ie{constructor(){this.shutdownHooks=[],this.externalComponentReadyConditions=[],this.appReadyHooks=[]}addExternalComponentReadyCondition(e){this.externalComponentReadyConditions.push(e)}addAppReadyHook(e){this.appReadyHooks.push(e)}addShutdownHook(e){this.shutdownHooks.push(e)}startup(){const e=this.waitAndTriggerAppReady();if(!this.externalComponentReadyConditions.length)return e;this.addShutdownHook((async()=>await e))}async shutDown(){for(;this.shutdownHooks.length>0;){const e=this.shutdownHooks.pop();e&&await e()}}async waitAndTriggerAppReady(){await Promise.all(this.externalComponentReadyConditions.map((e=>e()))),await this.executeStartupHooks(this.appReadyHooks)}async executeStartupHooks(e){for(;e.length>0;){const t=e.shift();if(t){const e=await t();e&&this.addShutdownHook(e)}}}}class ae{}class ce extends ae{log(){}error(){}warn(){}trace(){}}var ue,de=r(805373);!function(e){e.Command="command",e.Query="query",e.Event="event",e.Init="init",e.Cron="cron"}(ue||(ue={}));var le=r(468224),pe=r(287279);async function fe(e){const t=await(0,i.z)(e.getClient(le.requestContextApi).queries.activeUser());if((0,pe.d6)(t)&&t.data.userName)return t.data.userName}var me=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},he=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class ye{constructor(e){this.supportedEventHandlers=e}}let ve=class{constructor(e,t,r,n){this.conf=e,this.config=t,this.moduleRef=r,this.clients=n}async execute(e){const t=c.ContextIdFactory.getByRequest(e),{type:r}=e,n=async()=>e.context.userName??await fe(this.clients),{appDefinition:o}=this.config;if(!(e.module in o))throw new Error("Unknown module "+e.module);const s=o[e.module].api;switch(r){case ue.Query:{const{queries:r}=s;if(e.name in r){const o=r[e.name],s=new o(e.body),i=Reflect.getMetadata("dl-handler",o);return o.metadata.scope===le.UseCaseScope.User&&(e.context.userName=await n()),{result:(await this.moduleRef.resolve(i,t,{strict:!1})).execute(s)}}throw new Error("Unknown query "+e.name)}case ue.Command:{const{commands:r}=s;if(e.name in r){const o=r[e.name],s=new o(e.body),i=Reflect.getMetadata("dl-handler",o);o.metadata.scope===le.UseCaseScope.User&&(e.context.userName=await n());const a=await this.moduleRef.resolve(i,t,{strict:!1});return{result:await a.execute(s)}}throw new Error("Unknown command "+e.name)}case ue.Event:{const{events:r}=s;if(e.name in r){const o=r[e.name],s=new o(e.body),i=Reflect.getMetadata("dl-handlers",o);if(!i)return;o.metadata.scope===le.UseCaseScope.User&&(e.context.userName=await n());const a=await Promise.all(i.filter((e=>this.conf.supportedEventHandlers.has(e))).map((async e=>await this.moduleRef.resolve(e,t,{strict:!1}))));return void await Promise.all(a.map((e=>e.handle(s))))}throw new Error("Unknown event "+e.name)}}(0,m.U)(r)}};me([(0,D.All)(),function(e,t){return function(r,n){t(r,n,e)}}(0,(0,D.Req)()),he("design:type",Function),he("design:paramtypes",[Object]),he("design:returntype",Promise)],ve.prototype,"execute",null),ve=me([(0,D.Controller)({scope:D.Scope.REQUEST,durable:!1}),he("design:paramtypes",[ye,F,c.ModuleRef,H])],ve);class be{async waitTimeout(e){await(0,i.z)(this.createObservableTimer(e,e))}}class ge extends be{constructor(){super(...arguments),this.subscribers$=new y.X(new Set),this.time=0,this.pendingTimerCount$=this.subscribers$.pipe((0,p.U)((e=>e.size)))}fireTimer(e=1){this.time+=e,[...this.subscribers$.value].forEach((e=>{e.next(this.time)}))}async allSubscribersDisconnected(){await(0,i.z)(this.pendingTimerCount$.pipe((0,s.h)((e=>!e))))}createObservableTimer(){return new C.y((e=>(this.subscribers$.next(new Set([...this.subscribers$.value,e])),()=>{this.subscribers$.next(new Set([...this.subscribers$.value].filter((t=>t!==e))))})))}}function _e(e){return e}class Oe{constructor(e,t,{args:r,commandName:n}){const o=t.commands[n];this.refreshObservable$=e.pipe((0,a.z)((async()=>{await o(r)})),(0,Y.B)({}))}withRefresh(){return e=>new C.y((t=>{const r=this.refreshObservable$.subscribe();return r.add(e.subscribe(t)),r}))}}let Ce=class{constructor(e,t){this.timers=e,this.cqrsClient=t,this.map=new WeakMap}getRefresher(e){const t=this.map.get(e);return t||new Oe(this.timers.createObservableTimer(e.period,e.period),this.cqrsClient.getClient(e.api),e)}};Ce=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([T(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[be,H])],Ce);var Se=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let we=class{};we=Se([(0,D.Injectable)()],we);let Pe=class{};async function Ee(e,t){const r=await(0,i.z)(e.getClient(le.requestContextApi).queries.userFeatureFlips({requiredFeatureFlips:t}));if(!(0,pe.d6)(r))throw new Error("Couldn't fetch userFeatureFlips from requestContextApi");return(0,pe.db)(r)}Pe=Se([(0,D.Injectable)()],Pe);const Re=(e,t)=>({provide:U,scope:D.Scope.REQUEST,inject:[H,c.REQUEST],useFactory:async(r,n)=>{let o=String(c.ContextIdFactory.getByRequest(n).id);if(n.type===ue.Init)return new U({useCaseId:o,requiredFeatureFlips:t});if(n.type===ue.Cron){if(n.scope===le.UseCaseScope.Device)return new U({useCaseId:o,requiredFeatureFlips:t});const e=await fe(r);return new U(e?{useCaseId:o,userName:e,featureFlips:await Ee(r,t),requiredFeatureFlips:t}:{useCaseId:o,requiredFeatureFlips:t})}o=n.context.useCaseId||String(c.ContextIdFactory.getByRequest(n).id);const s=function(e,t){const{type:r}=e;switch(r){case ue.Query:{const r=t[e.module].api,{queries:n}=r;if(e.name in n)return n[e.name].metadata.scope;throw new Error("unknown query "+e.name)}case ue.Command:{const r=t[e.module].api,{commands:n}=r;if(e.name in n)return n[e.name].metadata.scope;throw new Error("unknown command "+e.name)}case ue.Event:{const r=t[e.module].api,{events:n}=r;if(e.name in n)return n[e.name].metadata.scope;throw new Error("unknown event "+e.name)}case ue.Init:return le.UseCaseScope.Device;case ue.Cron:return e.scope;default:(0,m.U)(r)}}(n,e);if(s===le.UseCaseScope.Device)return new U({useCaseId:o,requiredFeatureFlips:t});const i=n.context.userName??await fe(r),a=await(async()=>n.context.featureFlips??await Ee(r,t))();return new U({useCaseId:o,requiredFeatureFlips:t,userName:i,featureFlips:a})}});function je(e,t){return null!==e&&"object"==typeof e&&(0,u.l$)(e,"version")&&(0,u.l$)(e,"content")&&t(e.content)}class Ae{}class Ie{constructor(e,t,r){this.storage=e,this.baseKey=t,this.initialValueFactory=r}async read(){const e=await this.storage.get(this.baseKey);return!e&&this.initialValueFactory?await this.initialValueFactory():e}async write(e){await this.storage.set(this.baseKey,e)}}class Me{constructor(e){this.storage=e}createBackend(e,t,r,n){const o=r?`${e}.${t}.${r}`:`${e}.${t}`;return new Ie(this.storage,o,n)}}class Ue{constructor(){this.memory=new Map}set(e,t){return this.memory.set(e,t),Promise.resolve()}getAllKeys(){return Promise.resolve([...this.memory.keys()])}remove(e){return this.memory.get(e)?(this.memory.delete(e),Promise.resolve()):Promise.resolve()}get(e){return Promise.resolve(this.memory.get(e))}}var De;!function(e){e.NotLoaded="not_loaded",e.Requested="requested",e.Loaded="loaded"}(De||(De={}));const Ne=e=>!(!e||"object"!=typeof e)&&"boolean"==typeof e.loaded,Te=e=>e.loaded,xe=new se;async function Fe(e,t){const r=new e("mockedModuleName",e.Definition,xe,"user");return t&&await r.set(t),r}class ke{constructor(e){this.subscribersCount$=new y.X(0),this.stopped$=new y.X(!1),this.store=e,this.state$=new C.y((t=>{this.subscribersCount$.next(this.subscribersCount$.value+1);const r=e.state$.pipe((e=>e.pipe((0,s.h)(Te),(0,p.U)((e=>e.value))))).subscribe(t);return r.add((()=>this.subscribersCount$.next(this.subscribersCount$.value-1))),r.add(this.stopped$.pipe((0,s.h)((e=>!!e))).subscribe((()=>{t.complete()}))),r})),this.loadingState$=(0,S.a)({stopped:this.stopped$,hasSubscribers:this.subscribersCount$.pipe((0,p.U)((e=>e>0))),isLoaded:this.store.state$.pipe((0,p.U)((e=>e.loaded)))}).pipe((0,w.o)((({stopped:e})=>!e)),(0,p.U)((({hasSubscribers:e,isLoaded:t})=>t?De.Loaded:e?De.Requested:De.NotLoaded)))}set(e){return this.store.set({loaded:!0,value:e})}init(e){return this.store.init({loaded:!0,value:e})}clear(){return this.store.set({loaded:!1})}stop(){this.store.stop(),this.stopped$.next(!0)}getState(){return(0,i.z)(this.state$)}}class Le{constructor(e){const{infrastructure:t,defaultValue:r}=e;this.infrastructure=t,this.timeGetter=e.timeGetter??(()=>Date.now()),this.localState$=new y.X({timestamp:void 0}),this.mergedState$=(0,S.a)({infra:t.state$,current:this.localState$}).pipe((0,p.U)((({current:e,infra:t})=>t.timestamp&&(!e.timestamp||t.timestamp>e.timestamp)?t:e))),this.state$=this.mergedState$.pipe((0,p.U)((e=>e.data??r)))}async set(e){const t={data:e,timestamp:this.timeGetter()};this.localState$.next(t),await this.infrastructure.set(t)}init(e){const t={data:e,timestamp:0};return this.localState$.next(t),Promise.resolve()}get(){return(0,i.z)(this.state$)}stop(){this.localState$.complete()}}const Ge=e=>{var t;return t=class{constructor(e,t,r,n){this.encryptionCodec=e,this.serializationCodec=t,this.transportStorageCodec=r,this.backend=n}async read(){const t=await this.backend.read();if(!t)return;const r=await this.transportStorageCodec.decode(t),n=await this.encryptionCodec.decode(r),o=await this.serializationCodec.decode(n);if(!je(o,e.typeGuard)){if(!e.typeGuard(o))throw new Error("deserializedObject is not type of TStorage");return await this.write(o),o}if(o.version<e.schemaVersion){if(!e.migrateStorageSchema)throw new Error("migrateStorage is undefined");const t=e.migrateStorageSchema(o);return await this.write(t),t}const s=o.content;if(!e.typeGuard(s))throw new Error("Type guard failed");return s}async write(t){const r={version:e.schemaVersion,content:t},n=await this.serializationCodec.encode(r),o=await this.encryptionCodec.encode(n),s=await this.transportStorageCodec.encode(o);await this.backend.write(s)}},t.Definition=e,t},Be={loaded:!1};class qe extends ke{constructor(e,t,r,n,o,s){super(function(e,t,r,n){const o=(()=>{switch(t.scope){case le.UseCaseScope.Device:return r.createDeviceScopedInfrastructure(e,t.storeName,t.storeTypeGuard);case le.UseCaseScope.User:if(!n)throw new Error;return r.createUserScopedInfrastructure(e,t.storeName,n,t.storeTypeGuard)}(0,m.U)(t.scope)})();return new Le({infrastructure:o,defaultValue:Be})}(e,t,r,n)),this.storage=o,this.codec=s,t.persist||this.init(t.initialValue)}async update(e){const t=await this.getState();await this.set(e(t))}async persist(){if(!this.codec||!this.storage)return;const e=await this.getState(),t=await this.codec.encode(e);await this.storage.write(t)}}const He=e=>e.persist?{persist:!0,codec:e.codec,scope:e.scope,storeName:e.storeName,storeTypeGuard:e.storeTypeGuard,isCache:e.isCache,persistPeriod:e.persistPeriod,storage:Ge(e.storage)}:{persist:!1,initialValue:e.initialValue,scope:e.scope,storeName:e.storeName};function Ve(e){var t;const r=He(e),n=((t=class extends qe{constructor(e,t,r,n,o,s){super(e,t,r,n,o,s)}}).Definition=r,t);return T()(n),n}var $e;!function(e){e._001KB="1KB",e._010KB="10KB",e._100KB="100KB",e.Unlimited="Unlimited"}($e||($e={}));var Ke=r(52273),Qe=r(243978),We=r(164987);const ze=(e,t)=>{const r=t.token??(0,n.Z)();class o{constructor(){this.mutex=new We.WU}getOrCreate(e){return this.mutex.runExclusive((async()=>(this.instance||(this.instance=await e()),this.instance)))}}T()(o);const s=o,i={token:e,inject:[o,c.ModuleRef,c.REQUEST],asyncFactory:(e,t,n)=>{const o=c.ContextIdFactory.getByRequest(n);return e.getOrCreate((()=>t.resolve(r,o)))}};return[{...t,token:r},s,i]},Ye=(e,t)=>{const r=t.token??(0,n.Z)();class o{constructor(){this.instances=new Map,this.mutex=new We.WU}getOrCreate(e,t){return this.mutex.runExclusive((async()=>{const r=this.instances.get(e);if(r)return r;const n=await t();return this.instances.set(e,n),n}))}}const s=o,i={token:e,inject:[o,U,c.ModuleRef,c.REQUEST],asyncFactory:(t,{userName:n},o,s)=>{const i=c.ContextIdFactory.getByRequest(s);if(!n)throw new Error(`Provider ${e} is a user-scoped singleton but there is no user`);return t.getOrCreate(n,(()=>o.resolve(r,i)))}};return[{token:r,asyncFactory:t.asyncFactory,inject:[...t.inject??[],U]},s,i]},Je=(e,t,r)=>{switch(e){case le.UseCaseScope.Device:return ze(t,r);case le.UseCaseScope.User:return Ye(t,r);default:(0,m.U)(e)}},Xe="frameworkModuleName",Ze={[le.UseCaseScope.Device]:we,[le.UseCaseScope.User]:Pe},et=1e3;function tt(...e){return e.flatMap((e=>function(e){const t=e.Definition.persist?function(e,t,r){const{EncryptionCodec:s=Ze[t],SerializationCodec:i=o.bL,TransportStorageCodec:a=o.z,initialValue:c,schemaVersion:u}=r.Definition;class d{constructor(e,t,r,n){this.encryptionCodec=e,this.serializationCodec=t,this.transportStorageCodec=r,this.backend=n}}class l extends r{constructor(e){super(e.encryptionCodec,e.serializationCodec,e.transportStorageCodec,e.backend)}}const p={token:(0,n.Z)(),inject:[d],asyncFactory:e=>Promise.resolve(new l(e))},f={token:d,inject:[Xe,s,i,a,Me,...t===le.UseCaseScope.User?[U]:[]],asyncFactory:async(r,n,o,s,i,a)=>{const l=await i.createBackend(r,e,(t===le.UseCaseScope.User?a?.userName:"")??"",(async()=>{const e={version:u,content:c},t=await o.encode(e),r=await n.encode(t);return await s.encode(r)}));return new d(n,o,s,l)}};return[f,...Je(t,r,p)]}(e.Definition.storeName,e.Definition.scope,e.Definition.storage):[],r={token:(0,n.Z)(),inject:[Xe,ie,ae,oe,e.Definition.scope===le.UseCaseScope.User?U:c.REQUEST,...e.Definition.persist?[e.Definition.storage,e.Definition.codec]:[]],asyncFactory:async(t,r,n,o,s,i,a)=>await(async()=>{const c=new e(t,e.Definition,o,(e.Definition.scope===le.UseCaseScope.User?s.userName:"")??"",i,a);r.addShutdownHook((()=>c.stop()));const{Definition:u}=e;return u.persist&&await async function(e){const t=e.isCache?await async function(e){try{return await a.decode(await i.read())}catch(t){const r=["Data corrupted on disk. Using initial value for the store",t];return n.warn(...r),await a.decode(e.storage.Definition.initialValue)}}(e):await a.decode(await i.read());await c.set(t);const o=e.persistPeriod??et,s=(0===e.persistPeriod?c.state$:c.state$.pipe((0,Ke.b)(o))).pipe((0,Qe.w)((async e=>{await i.write(await a.encode(e))}))).subscribe();r.addShutdownHook((()=>s.unsubscribe()))}(u),c})()};return[...t,...Je(e.Definition.scope,e,r)]}(e)))}class rt{constructor(){this.registeredClasses=[],this.preparedInstances=[]}get classes(){return this.registeredClasses}get instances(){return this.preparedInstances}set instances(e){this.preparedInstances=e}registerClass(e){this.registeredClasses.push(e)}}let nt=class{constructor(e,t,r){this.moduleRef=e,this.request=t,this.storeList=r}async prepare(){const e=c.ContextIdFactory.getByRequest(this.request);this.storeList.instances=await Promise.all(this.storeList.classes.map((t=>this.moduleRef.resolve(t,e,{strict:!1}))))}async flush(){const{instances:e}=this.storeList;if(!e.length)throw new Error("Stores not instantiated");const t=e.map((e=>e.persist()));await Promise.all(t)}};nt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,D.Injectable)(),function(e,t){return function(r,n){t(r,n,e)}}(1,(0,D.Inject)(c.REQUEST)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[c.ModuleRef,Object,rt])],nt);class ot{}class st extends ot{constructor(e){super(),this.files=e}fetch(e){return e in this.files?Promise.resolve(this.files[e]):Promise.reject(new Error("404 not found :"+e))}}var it=r(625859);let at=class{constructor(e,t){this.url=e,this.fetcher=t,this.value$=(0,l.D)((0,it.P)((()=>this.get())))}async load(){await this.get()}async get(){const{value:e}=this;if(e)return e;const t=await this.fetcher.fetch(this.url),r=await this.loadResource(t);return this.value=r,r}};var ct;function ut(e){return!(!e||"object"!=typeof e)&&"criticality"in e&&"timestamp"in e&&"message"in e&&"callStack"in e&&(e.criticality===ct.CRITICAL||e.criticality===ct.WARNING)&&"string"==typeof e.message&&"string"==typeof e.callStack}at=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([T(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[String,ot])],at),function(e){e.WARNING="warning",e.CRITICAL="critical"}(ct||(ct={}));const dt="webproduct_extension_grapheneExceptionLogs";let lt=class{constructor(e){this.requestContext=e}isExceptionLoggingFeatureEnabled(){return Promise.resolve(!!this.requestContext.featureFlips?.[dt])}};lt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,D.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[U])],lt);class pt{}let ft=class{constructor(e,t,r){this.sink=e,this.ff=t,this.logger=r}async captureException(e,t,r=ct.CRITICAL){try{if(!await this.ff.isExceptionLoggingFeatureEnabled())return;const n=e instanceof Error?e:new Error("Invalid exception type"),o=this.createExceptionLogEntry(t,n,r);return this.sink.logException(o)}catch(r){this.logger.error("Failed to capture exception",r,e,t)}}createExceptionLogEntry(e,t,r){return{criticality:r,message:t.message,callStack:t.stack??"",moduleName:e.moduleName,useCaseId:e.useCaseId,useCaseName:e.useCaseName,timestamp:Date.now()}}};ft=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,D.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[pt,lt,ae])],ft);let mt=class{constructor(e,t){this.request=e,this.logger=t}async do(...e){return(await Promise.all(e.map((e=>this.doOne(e))))).every((e=>!!e))}async doOne(e){try{const t=await e();if((0,pe.AZ)(t)&&(0,pe.hx)(t))throw new Error("Allowed to fail method has failed");return!0}catch(e){const{request:t}=this;return this.logger.captureException(e,{moduleName:t.module,useCaseId:t.context.useCaseId,useCaseName:t.name},ct.WARNING),!1}}};mt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([function(e,t){return function(r,n){t(r,n,e)}}(0,(0,D.Inject)(c.REQUEST)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,ft])],mt);let ht=class{catch(e,t){t.switchToHttp().getResponse().fail(e)}};ht=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,D.Catch)(Error)],ht);let yt=class{constructor(e,t,r){this.request=e,this.clients=t,this.config=r}intercept(e,t){const{request:r}=this,{appDefinition:n}=this.config;if(!(r.module in n))return t.handle();const o=n[r.module].api;switch(r.type){case ue.Query:return this.checkQueryActiveUser(t,r,o);case ue.Command:return this.checkCommandActiveUser(t,r,o);case ue.Event:return this.checkEventActiveUser(t,r,o);default:(0,m.U)(r)}}checkQueryActiveUser(e,t,r){const{queries:n}=r;if(t.name in n){const r=n[t.name],{metadata:o}=r;return this.checkActiveUser(e,t,o)}return e.handle()}checkCommandActiveUser(e,t,r){const{commands:n}=r;if(t.name in n){const r=n[t.name],{metadata:o}=r;return this.checkActiveUser(e,t,o)}return e.handle()}checkEventActiveUser(e,t,r){const{events:n}=r;if(t.name in n){const r=n[t.name],{metadata:o}=r;return this.checkActiveUser(e,t,o)}return e.handle()}checkActiveUser(e,t,r){if(r.scope!==le.UseCaseScope.User)return e.handle();const{noUserError:n}=r;return(0,l.D)(this.getActiveUserName(t)).pipe((0,a.z)((r=>{if(r)return e.handle();if(n)return(0,V.of)({result:(0,pe.Rn)(n)});const o=t.type[0].toUpperCase()+t.type.substring(1);throw new Error(`${o} ${t.module}.${t.name} is user-scoped but there is no active user`)})))}async getActiveUserName(e){return e.context.userName??await fe(this.clients)}};yt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,D.Injectable)({scope:D.Scope.REQUEST}),function(e,t){return function(r,n){t(r,n,e)}}(0,(0,D.Inject)(c.REQUEST)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,H,F])],yt);class vt{static create({brokers:{cqrs:e,event:t},configProviders:r,keyValueStorageInfrastructure:n,lifeCycle:s,logger:i,modules:a,nodeConfiguration:u,requiredFeatureFlips:l,storeInfrastructureFactory:p,timers:f,jsonFetcher:m,eventHandlers:h,defaultDeviceStorageEncryptionCodecProvider:y,defaultUserStorageEncryptionCodecProvider:v,storeList:b}){return{module:vt,providers:[d.ExplorerService,{provide:Ae,useValue:n},{provide:ie,useValue:s},{provide:F,useValue:u},{provide:M,useValue:e},{provide:re,useValue:t},{provide:ot,useValue:m},q,H,...r,{provide:ae,useValue:i},Re(u.appDefinition,l),{provide:oe,useValue:p},{provide:be,useValue:f},Ce,{provide:Me,useValue:new Me(n)},o.z,y,v,o.bL,o.Eu,{provide:ye,useValue:new ye(new Set(h))},{provide:rt,useValue:b},nt,mt,{provide:c.APP_FILTER,useClass:ht},{provide:c.APP_INTERCEPTOR,useClass:yt}],imports:[...a],exports:[ie,F,M,re,q,H,...r.map((({provide:e})=>e)),ae,U,oe,be,Ce,o.z,we,Pe,o.bL,o.Eu,Me,Ae,ot,nt,mt],controllers:[ve],global:!0}}}var bt=r(674081);const gt=()=>{},_t=()=>{throw new Error("Not supported")};class Ot{constructor(e,t){this.cqrsBroker=e,this.eventsBroker=t,this.isListening$=new y.X(!1),this.use=_t,this.get=_t,this.post=_t,this.head=_t,this.delete=_t,this.put=_t,this.options=_t,this.patch=_t,this.end=_t,this.applyVersionFilter=_t,this.disconnect=gt,this.close=gt,this.status=_t,this.render=_t,this.redirect=_t,this.setHeader=_t,this.enableCors=_t,this.initHttpServer=_t,this.registerParserMiddleware=_t,this.createMiddlewareFactory=_t}isHeadersSent(){return!1}bindHandler(e){if(this.cqrsCallbacks||this.eventCallbacks)throw new Error("Handler already registered");this.cqrsCallbacks={onCommand:(t,r,n,o)=>new Promise(((s,i)=>{e({type:ue.Command,module:t,name:r,body:n,context:o},{type:ue.Command,value:{result:(0,pe.Vp)(void 0)},reply:e=>s(e),fail:e=>i(e)})})),onQuery:(t,r,n,o)=>{const s=new Promise(((s,i)=>{e({type:ue.Query,module:t,name:r,body:n,context:o},{type:ue.Query,value:{result:f.E},reply:e=>s(e),fail:e=>i(e)})}));return(0,l.D)(s).pipe((0,bt.J)())}},this.eventCallbacks={onLocalEvent:(t,r,n,o,s)=>new Promise(((r,i)=>{e({type:ue.Event,body:o,context:s,name:n,module:t},{type:ue.Event,reply:()=>r(),fail:e=>i(e)})}))}}all(e,t){if(!t)throw new Error("Provide a handler");return this.bindHandler(t)}async listen(){if(!this.cqrsCallbacks||!this.eventCallbacks)throw new Error("Please call `all(path, handler)` first");const e=await this.cqrsBroker.connect(this.cqrsCallbacks).start(),t=await this.eventsBroker.connect(this.eventCallbacks).start(),{isListening$:r}=this;this.disconnect=()=>{e.stop(),t.stop(),r.complete()},this.close=this.disconnect,this.isListening$.next(!0)}reply(e,t){switch(e.type){case ue.Query:case ue.Command:e.reply(t.result);break;case ue.Event:e.reply();break;default:(0,m.U)(e)}}getInstance(){return this}getHttpServer(){return{once:gt,address:()=>"",removeListener:gt}}getType(){return"AppCoreNode"}}const Ct=()=>{};class St extends c.AbstractHttpAdapter{constructor(e,t){super(new Ot(e,t)),this.createMiddlewareFactory=this.instance.createMiddlewareFactory,this.close=this.instance.close,this.reply=this.instance.reply,this.useStaticAssets=Ct,this.setViewEngine=Ct,this.getRequestHostname=Ct,this.status=Ct,this.render=Ct,this.redirect=Ct,this.setNotFoundHandler=Ct,this.setHeader=Ct,this.registerParserMiddleware=Ct,this.enableCors=Ct,this.setErrorHandler=Ct,this.end=Ct,this.isListening$=this.instance.isListening$}initHttpServer(){this.setHttpServer({once:Ct,address:()=>"",removeListener:Ct})}getRequestMethod(){return D.RequestMethod.ALL}getRequestUrl(){return"/"}getType(){return"CoreApp"}isHeadersSent(){return!1}applyVersionFilter(){throw new Error("Versioning not supported")}}var wt=r(890171);class Pt extends ae{log(){}warn(e,...t){return console.warn(e,t)}error(e,...t){return console.error(e,t)}trace(e,...t){return console.trace(e,t)}}class Et extends be{get time(){return Date.now()}createObservableTimer(e,t){return(0,wt.H)(e,t)}}class Rt extends ot{fetch(){return Promise.reject(new Error("Please add a jsonFetcher to the application. Probably you are seing that in unit tests.\nIf this is the case, please mock whatever service is requiring to fetch the data"))}}const jt="dl-module";class At{}class It extends At{constructor(e){super(),this.alarm$=e.createObservableTimer(6e4,6e4)}}var Mt;!function(e){e.VALUE_PROVIDER="value_provider",e.CLASS_PROVIDER="class_provider"}(Mt||(Mt={}));class Ut{constructor(e,t,r,n){this.handler=e,this.logger=t,this.requestContext=r,this.definition=n}static async create(e,t,r,n){const o=await e.resolve(ft,t,{strict:!1}),s=await e.resolve(U,t,{strict:!1});return new Ut(r,o,s,n)}run(){try{return this.handler.run()}catch(e){this.captureException(e)}}isRunnable(){try{return this.handler.isRunnable?.()??!0}catch(e){return this.captureException(e),!1}}captureException(e){const{definition:t,requestContext:r}=this;this.logger.captureException(e,{moduleName:t.moduleName,useCaseName:t.name,useCaseId:r.useCaseId})}}class Dt{constructor(e,t){this.storage=e,this.storageKey=`crons.${t}`}async setState(e){await this.storage.set(this.storageKey,JSON.stringify(e))}async getState(){const e=await this.storage.get(this.storageKey);if(!e)return{entries:[]};const t=JSON.parse(e);return function(e){return!!e&&"object"==typeof e&&(0,u.l$)(e,"entries")&&Array.isArray(e.entries)&&e.entries.every((e=>function(e){return!!e&&"object"==typeof e&&(0,u.l$)(e,"dueTimestamp")&&(0,u.l$)(e,"moduleName")&&(0,u.l$)(e,"name")&&"string"==typeof e.name&&"string"==typeof e.moduleName&&"number"==typeof e.dueTimestamp}(e)))}(t)?t:{entries:[]}}}const Nt=6e4;function Tt(e){return Math.ceil(e/Nt)*Nt}function xt(e){return Math.floor(e/Nt)*Nt}class Ft{constructor(e,t){this.infra=e,this.identifiers=t}async init(){const e=Tt(this.infra.timers.time),t=await this.infra.repository.getState(),r=this.identifiers.filter((e=>!t.entries.find((t=>t.name===e.name&&t.moduleName===e.moduleName)))).map((e=>this.infra.getCron(e))),n={entries:[...t.entries.filter((e=>this.identifiers.find((t=>t.name===e.name&&t.moduleName===e.moduleName)))),...r.map((t=>({...t.identifier,dueTimestamp:e+t.periodInMs})))]};await this.infra.repository.setState(n)}async runAllCrons(){const e=await this.infra.repository.getState(),t=Tt(this.infra.timers.time),r=xt(this.infra.timers.time),n=e.entries.filter((e=>e.dueTimestamp<=t));await Promise.allSettled(n.map((t=>this.runCron(r,e,t))))}async runCron(e,t,r){const n=this.infra.getCron(r);await n.mutex.runExclusive((async()=>{await n.isRunnable()&&(await n.run(),r.dueTimestamp=xt(e+n.periodInMs),await this.infra.repository.setState(t))}))}}const kt={run:()=>{throw new Error("Should not run")},isRunnable:()=>!1};function Lt(e){const{parameterProvider:t,token:r}=e;switch(t.type){case Mt.CLASS_PROVIDER:return{provide:r,useClass:t.useClass};case Mt.VALUE_PROVIDER:return{provide:r,useValue:t.useValue};default:(0,m.U)(t)}}r(760171);const Gt=new o.bL,Bt=new o.z;let qt=class{constructor(e,t,r){this.kv=e,this.prefix=`batch-storage.${r}.${t.userName}`}async getBatchState(e){const t=await this.kv.get(`${this.prefix}.${e}`);return t?this.stringToState(t):{queue:[]}}async setBatchState(e,t){const r=this.stateToString(t);return await this.kv.set(`${this.prefix}.${e}`,r)}stateToString(e){const t=Gt.encode(e);return Bt.encode(t)}stringToState(e){const t=Bt.decode(e);return Gt.decode(t)}};qt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([function(e,t){return function(r,n){t(r,n,e)}}(2,(0,D.Inject)(Xe)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Ae,U,String])],qt);class Ht{getProviders(e){return e.length?[...e.map((e=>({provide:e,inject:[qt,e.Definition.chunkProcessor],useFactory:(t,r)=>new e(t,r)}))),...e.map((({Definition:{chunkProcessor:e}})=>e)),qt]:[]}}const Vt=(e,t)=>({[e.name]:{name:e.name,events:t}}),$t=(e,t)=>{const{exports:r=[],imports:n=[],providers:o=[],onFrameworkInit:s=[],stores:i=[],crons:a=[]}=e,c=[s,t.onFrameworkInit??[]].flat();return{...e,exports:r.concat(t.exports??[]),imports:n.concat(t.imports??[]),providers:o.concat(t.providers??[]),onFrameworkInit:c,stores:i.concat(t.stores??[]),crons:a.concat(t.crons??[])}};function Kt(e){const{composes:t=[]}=e;e=t.reduce(((e,t)=>$t(e,t)),e);const{exports:r=[],imports:n=[],handlers:o={commands:{},events:{},queries:{}},providers:s=[],onFrameworkInit:i=[],stores:a,batchExecutors:c,crons:u}=e,d=e.api?.name??e.sharedModuleName,l=d?tt(...a??[]):[],p=d?(new Ht).getProviders(c??[]):[],f=[...s,...(u??[]).map((e=>e.handler)),...l,...p,...Object.values(o.commands),...Object.values(o.queries),...Object.values(o.events).map((e=>Object.values(e.events))).reduce(((e,t)=>[...e,...t]),new Array),...i instanceof Array?i:[i],{provide:Xe,useValue:d}],{asyncProviders:m,basicClassProviders:h}=f.reduce(((e,t)=>{return"object"==typeof(r=t)&&"token"in r&&"asyncFactory"in r&&"function"==typeof r.asyncFactory?{asyncProviders:[...e.asyncProviders,t],basicClassProviders:e.basicClassProviders}:{asyncProviders:e.asyncProviders,basicClassProviders:[...e.basicClassProviders,t]};var r}),{asyncProviders:new Array,basicClassProviders:new Array}),y=[...h,...m.map((e=>({provide:e.token,useFactory:e.asyncFactory,inject:e.inject})))],v=(0,D.Module)({exports:r,imports:n,providers:y});return t=>(Reflect.defineMetadata(jt,e,t),v(t))}let Qt=class{constructor(e,t){this.infra=e,this.lifeCycle=t}onFrameworkInit(){this.lifeCycle.addAppReadyHook((async()=>{const{stop:e}=await this.infra.start();return()=>{e()}}))}};Qt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([x(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[pt,ie])],Qt);var Wt=r(925313);let zt=class{constructor(e){this.logger=e}intercept(e,t){return t.handle().pipe((0,W.K)(this.captureException(e)))}captureException(e){return t=>{const r=e.getArgByIndex(0);return this.logger.captureException(t,{moduleName:r.module,useCaseName:r.name,useCaseId:r.context.useCaseId}),(0,Wt._)((()=>t))}}};zt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,D.Injectable)({scope:D.Scope.REQUEST}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ft])],zt);var Yt;let Jt=Yt=class{static configure(e){return{module:Yt,configurations:{sink:e.sink}}}};function Xt(e){return{type:Mt.VALUE_PROVIDER,useValue:e}}function Zt(e){return{type:Mt.CLASS_PROVIDER,useClass:e}}Jt=Yt=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([Kt({sharedModuleName:"exception-logging",providers:[ft,{provide:c.APP_INTERCEPTOR,useClass:zt},lt],configurations:{sink:{token:pt}},exports:[ft],onFrameworkInit:Qt,requiredFeatureFlips:[dt]})],Jt);const er={sink:Xt(new class{logException(){return Promise.resolve()}start(){return Promise.resolve({stop:()=>Promise.resolve()})}})};var tr=r(173656);const rr=async({appDefinition:e,channels:t,currentNode:r,implementations:d,otherModules:l=[],logger:p=new Pt,storeInfrastructureFactory:f=new se,channelsListener:m=$,timers:h=new Et,keyValueStorageInfrastructure:y=new Ue,jsonFetcher:v=new Rt,cronSource:b=new It(h),defaultDeviceStorageEncryptionCodec:g={type:Mt.CLASS_PROVIDER,useClass:o.Eu},defaultUserStorageEncryptionCodec:_={type:Mt.CLASS_PROVIDER,useClass:o.Eu},exceptionLogging:O=er})=>{const C=()=>{throw new Error("Aborted")};tr.abort=C,tr.exit=C;const S=[Jt.configure(O),...l,...Object.keys(d).map((e=>e)).map((e=>d[e]))],{configProviders:w,modules:P,modulesMetadata:E,requiredFeatureFlips:R,onFrameworkInits:j,crons:A,eventHandlers:I,stores:D}=((e,t)=>t.reduce(((t,r)=>{const n=Reflect.getMetadata(jt,r.module);if(!(o=n)||"object"!=typeof o||o.api&&!(o.api.commands&&o.api.events&&o.api.name&&o.api.queries&&o.handlers)||o.exports&&!Array.isArray(o.exports)||o.handlers&&!o.api||o.imports&&!Array.isArray(o.imports)||o.providers&&!Array.isArray(o.providers))return t;var o;n.onFrameworkInit&&(n.onFrameworkInit instanceof Array?t.onFrameworkInits=t.onFrameworkInits.concat(n.onFrameworkInit):t.onFrameworkInits.push(n.onFrameworkInit));const s=n.api?.name??n.sharedModuleName??"unnamed";t.configProviders.push(...function(e,t,r,n){if(!r.configurations)return[];const{configurations:o}=r,s=[];return Object.keys(o).forEach((e=>{const r=o[e].token,i=n.configurations?.[e];if(!i)throw new Error(`Missing '${e}' configuration for '${t}' module`);s.push({...i,provide:r})})),Object.keys(n.configurations??{}).forEach((n=>{r.configurations?.[n]||e.error(`Unknown '${n}' configuration for '${t}' module will be unused`)})),s}(e,s,n,r)),n.api?.name&&t.modulesMetadata.set(n.api.name,n),t.modules.push(r.module);const i=n.requiredFeatureFlips;return t.requiredFeatureFlips.push(...i?i.filter((e=>!t.requiredFeatureFlips.includes(e))):[]),n.crons&&t.crons.push(...n.crons.map((e=>({...e,moduleName:s})))),n.handlers?.events&&t.eventHandlers.push(...Object.values(n.handlers.events).flatMap((e=>Object.values(e.events)))),n.stores&&t.stores.push(...n.stores),t}),{configProviders:new Array,modules:new Array,modulesMetadata:new Map,requiredFeatureFlips:(0,u.Ay)([]),onFrameworkInits:new Array,crons:new Array,eventHandlers:new Array,stores:new Array}))(p,S),N=new rt;D.forEach((e=>{N.registerClass(e)})),((e,t,r)=>{const n=new Set([...r.keys()]),o=new Set(Object.values(e).filter((e=>e.main===t||e.queryOnly.includes(t))).map((e=>e.api.name))),s=[...o].filter((e=>!n.has(e))),i=[...n].filter((e=>!o.has(e)));if(s.length>0)throw new Error("These APIs are not implemented "+JSON.stringify(s));if(i.length>0)throw new Error("Some implementations do not have APIS "+JSON.stringify(i))})(e,r,E);const T=(e=>[...e.entries()].reduce(((e,[t,r])=>{const n=r.handlers?.events??{};return e[t]=Object.values(n).reduce(((e,t)=>t.name?(e[t.name]=Object.keys(t.events),e):e),(0,u.Ay)({})),e}),(0,u.Ay)({})))(E),x=new F({appDefinition:e,channels:t,channelsListener:m,currentNode:r,subscriptions:T}),k=new M(x),G=new re(x),B=new St(k,G),q=Lt({token:we,parameterProvider:g}),H=Lt({token:Pe,parameterProvider:_}),V=new ie,K=vt.create({nodeConfiguration:x,brokers:{cqrs:k,event:G},modules:P,configProviders:w,logger:p,lifeCycle:V,storeInfrastructureFactory:f,timers:h,requiredFeatureFlips:R,keyValueStorageInfrastructure:y,jsonFetcher:v,eventHandlers:I,defaultDeviceStorageEncryptionCodecProvider:q,defaultUserStorageEncryptionCodecProvider:H,storeList:N}),Q=await c.NestFactory.create(K,B,{logger:p}),W=await Q.init();await async function(e,t){const r=Object.freeze({id:-1}),n=e.map((async e=>{const n={type:ue.Init,[de.REQUEST_CONTEXT_ID]:r};t.registerRequestByContextId(n,r);const o=await t.resolve(e,r,{strict:!1});await o.onFrameworkInit()}));await Promise.all(n)}(j,W),Q.listen("");const z=B.isListening$.pipe((0,s.h)((e=>!!e)));return await(0,i.z)(z),V.addAppReadyHook((async()=>{const e=await async function(e,t,r,n,o){const s=new Ft({timers:t,repository:new Dt(n,o),getCron:t=>{const n=(({moduleName:t,name:r})=>{const n=e.find((e=>e.name===r&&e.moduleName===t));if(!n)throw new Error(`No such cron ${r} in ${t}`);return n})(t);let o;const s=async()=>{if(o)return o;const e=await async function(e,t){const r=c.ContextIdFactory.create(),n={type:ue.Cron,scope:e.scope,[de.REQUEST_CONTEXT_ID]:r};return t.registerRequestByContextId(n,r),e.scope===le.UseCaseScope.Device||(await t.resolve(U,r,{strict:!1})).userName?(async()=>{const n=await t.resolve(e.handler,r,{strict:!1});return Ut.create(t,r,n,e)})():kt}(n,r);return o=e,e};return{identifier:t,isRunnable:async()=>{const e=await s();return!e.isRunnable||await e.isRunnable()},mutex:n.mutex??new We.WU,periodInMs:60*n.periodInMinutes*1e3,run:async()=>(await s()).run()}}},e);return await s.init(),s}(A,h,W,y,r),t=b.alarm$.pipe((0,a.z)((async()=>{await e.runAllCrons()}))).subscribe();return()=>{t.unsubscribe()}})),V.addShutdownHook((()=>Q.close())),await V.startup(),{stop:()=>V.shutDown(),createClient:()=>L(e,k),sendEvent:(e,t,r,o)=>G.publishEvent(e,t,r,o??new U({useCaseId:(0,n.Z)()}))}},nr=e=>rr({...e,appDefinition:e.appDefinition,channels:{},currentNode:"node"}),or=(e,t)=>(()=>{const e=t=>({define:()=>t,with:r=>{const n={api:r.module,main:r.on,queryOnly:r.queryOnly??[]},o={[r.module.name]:n};return e({...t,...o})}});return e({})})().with({module:le.requestContextApi,on:e}).with({module:le.taskTrackingApi,on:e}),sr=or("node",[]);class ir{}var ar;!function(e){e.DummyFeatureFlip0="dummyFeatureFlip0",e.DummyFeatureFlip1="dummyFeatureFlip1",e.DummyFeatureFlip2="dummyFeatureFlip2",e.DummyFeatureFlip3="dummyFeatureFlip3",e.DummyFeatureFlip4="dummyFeatureFlip4",e.DummyFeatureFlip5="dummyFeatureFlip5"}(ar||(ar={}));class cr extends ir{constructor(e={}){super(),this.fixture=e}async getFeatureFlipsForActiveUser(e){const t=e.reduce(((e,t)=>t in this.fixture?{...e,[t]:this.fixture[t]}:{...e}),{});return await Promise.resolve(t)}}let ur=class extends o.eN{constructor(e){super(e)}};ur=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([T(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[o.jN])],ur);let dr=class{};function lr(e){const t=T();return r=>{Reflect.defineMetadata("dl-handler",r,e),t(r)}}dr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([Kt({providers:[ur],configurations:{infrastructure:{token:o.jN}},exports:[ur],sharedModuleName:"http"})],dr);const pr=e=>"object"==typeof e&&null!==e&&(0,u.l$)(e,"swStartTime")&&(0,u.l$)(e,"taskTrackingList")&&"string"==typeof e.swStartTime&&"object"==typeof e.taskTrackingList;class fr extends(Ve({persist:!1,initialValue:{swStartTime:"",taskTrackingList:{}},scope:le.UseCaseScope.Device,storeName:"task-tracking",storeTypeGuard:pr,capacity:$e._001KB})){}let mr=class{constructor(e){this.store=e}async execute({body:e}){const t=(new Date).toISOString(),{taskName:r,feature:n,businessDomain:o}=e,s={taskName:r,feature:n,businessDomain:o,startTime:t,serviceWorkerInterruptionCount:0},i=await this.store.getState();return await this.store.set({...i,taskTrackingList:{...i.taskTrackingList,[t]:s}}),Promise.resolve((0,pe.Vp)({id:t}))}};mr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([lr(le.StartTaskTrackingCommand),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[fr])],mr);var hr=r(453576),yr=r(511494);class vr{constructor(e){this.publishEvent=(e,t,r,n)=>this.broker.publishEvent(e,t,r,n),this.broker=new re(e);const t=e.getModuleNames().reduce(((t,r)=>({...t,[r]:Object.keys(e.appDefinition[r].api.events).reduce(((e,t)=>(e[t]=[],e)),(0,u.Ay)({}))})),(0,u.Ay)({}));this.localSubscribersMap=Object.keys(e.subscriptions).map((e=>e)).reduce(((t,r)=>{const n=e.subscriptions[r];return Object.keys(n).map((e=>e)).forEach((e=>{const o=n[e]??[],s=t[e];o.forEach((e=>{s[e].push(r)}))})),t}),t)}connect(e){const{localSubscribersMap:t,broker:r}=this;return r.connect({onLocalEvent:async(r,n,o,s,i,a)=>{const c=t[r][o];await Promise.all(c.map((async t=>{await e.onEvent(r,t,o,s,i,a)})))}})}}var br=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},gr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_r=function(e,t){return function(r,n){t(r,n,e)}};let Or=class{constructor(e,t,r){this.apiName=e,this.broker=t,this.context=r}sendEvent(e,t){return this.broker.publishEvent(this.apiName,e,t,this.context)}};Or=br([T(),_r(0,(0,D.Inject)(Xe)),gr("design:paramtypes",[Object,re,U])],Or);let Cr=class{constructor(e,t){this.apiName=e,this.broker=t}sendEvent(e,t,r){return this.broker.publishEvent(this.apiName,e,t,r??new U({useCaseId:(0,n.Z)()}))}};Cr=br([T(),_r(0,(0,D.Inject)(Xe)),gr("design:paramtypes",[Object,re])],Cr);const Sr=()=>{const e=(t,r)=>{const o=new F({appDefinition:t,channels:{},channelsListener:$,currentNode:"",subscriptions:{}}),s=new M(o);let i;const a=()=>{if(i)return i;const e=s.connect({onCommand:(e,t,n)=>{if(!(e in r))throw new Error(`${e} is not mocked`);return r[e].commands[t](n)},onQuery:(e,t,n)=>{if(!(e in r))throw new Error(`${e} is not mocked`);return r[e].queries[t](n)}});return i=e.start(),i};return{buildClient:async e=>{const t=new q(s,o,e??new U({useCaseId:(0,n.Z)()}));return await a(),t},buildContextlessClient:async()=>{const e=new H(o,s);return await a(),e},withMock:(n,o)=>{const s={...t,...(0,u.Ay)({[n.name]:{api:n,main:"",queryOnly:[]}})};return e(s,{...r,[n.name]:o})}}};return e({},{})};function wr({appDefinition:e,channels:t,channelsListener:r}){const n=new F({appDefinition:e,channels:t,channelsListener:r,currentNode:null,subscriptions:{}}),o=new M(n),s=()=>{throw new Error("Unexpected request received by detached application client")};return o.connect({onCommand:s,onQuery:s}).start(),L(e,o)}var Pr=r(27149);async function Er(e,t=1e4){if(!(0,Pr.b)(e))throw new Error("Error in getQueryValue: the argument is not an observable");try{return await(0,i.z)(e.pipe((0,Q.V)({first:t})))}catch(e){throw new Error("Error in getQueryValue: "+e)}}let Rr=class{constructor(e,t,r){this.store=e,this.cqrsClient=t,this.appLifecycle=r}onFrameworkInit(){this.appLifecycle.addAppReadyHook((async()=>{const e=await this.store.getState(),t={...e.taskTrackingList},r=Object.keys(e.taskTrackingList).map((async r=>{const{taskName:n,feature:o,businessDomain:s,startTime:i}=e.taskTrackingList[r],a=new yr.UserMv3ExtensionTaskInterruptionEvent({businessDomain:s,feature:o,taskName:n,taskStartDateTime:i,serviceWorkerStartDateTime:e.swStartTime}),c=this.cqrsClient.getClient(hr.carbonLegacyApi);await c.commands.carbon({name:"logEvent",args:[{event:a}]}),delete t[r]}));await Promise.all(r),await this.store.set({swStartTime:(new Date).toISOString(),taskTrackingList:t})}))}};Rr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([x(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[fr,q,ie])],Rr);let jr=class{constructor(e,t,r){this.store=e,this.cqrsClient=t,this.logger=r}async execute({body:e}){const{taskTrackingId:t}=e,r=await this.store.getState(),n=r.taskTrackingList[t];if(!n)return this.logger.trace("Trying to track a task that does not exist"),(0,pe.Vp)(void 0);const{taskName:o,feature:s,businessDomain:i,startTime:a,serviceWorkerInterruptionCount:c}=n,u=new yr.UserMv3ExtensionTaskReportEvent({businessDomain:i,feature:s,serviceWorkerInterruptionCount:c,serviceWorkerStartDateTime:r.swStartTime,taskName:o,taskStartDateTime:a,taskEndDateTime:(new Date).toISOString()}),d=this.cqrsClient.getClient(hr.carbonLegacyApi);await d.commands.carbon({name:"logEvent",args:[{event:u}]});const l={...r.taskTrackingList};return delete l[t],await this.store.set({swStartTime:r.swStartTime,taskTrackingList:l}),(0,pe.Vp)(void 0)}};jr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([lr(le.TerminateTaskTrackingCommand),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[fr,q,ae])],jr);let Ar=class{};function Ir(e){const t=T();return r=>{Reflect.defineMetadata("dl-handler",r,e),t(r)}}function Mr(e){const t=T();return r=>{if(Reflect.hasMetadata("dl-handlers",e)){const t=Reflect.getMetadata("dl-handlers",e);Reflect.defineMetadata("dl-handlers",[...t,r],e)}else Reflect.defineMetadata("dl-handlers",[r],e);t(r)}}Ar=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([Kt({api:le.taskTrackingApi,handlers:{commands:{startTaskTracking:mr,terminateTaskTracking:jr},events:{},queries:{}},stores:[fr],onFrameworkInit:Rr,providers:[]})],Ar);var Ur=r(734987);const Dr=e=>!(!e||"object"!=typeof e)&&"userName"in e,Nr=e=>!(!e||"object"!=typeof e)&&"featureFlips"in e;class Tr extends(Ve({initialValue:{userName:void 0},persist:!1,scope:le.UseCaseScope.Device,storeName:"active-user-store",storeTypeGuard:Dr,capacity:$e._001KB})){}class xr extends(Ve({persist:!0,scope:le.UseCaseScope.Device,storeName:"feature-flip-store",capacity:$e._001KB,codec:o.Eu,storage:{initialValue:{featureFlips:{}},schemaVersion:1,typeGuard:Nr}})){}let Fr=class extends Or{};Fr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([T()],Fr);var kr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},Lr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Gr=class{constructor(e){this.activeUserStore=e}execute(){return this.activeUserStore.state$.pipe((0,p.U)((e=>e.userName)),(0,P.x)(),(0,p.U)((e=>(0,pe.Vp)({userName:e}))))}};Gr=kr([Ir(le.ActiveUserQuery),Lr("design:paramtypes",[Tr])],Gr);const Br=new We.WU;let qr=class{constructor(e,t,r,n){this.featureFlipsStore=e,this.config=t,this.activeUserStore=r,this.allowedToFail=n,this.retrieveAndSetFeatureFlips=async e=>0===e.length?Promise.resolve({}):await Br.runExclusive((async()=>{if(!(await(0,i.z)(this.activeUserStore.state$)).userName)return{};const t=await this.featureFlipsStore.getState(),r=e.reduce(((e,r)=>{if(r in t.featureFlips){const n={};return n[r]=t.featureFlips[r],{...e,...n}}return e}),{}),n=e.filter((e=>!(e in r)));if(0===n.length)return r;const o=await(async e=>{let t={};return await this.allowedToFail.doOne((async()=>{t=await this.config.getFeatureFlipsForActiveUser(e)})),t})(n);return await this.featureFlipsStore.set({...t,featureFlips:{...t.featureFlips,...o}}),{...r,...o}}))}execute(e){return this.featureFlipsStore.state$.pipe((0,Ur.b)((()=>this.retrieveAndSetFeatureFlips(e.body.requiredFeatureFlips))),(0,p.U)((e=>(0,pe.Vp)(e))))}};qr=kr([Ir(le.UserFeatureFlipsQuery),Lr("design:paramtypes",[xr,ir,Tr,mt])],qr);let Hr=class{constructor(e){this.featureFlipsStore=e}execute(){return(0,l.D)(this.featureFlipsStore.state$.pipe((0,p.U)((e=>(0,pe.Vp)({cachedFeatureFlips:Object.keys(e.featureFlips)})))))}};Hr=kr([Ir(le.GetCachedFeatureFlipsListQuery),Lr("design:paramtypes",[xr])],Hr);let Vr=class{constructor(e){this.featureFlipsStore=e}async execute({body:{featureFlips:e}}){return await this.featureFlipsStore.set({featureFlips:e}),(0,pe.Vp)(void 0)}};Vr=kr([lr(le.SetFeatureFlipsInStoreCommand),Lr("design:paramtypes",[xr])],Vr);let $r=class{constructor(e,t){this.activeUserStore=e,this.eventEmitter=t}async execute({body:{userName:e}}){return await this.activeUserStore.set({userName:e}),this.eventEmitter.sendEvent("activeUserChanged",{userName:e}),(0,pe.Vp)(void 0)}};$r=kr([lr(le.SetActiveUserCommand),Lr("design:paramtypes",[Tr,Fr])],$r);let Kr=class{};Kr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([Kt({api:le.requestContextApi,handlers:{commands:{setActiveUser:$r,setFeatureFlipsInStore:Vr},events:{},queries:{activeUser:Gr,userFeatureFlips:qr,getCachedFeatureFlipsList:Hr}},stores:[Tr,xr],configurations:{featureFlipsConf:{token:ir}},providers:[Fr]})],Kr);const Qr=16,Wr=.5,zr=1.3;function Yr(e){var t;const{chunkControl:{decrement:r=Wr,increment:n=zr,initialSize:o=Qr}={decrement:Wr,increment:zr,initialSize:Qr}}=e,s=new We.WU;return(t=class{constructor(e,t){this.repository=e,this.processor=t}async dispatchBatch(e){await s.runExclusive((async()=>{const t=await this.pushItemsInQueue(e);for(;t.queue.length>0;)await this.processOneChunkFromQueue(t)}))}async pushItemsInQueue(t){const r=await this.repository.getBatchState(e.name),n=t.filter((e=>!r.queue.find((t=>t===e))));return n.length&&(r.queue.push(...n),await this.repository.setBatchState(e.name,r)),r}async processOneChunkFromQueue(t){const s=function(e){const{lastStartedChunkFirstId:t,lastStartedChunkSize:s=o}=e;if(!t)return o;const i=!e.queue.find((e=>e===t));return Math.max(1,i?Math.ceil(s*n):Math.floor(s*r))}(t),i=Math.min(s,t.queue.length);if(!i)throw new Error("Should have something to process");await this.repository.setBatchState(e.name,{...t,lastStartedChunkSize:i,lastStartedChunkFirstId:t.queue[0]});const a=t.queue.splice(0,i);await this.processor.processChunk(a),await this.repository.setBatchState(e.name,t)}}).Definition=e,t}},468224:(e,t,r)=>{r.r(t),r.d(t,{ActiveUserChangedEvent:()=>C,ActiveUserQuery:()=>v,CommandMessage:()=>i,EMPTY_QUERY_RESULT:()=>u,EventMessage:()=>h,FilterOperationName:()=>s,GetCachedFeatureFlipsListQuery:()=>g,PAGINATION_START_PAGE_INDEX:()=>c,QueryMessage:()=>a,SetActiveUserCommand:()=>_,SetFeatureFlipsInStoreCommand:()=>O,StartTaskTrackingCommand:()=>P,TerminateTaskTrackingCommand:()=>E,UseCaseScope:()=>o,UserFeatureFlipsQuery:()=>b,appClientMockBuilder:()=>j,defineCarbonCommand:()=>p,defineCommand:()=>l,defineEvent:()=>y,defineModuleApi:()=>m,defineQuery:()=>d,featureFlipsApi:()=>w,requestContextApi:()=>S,taskTrackingApi:()=>R});class n{}var o,s;!function(e){e.User="user",e.Device="device"}(o||(o={}));class i extends n{constructor(e){super(),this.body=e}}class a extends n{constructor(e){super(),this.body=e}}!function(e){e.Equals="equals",e.Differs="differs",e.Matches="matches",e.In="in",e.Contains="contains"}(s||(s={}));const c=1,u={items:[],itemCount:0,page:c,pageCount:1},d=(e={scope:o.User})=>{var t;return(t=class extends a{}).metadata=e,t},l=(...[e={scope:o.User}])=>{var t;return(t=class extends i{}).metadata=e,t},p=(e={scope:o.User})=>{var t;return(t=class extends i{}).metadata=e,t},f=(e,t)=>Object.entries(e).reduce(((e,[r,n])=>(e[((e,t)=>e.endsWith(t)?e.charAt(0).toLowerCase()+e.substring(1,e.length-t.length):e)(r,t)]=n,e)),{}),m=e=>({name:e.name,commands:f(e.commands,"Command"),queries:f(e.queries,"Query"),events:f(e.events,"Event"),requiredFeatureFlips:e.requiredFeatureFlips||[]});class h{constructor(e){this.body=e}}const y=(e={scope:o.User})=>{var t;return(t=class extends h{}).metadata=e,t};class v extends(d({scope:o.Device})){}class b extends(d({scope:o.Device})){}class g extends(d({scope:o.Device})){}class _ extends(l({scope:o.Device})){}class O extends(l({scope:o.Device})){}class C extends(y({scope:o.Device})){}const S=m({commands:{SetActiveUserCommand:_,SetFeatureFlipsInStoreCommand:O},events:{activeUserChanged:C},name:"requestContext",queries:{ActiveUserQuery:v,UserFeatureFlipsQuery:b,GetCachedFeatureFlipsListQuery:g}}),w=m({commands:{},events:{},name:"featureFlips",queries:{}});class P extends(l({scope:o.Device})){}class E extends(l({scope:o.Device})){}const R=m({name:"taskTracking",commands:{startTaskTracking:P,terminateTaskTracking:E},events:{},queries:{}}),j=()=>{const e=new Map,t={withModule:(r,n)=>{const o="string"==typeof r?r:r.name;return e.set(o,n),t},build:()=>Array.from(e.keys()).reduce(((t,r)=>({...t,[r]:e.get(r)})),{})};return t}},938096:(e,t,r)=>{r.d(t,{Yu:()=>i});var n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}class s extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}const i=(0,n.defineModuleApi)({commands:{TrackEventCommand:o,TrackPageViewCommand:s},events:{},name:"analytics",queries:{}});var a=r(932839),c=r(287279),u=r(453576);let d=class{constructor(e){this.cqrsClient=e}async trackEvent(e){const{carbon:t}=this.cqrsClient.getClient(u.carbonLegacyApi).commands,r=await t({name:"logEvent",args:[{event:e}]});if((0,c.hx)(r))throw new Error("TrackEvent from carbon failed")}async trackPageView(e,t){const{carbon:r}=this.cqrsClient.getClient(u.carbonLegacyApi).commands,n=await r({name:"logPageView",args:[{pageView:e,browseComponent:t}]});if((0,c.hx)(n))throw new Error("TrackPageView from carbon failed")}};d=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient])],d);var l=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let f=class{constructor(e){this.analyticsService=e}async execute({body:{event:e}}){return await this.analyticsService.trackEvent(e),(0,c.Vp)(void 0)}};f=l([(0,a.CommandHandler)(o),p("design:paramtypes",[d])],f);let m=class{constructor(e){this.analyticsService=e}async execute({body:{pageView:e,browseComponent:t}}){return await this.analyticsService.trackPageView(e,t),(0,c.Vp)(void 0)}};m=l([(0,a.CommandHandler)(s),p("design:paramtypes",[d])],m);let h=class{};h=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({api:i,providers:[d],handlers:{commands:{trackEvent:f,trackPageView:m},events:{},queries:{}}})],h);let y=class{constructor(e){this.crypto=e}};y=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],y);let v=class{constructor(e){this.config=e}async derive(e,t,r){const{deriveKeyArgon2d:n}=this.config.crypto;return await n(e,t,r)}};v=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],v);var b=r(660354);let g=class extends b.SD{};g=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)()],g);let _=class{constructor(e,t){this.config=e,this.derivationCache=t}decrypt(e,t){return(0,b.FO)(e,this.config.crypto,this.derivationCache,t)}};_=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y,g])],_);let O=class{constructor(e,t){this.config=e,this.derivationCache=t}async encrypt(e,t,r,n,o){return await(0,b.gi)(e,this.config.crypto,r,this.derivationCache,n,t,o)}};O=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y,g])],O);let C=class{constructor(e){this.config=e}async sign(e,t,r=b.x4){const{signHmacSha:n}=this.config.crypto;return await n(e,t,r)}};C=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],C);let S=class{constructor(e){this.config=e}async verify(e,t,r,n=b.x4){const{verifyHmacSha:o}=this.config.crypto;return await o(e,t,r,n)}};S=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],S);let w=class{constructor(e){this.config=e}generate(){const{generateKeyAes256:e}=this.config.crypto;return e()}};w=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],w);let P=class{constructor(e){this.config=e}decrypt(e,t){return(0,b.Ic)(e,this.config.crypto,t)}};P=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],P);let E=class{constructor(e){this.config=e}encrypt(e,t){const{getRandomValues:r}=this.config.crypto,n={padding:r(b.BU.padding)};return(0,b.yL)(e,this.config.crypto,b.oo,b.BU,t,n)}};function R(){return new Uint32Array([57920321,977424202,1999259334,3390546403,3917439743,16505144,3027631148,3235565160,2643335823,1420105356,998514539,2704347781,1011257802,823882961,790991339,3929284516]).buffer}E=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],E);let j=class{constructor(e){this.flexibleDecryptor=e}async decrypt(e){const t=R();return await this.flexibleDecryptor.decrypt(t,e)}};j=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[_])],j);var A=r(89685);let I=class{constructor(e){this.flexibleEncryptor=e}async encrypt(e){const t=R();return await this.flexibleEncryptor.encrypt(t,e,b.oo,b.gO)}};I=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[O])],I);let M=class{constructor(e,t){this.obfuscationKeyDecryptor=e,this.obfuscationKeyEncryptor=t}async encode(e){return await this.obfuscationKeyEncryptor.encrypt(e)}async decode(e){return(0,A.v)(e).startsWith("$1$noderivation$aes256$cbchmac64$16$")?await this.obfuscationKeyDecryptor.decrypt(e):e}};M=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[j,I])],M);let U=class{constructor(e){this.config=e}decrypt(e,t,r="SHA-256"){const{decryptRsaOaep:n}=this.config.crypto;return n(e,t,r)}};U=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],U);let D=class{constructor(e){this.config=e}encrypt(e,t,r="SHA-256"){const{encryptRsaOaep:n}=this.config.crypto;return n(e,t,r)}};D=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],D);let N=class{constructor(e){this.config=e}generate(e="SHA-256"){const{generateKeyPairRsaOaep:t}=this.config.crypto;return t(e)}};N=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],N);let T=class{constructor(e){this.config=e}async sign(e,t,r="SHA-256"){const{signRsassaPkcs1:n}=this.config.crypto;return await n(e,t,r)}};T=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],T);let x=class{constructor(e){this.config=e}async compute(e,t){const{computeHash:r}=this.config.crypto;return await r(e,t)}};x=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],x);let F=class{constructor(e){this.config=e}compute(e){const{unsafeComputeMd5Hash:t}=this.config.crypto;return t(e)}};F=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],F);let k=class{constructor(e){this.config=e}get(e){const{getRandomValues:t}=this.config.crypto;return t(e).buffer}};k=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],k);let L=class{};L=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({sharedModuleName:"cryptography",configurations:{infrastructure:{token:y}},providers:[v,g,_,O,C,S,w,P,E,j,M,I,k,U,D,N,T,x,F],exports:[v,g,_,O,C,S,w,P,E,j,M,I,k,U,D,N,T,x,F]})],L);let G=class{constructor(e,t){this.config=e,this.derivationCache=t}decrypt(e,t){return(0,b.Jo)(e,this.config.crypto,this.derivationCache,t)}};G=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y,g])],G);var B=r(160399),q=r(948844),H=r(828489);let V=class{constructor(e){this.cqrsClient=e}getPlatformInfo(){const{queries:{carbonState:e}}=this.cqrsClient.getClient(u.carbonLegacyApi);return(0,B.z)(e({path:"device.platform.info"}).pipe((0,q.nb)({success:e=>{if(!function(e){return!(!(e&&"object"==typeof e&&(0,H.l$)(e,"platformName")&&(0,H.l$)(e,"appVersion")&&(0,H.l$)(e,"browser")&&(0,H.l$)(e,"browserVersion")&&(0,H.l$)(e,"country")&&(0,H.l$)(e,"osCountry")&&(0,H.l$)(e,"osVersion")&&(0,H.l$)(e,"os")&&(0,H.l$)(e,"lang"))||(0,H.l$)(e,"anonymousApplicationId")&&"string"!=typeof e.anonymousApplicationId||"string"!=typeof e.platformName||"string"!=typeof e.appVersion||"string"!=typeof e.browser||"string"!=typeof e.browserVersion||"string"!=typeof e.country||"string"!=typeof e.osCountry||"string"!=typeof e.osVersion||"string"!=typeof e.os||"string"!=typeof e.lang)}(e))throw new Error("Invalid platform info received from carbon");return e},failure:()=>{throw new Error("Unexpected error")}})))}};V=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient])],V);let $=class{};$=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({providers:[V],exports:[V],sharedModuleName:"platformInfo"})],$);var K=r(734987),Q=r(661348),W=r(610350);class z{constructor(e){this.store=e}async getServerToClientClockDrift(){const{drift:e}=await this.store.getState();return e}storeServerToClientClockDrift(e){return this.store.update((()=>({drift:e})))}}class Y{constructor(e){this.baseUrl=e.baseUrl,this.appKeys=e.appKeys}}class J{}const X={drift:null},Z=e=>!(!e||"object"!=typeof e||!(0,H.l$)(e,"drift")||e.drift&&"number"!=typeof e.drift);class ee extends((0,a.defineStore)({storeTypeGuard:Z,storeName:"ClockSyncStore",scope:n.UseCaseScope.Device,initialValue:X,isCache:!1,persist:!1,capacity:a.StoreCapacity._001KB})){}const te={v1:{accountrecovery:W.uF,authentication:W.Vy,darkwebmonitoring:W.Dw,features:W.AN,file:W.$B,payments:W.H4,pwleak:W.JM,sharingUserdevice:W.bo,teams:W.pd,time:W.qp,useractivity:W.Vk}};let re=class{constructor(e,t,r,n,o,s){this.serverApiConfig=e,this.httpClient=t,this.store=r,this.hmacSigner=n,this.secureHasher=o,this.platformInfoService=s}async init(){const{serverApiConfig:e,secureHasher:t,httpClient:r,hmacSigner:n,store:o}=this,s=new z(o),i=await this.platformInfoService.getPlatformInfo(),{appKeys:a,baseUrl:c}=e;this.rawSdk=(0,Q.Y)({secureHasher:t,httpClient:r,timeSyncStore:s,hmacSigner:n,apis:te,config:{appKeys:a,baseUrl:c,platformInfo:{platformName:i.platformName,version:i.appVersion,osversion:i.osVersion,language:i.lang}}})}get sdk(){if(!this.rawSdk)throw new Error("ConfiguredServerSdk not initialized");return this.rawSdk}};re=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Y,a.HttpClient,ee,C,x,V])],re);var ne=r(87065);let oe=class{constructor(e,t){this.cqrsClient=e,this.infra=t}getActiveUserDeviceCredentials(){const{queries:{activeUser:e}}=this.cqrsClient.getClient(n.requestContextApi);return e().pipe((0,ne.U)((e=>{if((0,c.d6)(e))return(0,c.db)(e);throw new Error("Failed to get active user")})),(0,K.b)((({userName:e})=>{if(!e)throw new Error("No active user available");return this.infra.getDeviceCredentialsForUser(e)})))}};oe=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient,J])],oe);let se=class{constructor(e,t){this.appliedV1Services=this.buildInjectedServices("v1",e.sdk),this.credentialsService=t}get v1(){return this.appliedV1Services}buildInjectedServices(e,t){return Object.keys(t[e]).reduce(((r,n)=>({...r,[n]:this.buildInjectedApiServices(e,t,n)})),{})}buildInjectedApiServices(e,t,r){return Object.getOwnPropertyNames(Object.getPrototypeOf(t.v1[r])).filter((e=>"constructor"!==e)).reduce(((n,o)=>({...n,[o]:this.buildInjectedRouteService(t,e,r,o)})),{})}buildInjectedRouteService(e,t,r,n){const o=W.tA[r][n];if(!o)throw new Error("Unable to find endpoint descriptor");const{authType:s}=o;return(...o)=>{const i=e[t][r],a=i[n].bind(i);if(s===Q.d.USER_DEVICE)return this.credentialsService.getActiveUserDeviceCredentials().pipe((0,K.b)((e=>a(e,...o))));if([Q.d.NONE,Q.d.APP].includes(s))return a(...o);throw new Error("Not supported")}}};se=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[re,oe])],se);let ie=class{constructor(e){this.configuredServerSdk=e}get v1(){return this.configuredServerSdk.sdk.v1}};ie=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[re])],ie);let ae=class{};ae=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({providers:[ie,se,oe,{token:re,asyncFactory:async(e,t,r,n,o,s)=>{const i=new re(e,t,r,n,o,s);return await i.init(),i},inject:[Y,a.HttpClient,ee,C,x,V]}],exports:[ie,se],configurations:{serverApi:{token:Y},serverApiInfrastructure:{token:J}},stores:[ee],sharedModuleName:"webServices",imports:[L,a.HttpModule,$]})],ae);var ce=r(220195);let ue=class extends a.FeatureFlipsServiceAbstract{constructor(e){super(),this.serverApiClient=e}getFeatureFlipsForActiveUser(e){return(0,B.z)(this.serverApiClient.v1.features.getAndEvaluateForUser({features:e}).pipe((0,q.nb)({success:t=>{const r=new Set(t.data.enabledFeatures);return e.reduce(((e,t)=>({...e,[t]:r.has(t)})),{})},failure:ce.j})))}cleanOutDeletedFeatureFlips(e){return(0,B.z)(this.serverApiClient.v1.features.listAvailableFeatureFlips({}).pipe((0,q.nb)({success:t=>{const r=Object.fromEntries(t.data.features.map((e=>[e.name,e.archived])));return Array.from(e.reduce(((e,t)=>(t in r&&e.add(t),e)),new Set))},failure:()=>e})))}};ue=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[se])],ue);let de=class{constructor(e,t,r,o){this.getCachedFeatureFlipsList=async()=>{const e=await(0,B.z)(this.requestContextApi.queries.getCachedFeatureFlipsList());return(0,c.d6)(e)?e.data.cachedFeatureFlips:[]},this.featureFlipsService=e,this.requestContextApi=t.getClient(n.requestContextApi),this.requestContext=r,this.allowedToFail=o}async handle(e){await this.allowedToFail.doOne((()=>this.unsafeHandle(e)))}async unsafeHandle({body:e}){if(!e.userName)return await this.requestContextApi.commands.setFeatureFlipsInStore({featureFlips:{}}),Promise.resolve();const t=this.requestContext.requiredFeatureFlips??[],r=await this.getCachedFeatureFlipsList(),n=await this.featureFlipsService.cleanOutDeletedFeatureFlips([...t,...r]),o={...await this.featureFlipsService.getFeatureFlipsForActiveUser(n)};return await this.requestContextApi.commands.setFeatureFlipsInStore({featureFlips:o}),Promise.resolve()}};de=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.EventHandler)(n.ActiveUserChangedEvent),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ue,a.ContextLessCqrsClient,a.RequestContext,a.AllowedToFail])],de);let le=class{};le=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({api:n.featureFlipsApi,providers:[ue],imports:[ae],exports:[ue],handlers:{commands:{},queries:{},events:{...(0,a.useEventsOfModule)(n.requestContextApi,{activeUserChanged:de})}}})],le);var pe=r(625859),fe=r(536414),me=r(530523),he=r(907537),ye=r(227257);let ve=class{constructor(){this.filesToCheck={},this.publishSubscriber=new he.t,this.updatedFileStream$=new ye.y((e=>{this.publishSubscriber.next(e),this.publishSubscriber.complete()}))}publish(e){(0,B.z)(this.publishSubscriber).then((t=>t.next(e)))}fileSubscription(e){return this.filesToCheck={...this.filesToCheck,...e},this.updatedFileStream$}getFilesToCheck(){return this.filesToCheck}};ve=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],ve);var be=r(511494),ge=r(69885);class _e{}class Oe{}class Ce{}const Se="update_available",we=new Set([Se,"not_updated","not_found","error_server"]);const Pe=e=>e[1].status===Se;let Ee=class extends _e{constructor(e,t){super(),this.httpClient=e,this.serverApiClient=t}async downloadRemoteFileUpdate(e){const t=await this._getFileMeta(e);return(0,c.hx)(t)?[(0,ge.of)(t)]:this._retrieveFilesFromServer((0,c.db)(t))}_getFileMeta(e){return(0,B.z)(this.serverApiClient.v1.file.getFileMeta(e).pipe((0,ne.U)((e=>{if((0,c.hx)(e))return(0,c.Rn)(be.RemoteFileUpdateError.ServerError);const t=(0,c.db)(e);return r=t.data,Object.values(r).every((e=>"object"==typeof e&&void 0!==e.status&&we.has(e.status)))?(0,c.Vp)(t.data):(0,c.Rn)(be.RemoteFileUpdateError.ServerError);var r}))))}_retrieveFilesFromServer(e){return Object.entries(e).filter(Pe).map((([e,t])=>this._getBufferFromURL(e,t)))}_getBufferFromURL(e,t){return this.httpClient.get(t.url,{observe:"body",responseType:"arraybuffer"}).pipe((0,ne.U)((r=>(0,c.d6)(r)?(0,c.Vp)({fileName:e,buffer:(0,c.db)(r),updatedFile:t}):(0,c.Rn)(be.RemoteFileUpdateError.DownloadError))))}};Ee=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.HttpClient,se])],Ee);const Re="coreAnalysis_web_rfuInGraphene_prod";let je=class{constructor(e,t,r,n){this.appLogger=e,this.cqrsClient=t,this.remoteFileUpdateService=r,this.dispatcherService=n}async run(){const{userFeatureFlips:e}=this.cqrsClient.getClient(n.requestContextApi).queries,t=await(0,B.z)(e({requiredFeatureFlips:[Re]}));if((0,c.hx)(t))return;if(!t.data[Re])return;const r=this.dispatcherService.getFilesToCheck();this.remoteFileUpdateService.observeRemoteFileUpdates(r).subscribe((e=>{this.dispatcherService.publish(e)})),this.remoteFileUpdateService.downloadAndDecipherRemoteFiles()}};je=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.AppLogger,a.CqrsClient,Ce,ve])],je);let Ae=class extends Oe{constructor(e,t){super(),this.cqrsClient=e,this.appLogger=t}async decipher(e,t){const{carbon:r}=this.cqrsClient.getClient(u.carbonLegacyApi).commands,n=await r({name:"decipherRemoteFile",args:[{cipheredFileContent:e,fileMetaData:t}]});if((0,c.hx)(n))return(0,c.Rn)(be.RemoteFileUpdateError.DecipherError);const{carbonResult:o}=(0,c.db)(n);return(e=>"object"==typeof e&&null!==e&&Object.entries(e).some((([e,t])=>"decipheredFile"===e&&t instanceof ArrayBuffer)))(o)?(0,c.Vp)(o.decipheredFile):(0,c.Rn)(be.RemoteFileUpdateError.DecipherError)}};Ae=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient,a.AppLogger])],Ae);var Ie=r(991501);let Me=class extends Ce{constructor(e,t,r,n){super(),this.appLogger=e,this.rfuDownloaderService=t,this.rfuDecipheringService=r,this.cqrsClient=n,this._filesToCheck={},this._emitDownloadedFilesUpdate$=new he.t,this._downloadedFileStream$=new ye.y((e=>{this._emitDownloadedFilesUpdate$.next((t=>{e.next(t)})),this._emitDownloadedFilesUpdate$.complete()}))}observeRemoteFileUpdates(e){return this._filesToCheck={...this._filesToCheck,...e},this._downloadedFileStream$}async downloadAndDecipherRemoteFiles(){const e=(await this.rfuDownloaderService.downloadRemoteFileUpdate(this._filesToCheck)).map((e=>this._downloadAndDecipherSingleFile(e)));(0,Ie.D)(e).subscribe((e=>{const t=e.reduce(((e,t)=>{if((0,c.hx)(t))return this.sendRFUEvents(be.FlowStep.Error,(0,c.Yv)(t)),e;const r=(0,c.db)(t);return this.sendRFUEvents(be.FlowStep.Complete),{...e,[r.fileName]:r}}),{});this._callEmitDownloadedFilesUpdate(t)}))}async _applyDecipheringStep(e){const t=e.updatedFile.key?await this.rfuDecipheringService.decipher(e.buffer,e.updatedFile):(0,c.Vp)(e.buffer);return(0,c.d6)(t)?(0,c.Vp)({...e,buffer:(0,c.db)(t)}):t}_downloadAndDecipherSingleFile(e){return e.pipe((0,fe.z)((e=>(0,c.d6)(e)?this._applyDecipheringStep((0,c.db)(e)):Promise.resolve(e))),(0,ne.U)((e=>{if((0,c.hx)(e))return e;const{fileName:t,updatedFile:r,buffer:n}=(0,c.db)(e);return(0,c.Vp)({fileName:t,revision:r.revision,buffer:n,lastDownloadTimestamp:Date.now()})})))}_callEmitDownloadedFilesUpdate(e){return(0,B.z)(this._emitDownloadedFilesUpdate$).then((t=>{t(e)}))}sendRFUEvents(e,t=undefined){const{trackEvent:r}=this.cqrsClient.getClient(i).commands;r({event:new be.UserReceiveRemoteFileUpdateEvent({flowStep:e,remoteFileUpdateError:t,packageSource:be.PackageSource.Graphene})})}};Me=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.AppLogger,Ee,Ae,a.CqrsClient])],Me);let Ue=class{};Ue=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({sharedModuleName:"RemoteFileUpdateModule",configurations:{remoteFileUpdateInfrastructure:{token:Ce},remoteFileUpdateDownloaderInfrastructure:{token:_e},decipherInfrastructure:{token:Oe}},crons:[{handler:je,periodInMinutes:30,name:"cron",scope:n.UseCaseScope.User}],providers:[Me,Ae,Ee,ve],imports:[le,a.HttpModule,ae,h],exports:[Me,Ae,Ee,ve],requiredFeatureFlips:["coreAnalysis_web_rfuInGraphene_prod"]})],Ue);let De=class{constructor(e){this.rfuClient=e}onFrameworkInit(){this.rfuClient.initFileObservation()}};De=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.FrameworkInit)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[class{constructor(e,t,r,n){this.settings=e,this.store=t,this.appLogger=r,this.rfuDispatcher=n;const{fileName:o}=e;this.jsonSerializerCodec=new b.bL,this.newlyUpdatedFiles$=(0,pe.P)((async()=>{const e=await this.store.getState();return{[o]:e.revision}})).pipe((0,fe.z)((e=>this.rfuDispatcher.fileSubscription(e))))}initFileObservation(){this.newlyUpdatedFiles$.subscribe(this._handleRFUDownload.bind(this))}streamFileUpdate(){return this.store.state$.pipe((0,ne.U)((e=>e.data)),(0,me.h)((e=>this.settings.typeguard(e))))}async _handleRFUDownload(e){const{fileName:t}=this.settings;if(!(t in e))return;const r=e[t],n=this.jsonSerializerCodec.decode(r.buffer);this.settings.typeguard(n)&&(await this.store.set({filename:r.fileName,data:n,revision:r.revision,lastDownloadTimestamp:r.lastDownloadTimestamp}),this.rfuDispatcher.fileSubscription({[t]:r.revision}))}}])],De);var Ne,Te=r(724966),xe=r(6136),Fe=r(414888);class ke{}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(Ne||(Ne={}));const Le=(e,t)=>({action:"logOnline",code:Ne.ERROR,type:e.platformName,version:e.appVersion,additionalInfo:JSON.stringify({manifestVersion:e.manifestVersion}),browser:e.browser,browserVersion:e.browserVersion,exceptiontype:t.domainName??"grapheneException",message:t.message,os:e.os,osVersion:e.osVersion,sessionId:t.sessionId,stack:t.callStack,initialUseCaseModule:t.moduleName,initialUseCaseName:t.useCaseName,errorCount:1});function Ge(e,t){return new b.LE("string"==typeof(r=Le(e,t))?r:Object.keys(r).reduce(((e,t)=>{const n=r[t];return void 0===n||(e[t]="string"==typeof n?n:JSON.stringify(n)),e}),{}));var r}const Be={"Content-Type":"application/x-www-form-urlencoded"},qe=".graphene.exceptionLogs",He=new b.bL,Ve=new b.dC((e=>!(!e||"object"!=typeof e)&&(0===Object.keys(e).length||Object.keys(e).every((e=>"string"==typeof e))&&Object.values(e).every((e=>{return!!((t=e)&&"object"==typeof t&&"entry"in t&&"id"in t&&"date"in t)&&"string"==typeof t.id&&"number"==typeof t.date&&(0,a.isExceptionLogEntry)(t.entry);var t}))))),$e=new b.z;let Ke=class{constructor(e,t,r,n,o){this.httpClient=e,this.kvStore=t,this.logger=r,this.settings=n,this.platformInfoService=o,this.queue$=new Te.X({}),this.logExceptionsCount={},this.platformInfo=null,this.url=`${this.settings.serverEndpoint??"https://kck3hlb9.dashlane.com"}/1/softwarelog/create`,this.codec=(0,b.xw)($e,He,Ve)}async logException(e){const t=this.settings.maxExceptionCountPerSession??10,r=e.message.length?e.message:"UNKNOWN_EXCEPTION";if(r in this.logExceptionsCount){const e=this.logExceptionsCount[r];if(e===t)return Promise.resolve();this.logExceptionsCount[r]=e+1}else this.logExceptionsCount[r]=1;const n=await this.enqueue(e);await(0,B.z)(this.queue$.pipe((0,me.h)((e=>!(n in e)||!!e[n].error))))}async start(){this.platformInfo=await this.platformInfoService.getPlatformInfo(),await this.loadQueue();const e=this.settings.retryDelay??6e4,t=this.queue$.pipe((0,ne.U)((e=>Object.keys(e))),(0,xe.x)(((e,t)=>t.every((t=>e.includes(t))))),(0,K.b)((()=>this.processQueue())),(0,Fe.X)({delay:e})).subscribe();return{stop:async()=>{t.unsubscribe(),await this.saveQueue()}}}async ignoreError(e){try{return await e(),!0}catch(e){return this.logger.error("failed to send error log",e),!1}}async saveQueue(){await this.ignoreError((async()=>{const e=await this.codec.encode(this.queue$.value);await this.kvStore.set(qe,e)}))}async loadQueue(){await this.ignoreError((async()=>{const e=await this.kvStore.get(qe);if(!e||""===e)return void this.queue$.next({});const t=await this.codec.decode(e),r=Date.now()-(this.settings.durationInQueue??864e5);for(const e of Object.keys(t))t[e].date<r&&delete t[e];this.queue$.next(t)}))}async enqueue(e){const t={date:Date.now(),entry:e,id:`${Date.now()}-${Math.random()}`};return this.queue$.value[t.id]=t,await this.saveQueue(),this.queue$.next(this.queue$.value),t.id}async processQueue(){const e=this.platformInfo;if(!e)throw new Error("No platform info");for(;Object.keys(this.queue$.value).length>0;){const t=Object.keys(this.queue$.value)[0],r=this.queue$.value[t];if(!await this.ignoreError((async()=>{const t=await(0,B.z)(this.httpClient.post(this.url,Ge(e,r.entry),{headers:{...Be,"Client-Agent":(n=e,`version:${n.appVersion},platform:${n.platformName}}`)},observe:"response"}));var n;if(!(0,c.d6)(t))throw new Error("Failed to send log")})))throw this.queue$.value[t].error=!0,this.queue$.next(this.queue$.value),new Error("failed to send an item from the queue");delete this.queue$.value[t],await this.saveQueue()}this.queue$.next(this.queue$.value)}};Ke=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.HttpClient,a.KeyValueStorageInfrastructure,a.AppLogger,ke,V])],Ke);let Qe=class{};Qe=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({sharedModuleName:"software-exception-sink",imports:[a.HttpModule,$],providers:[Ke],exports:[Ke],configurations:{settings:{token:ke}}})],Qe)},1971:(e,t,r)=>{function n(e){const t=new Uint8Array(e);let r="";for(const e of t)r+=String.fromCharCode(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}r.d(t,{a:()=>n})},89685:(e,t,r)=>{r.d(t,{b:()=>o,v:()=>s});const n=Math.pow(2,14)-1;function o(e){const t=new Uint16Array(e),r=t.length;let o="",s=n;for(let e=0;e<r;e+=s){e+s>r&&(s=r-e);const n=t.subarray(e,e+s);o+=String.fromCharCode(...n)}return o}function s(e){return o(new Uint8Array(e))}},707502:(e,t,r)=>{r.d(t,{R:()=>s});var n=r(46041);const o=new Uint8Array(256);for(let e=0;e<n.U.length;e++)o[n.U.charCodeAt(e)]=e;function s(e){let t=.75*e.length;const r=e.length;let n,s,i,a,c,u=0;e.endsWith("=")&&(t--,"="===e[e.length-2]&&t--);const d=new ArrayBuffer(t),l=new Uint8Array(d);for(n=0;n<r;n+=4)s=o[e.charCodeAt(n)],i=o[e.charCodeAt(n+1)],a=o[e.charCodeAt(n+2)],c=o[e.charCodeAt(n+3)],l[u++]=s<<2|i>>4,l[u++]=(15&i)<<4|a>>2,l[u++]=(3&a)<<6|63&c;return d}},560198:(e,t,r)=>{function n(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4,n=t.padEnd(t.length+r,"="),o=atob(n),s=new ArrayBuffer(o.length),i=new Uint8Array(s);for(let e=0;e<o.length;e++)i[e]=o.charCodeAt(e);return s}r.d(t,{s:()=>n})},496303:(e,t,r)=>{function n(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}r.d(t,{k:()=>n})},46041:(e,t,r)=>{r.d(t,{U:()=>o,V:()=>n});const n=Math.pow(10,6),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},407573:(e,t,r)=>{r.d(t,{i:()=>n});const n=e=>{const t=e.match(/[\da-f]{2}/gi);return t?new Uint8Array(t.map((e=>parseInt(e,16)))).buffer:(new Uint8Array).buffer}},354066:(e,t,r)=>{function n(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return t}r.d(t,{u:()=>n})},743293:(e,t,r)=>{r.d(t,{N:()=>s});var n=r(530543);const o=Math.pow(10,6);function s(e,t=o){const r=e.length;if(0===r)return"";let s="",i=0,a=Math.min(i+t,r);for(;a<=r;){const o=e.charCodeAt(a-1);if(o>=55296&&o<=56319){if(a++,a>r)throw new Error("Invalid string provided to utf8ChunkEncode");continue}const c=e.slice(i,a),u=n.encode(c);if(s=s.concat(u),a===r)break;i=a,a=Math.min(i+t,r)}return s}},530263:(e,t,r)=>{r.r(t),r.d(t,{BrowserCronSource:()=>nt,BrowserPortConnector:()=>_t,BrowserPortListener:()=>yt,BrowserPortListenerChannel:()=>St,ExtensionCronSource:()=>ut,ExtensionLocalStorageInfrastructure:()=>et,HttpFetchBackend:()=>$,IndexDbKeyValueStorage:()=>rt,IndexDbStorage:()=>tt,JsonExtensionResourceFetcher:()=>i,JsonWebAppResourceFetcher:()=>o,PageToWorkerChannel:()=>pt,computeHash:()=>p,cookieRemoveByDomain:()=>le,decryptAes256:()=>h,decryptAesEcb256:()=>v,decryptRsaOaep:()=>b,deriveKeyArgon2d:()=>O,deriveKeyPbkdf2:()=>C,disableBrowserNativeAutofill:()=>re,enablePrivacyService:()=>te,encryptAes256:()=>S,encryptRsaOaep:()=>w,generateKeyAes256:()=>P,generateKeyPairRsaOaep:()=>R,getLanguage:()=>Y,getRandomValues:()=>j,getShortcutValues:()=>Ce,isMv3Environment:()=>dt,makeStoreInfrastructure:()=>Je,signHmacSha:()=>I,signRsassaPkcs1:()=>M,storageLocalItemExists:()=>Pe,unsafeComputeMd5Hash:()=>N,updateToolbarIcon:()=>ae,verifyHmacSha:()=>T,verifyRsassaPkcs1:()=>x,webappClose:()=>Fe,webappOpen:()=>Ne});var n=r(932839);class o extends n.JsonApplicationResourceFetcher{constructor(e){super(),this.publicPath=e}async fetch(e){return(await fetch(new URL(e.replace(/^\/*/,""),this.publicPath).href)).json()}}var s=r(92204);class i extends n.JsonApplicationResourceFetcher{async fetch(e){const t=(0,s.A)(e);return(await fetch(t)).json()}}var a=r(234064),c=r.n(a),u=r(96785);function d(e){const t=new Uint8Array(e),r=[];for(let e=0;e<t.byteLength;e++)r[e>>>2]|=t[e]<<24-e%4*8;return u.lib.WordArray.create(r,t.byteLength)}function l(e){const{sigBytes:t,words:r}=e,n=new Uint8Array(t);let o=0,s=0;for(;o!==t;){const e=r[s++];if(n[o++]=(4278190080&e)>>>24,o===t)break;if(n[o++]=(16711680&e)>>>16,o===t)break;if(n[o++]=(65280&e)>>>8,o===t)break;n[o++]=255&e}return n.buffer}function p(e,t){if(self.crypto.subtle)return self.crypto.subtle.digest({name:t},e);if("SHA-1"===t){const t=d(e),r=l(c()(t));return Promise.resolve(r)}return Promise.reject(new Error("Unsupported hash method"))}var f=r(660354);function m(e){return self.crypto.subtle.importKey("raw",e,f.zW,!1,["encrypt","decrypt"])}async function h(e,t,r){const n=await m(e);return self.crypto.subtle.decrypt({name:f.zW,iv:t},n,r)}var y=r(89685);function v(e,t){const r=(0,y.v)(t),n=d(e);return l(CryptoJS.AES.decrypt(r,n,{mode:CryptoJS.mode.ECB}))}async function b(e,t,r){const n={name:f.$k,hash:{name:r}},o=await self.crypto.subtle.importKey("pkcs8",e,n,!1,["decrypt"]);return self.crypto.subtle.decrypt(n,o,t)}var g=r(635558),_=r.n(g);async function O(e,t,r){const{tCost:n,mCost:o,parallelism:s}=r,{hash:i}=await _().hash({pass:new Uint8Array(e),salt:new Uint8Array(t),time:n,mem:o,hashLen:32,parallelism:s,type:g.ArgonType.Argon2d});return i.buffer}async function C(e,t,r){const n=await self.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey"]),o={name:f.zW,length:256},{iterations:s,hashType:i}=r,a={name:"PBKDF2",salt:t,iterations:s,hash:{name:i}},c=await self.crypto.subtle.deriveKey(a,n,o,!0,["encrypt","decrypt"]);return self.crypto.subtle.exportKey("raw",c)}async function S(e,t,r){const n=await m(e);return self.crypto.subtle.encrypt({name:f.zW,iv:t},n,r)}async function w(e,t,r){const n={name:f.$k,hash:{name:r}},o=await self.crypto.subtle.importKey("spki",e,n,!1,["encrypt"]);return self.crypto.subtle.encrypt(n,o,t)}async function P(){const e=await self.crypto.subtle.generateKey({name:f.zW,length:f.N2},!0,["encrypt","decrypt"]);return self.crypto.subtle.exportKey("raw",e)}const E=new Uint8Array([1,0,1]);async function R(e){const t=await self.crypto.subtle.generateKey({name:f.$k,modulusLength:2048,publicExponent:E,hash:{name:e}},!0,["encrypt","decrypt"]),{privateKey:r,publicKey:n}=t;return{privateKey:await self.crypto.subtle.exportKey("pkcs8",r),publicKey:await self.crypto.subtle.exportKey("spki",n)}}function j(e){const t=new Uint8Array(e);return self.crypto.getRandomValues(t)}function A(e,t){return self.crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:t}},!0,["sign","verify"])}async function I(e,t,r=f.x4){const n=await A(e,r);return self.crypto.subtle.sign({name:"HMAC",hash:{name:r}},n,t)}async function M(e,t,r){const n={name:f.xJ,hash:{name:r}},o=await self.crypto.subtle.importKey("pkcs8",e,n,!1,["sign"]);return self.crypto.subtle.sign(n,o,t)}var U=r(181968),D=r.n(U);function N(e){const t=d(e);return l(D()(t))}async function T(e,t,r,n=f.x4){const o=await A(e,n);return self.crypto.subtle.verify({name:"HMAC",hash:{name:n}},o,t,r)}async function x(e,t,r,n){const o={name:f.xJ,hash:{name:n}},s=await self.crypto.subtle.importKey("spki",e,o,!1,["verify"]);return self.crypto.subtle.verify(o,s,t,r)}var F=r(87065),k=r(793192),L=r(890171),G=r(547968),B=r(537182),q=r(69885),H=r(51992),V=r(287279);class ${constructor(){this.toHttpResult=e=>e instanceof f.a7?(0,V.Rn)(e):e.ok?(0,V.Vp)(e):(0,V.Rn)(new f.RV(e)),this.toHttpResponse=e=>e instanceof f.a7?e:new f.Zn({body:e.body,url:e.url,status:e.status,statusText:e.statusText,headers:this.mapToHttpHeaders(e.headers)})}handle(e){const t=this.getTimeout$(e.timeout),r=this.doFetch(e).pipe((0,F.U)(this.toHttpResponse),(0,F.U)(this.toHttpResult));return(0,k.S)(t,r)}getTimeout$(e){return e?(0,L.H)(e).pipe((0,F.U)((()=>(0,V.Rn)(new f.a7)))):G.C}doFetch(e){return(0,H.U)(e.url,{method:e.method,body:e.serializeBody(),headers:this.getHeaders(e),credentials:e.withCredentials?"include":"omit",mode:e.mode}).pipe((0,B.K)((e=>{if(!(e instanceof TypeError))throw e;return(0,q.of)(new f.a7)})))}mapToHttpHeaders(e){const t=new f.WM;return e.forEach(((e,r)=>t.set(r,e))),t}getHeaders(e){return e.headers.keys().reduce(((t,r)=>({...t,[r]:e.headers.get(r)})),{})}}const K=new Set(["en","fr","es","ja","de","pt","it","ko","zh","nl","sv"]),Q="en";function W(e){return e.substr(0,2)}function z(e){const t=W(e);return K.has(t)}function Y(){const e=[navigator.language].concat(navigator.languages).find(z);return e?e.includes("-")?W(e):e:Q}var J=r(930754),X=r(782324),Z=r(781805);const ee=" ";async function te(e,t){try{const{levelOfControl:t}=await(0,J.U)(e);if("controllable_by_this_extension"!==t&&"controlled_by_this_extension"!==t){const r=[`Impossible to change browser setting: ${e}.`,`Extension prevented from changing: ${t}`].join(ee);throw new Error(r)}}catch(t){if((0,X.b)(t))throw new Error(`Browser setting not supported: ${e}`);if((0,X.I)(t))throw t.runtimeError;throw t}try{await(0,Z.t)(e,t)}catch(e){throw(0,X.I)(e)?e.runtimeError:e}}async function re(){const e=["autofillAddressEnabled","autofillCreditCardEnabled","passwordSavingEnabled"].map((e=>te(e,!1)));await Promise.all(e)}var ne=r(384318),oe=r(516241);const se={nightly:"icon_nightly_auth",mv2:"icon_auth",mv3:"icon_mv3_auth"},ie="icon_not_auth";async function ae({isUserAuthenticated:e}){const t=`icons/action/${e?function(){const e=(0,ne.W)();return e.name.includes("Nightly")?se.nightly:e.name.includes("Beta")||3===e.manifest_version?se.mv3:se.mv2}():ie}`,r={16:`${t}.png`,32:`${t}@2x.png`};await(0,oe.B)(r)}var ce=r(329),ue=r(598641);function de(e){return`${"http"+(e.secure?"s":"")}://${e.domain.startsWith(".")?e.domain.substring(1):e.domain}${e.path}`}async function le(e){const t=await(0,ce.g)({domain:e});return Promise.all(t.map((e=>(0,ue.O)({url:de(e),name:e.name}))))}var pe=r(857323),fe=r(690123);const me=/^_execute(_browser){0,1}_action$/,he="+";var ye;function ve(e){return me.test(e.name??"")}function be(e){const t=e.toUpperCase();switch(t){case"":case"CTRL":return pe.os.isMacOS()?ye.Command:ye.Ctrl;case"SHIFT":case"":return ye.Shift;case"COMMAND":case"":return ye.Command;case"MACCTRL":return ye.MacCtrl;default:return t}}function ge(e){const t=Object.values(ye),r=t.indexOf(e);return-1===r?t.length:r}function _e(e,t){return ge(e)-ge(t)}function Oe(e){switch(e){case ye.Ctrl:case ye.MacCtrl:return"Ctrl";case ye.Shift:return"";case ye.Command:return"";default:return e}}async function Ce(){const e=await(0,fe.g)(),t=e.find(ve)?.shortcut;if(!t)return;const r=function(e){return e.split(e.includes(he)?he:"")}(t);return r.map(be).sort(_e).map(Oe)}!function(e){e.Command="Command",e.Ctrl="Ctrl",e.MacCtrl="MacCtrl",e.Shift="Shift"}(ye||(ye={}));var Se=r(939680),we=r(641808);async function Pe(e){if((0,Se.G)())return await(0,Se.y)(e)>0;const t=await(0,we.U)(e),r=void 0===t[e],n=null===t[e];return!r&&!n}var Ee=r(724715),Re=r(772733),je=r(457306),Ae=r(731460),Ie=r(661222);async function Me(){const e=await(0,Ie.I)({}),t=(0,s.A)("");return e.filter((e=>"string"==typeof e.url&&e.url.startsWith(t))).filter((e=>""!==e.url))}const Ue="index.html";function De(){return`${(0,s.A)("")}${Ue}`}async function Ne({id:e,query:t,route:r}){const n=function({identifier:e,queryInfo:t,name:r}){const n=De();if(!r)return n;const o=e?`#${r}/${e}`:`#${r}`,s=t?`?${function(e){return Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")}(t)}`:"";return encodeURI(`${n}${o}${s}`)}({identifier:e,queryInfo:t,name:r}),o=await Me();o.length?await async function({path:e,tabs:t}){const r=await(0,Re.T)(),n=function({existingTabs:e,focusedWindow:t}){const r=e.filter((e=>e.active)),n=r.find((e=>e.windowId===t.id)),o=r.pop(),s=e.pop();return n??o??s}({existingTabs:t,focusedWindow:r});if(!n)return;if(n.windowId!==r.id&&(0,je.V)(n.windowId,{focused:!0}),!n.id)return;const o={active:!0,...e===De()?{}:{url:e}};await(0,Ae.V)(n.id,o)}({path:n,tabs:o}):await async function(e){const t={url:e};await(0,Ee.U)(t)}(n)}var Te=r(215904),xe=r(549259);async function Fe(){const e=await Me();if(!e.length)return;const t=(0,Te.a)(),r=e.map((e=>e.id)).filter((e=>"number"==typeof e&&e!==t));await(0,xe.O)(r)}var ke=r(732012),Le=r(724966),Ge=r(227257),Be=r(385390),qe=r(915023),He=r(828489),Ve=r(826603),$e=r(56847),Ke=r(252477),Qe=r(15026);function We(e){return JSON.parse(JSON.stringify(e))}class ze{constructor(e,t){this.stopped$=new Le.X(!1),this.key=e,this.typeGuard=t??(e=>!0);const r=new Ge.y((t=>{this.get().then((e=>{t.next(e)}));const r=r=>{if(e in r){const{newValue:n}=r[e];return t.next(this.asDataWithTimestamp(n))}};return Ve.r.addListener(r),()=>Ve.r.removeListener(r)}));this.state$=(0,Be.a)({state:r,isStopped:this.stopped$}).pipe((0,qe.o)((({isStopped:e})=>!e),!1),(0,F.U)((({state:e})=>e)))}set(e){return(0,$e.t)(We({[this.key]:e}))}init(e){return(0,$e.t)(We({[this.key]:e}))}clear(){return(0,Ke.O)(this.key)}stop(){this.stopped$.next(!0)}async get(){const e=(await(0,Qe.U)(this.key))[this.key];return this.asDataWithTimestamp(e)}asDataWithTimestamp(e){return e&&"object"==typeof e&&(0,He.l$)(e,"timestamp")&&"number"==typeof e.timestamp&&e.timestamp&&(0,He.l$)(e,"data")&&(0,n.isLazyState)(e.data)?e.data.loaded?this.typeGuard(e.data.value)?{timestamp:e.timestamp,data:{loaded:!0,value:e.data.value}}:{timestamp:void 0}:{timestamp:e.timestamp,data:{loaded:!1}}:{timestamp:void 0}}}class Ye extends n.StoreInfrastructureFactory{createUserScopedInfrastructure(e,t,r,n){return new ze(`graphene.${e}.${t}.${r}`,n)}createDeviceScopedInfrastructure(e,t,r){return new ze(`graphene.${e}.${t}`,r)}}function Je(){return(0,ke.G)()?new Ye:new n.MemoryStoreInfrastructureFactory}var Xe=r(9244),Ze=r(945441);class et{async getAllKeys(){return Object.keys(await(0,we.U)(null))}async get(e){const t=(await(0,we.U)([e]))[e];if(t){if("string"!=typeof t)throw new Error(`[ChromeLocalStorage] - cannot read content of ${e} properly. Type is\n        ${typeof t} but should be 'string'`);return t}}async set(e,t){await(0,Xe.t)({[e]:t})}async remove(e){await(0,Ze.O)([e])}}class tt{constructor(e,t,r){this.DB_STORE_NAME=e,this.DB_VERSION=t,this.DB_OBJECT_STORE_NAME=r}getIndexedDB(){return new Promise(((e,t)=>{const r=self.indexedDB;if(!r)return t(new Error("indexedDB is not supported in this environment"));const n=r.open(this.DB_STORE_NAME,this.DB_VERSION);n.onerror=function(){t(n.error)},n.onupgradeneeded=()=>{n.result.objectStoreNames.contains(this.DB_OBJECT_STORE_NAME)||n.result.createObjectStore(this.DB_OBJECT_STORE_NAME)},n.onsuccess=function(){n.onsuccess=null,e(n.result)}}))}async getStore(e="readwrite"){return(await this.getIndexedDB()).transaction([this.DB_OBJECT_STORE_NAME],e).objectStore(this.DB_OBJECT_STORE_NAME)}async readItem(e){const t=await this.getStore("readonly");return new Promise((r=>{const n=t.get(e);n.onsuccess=()=>{n.onsuccess=null,r(n.result)}}))}async getAllKeys(){const e=await this.getStore("readonly");return new Promise((t=>{const r=e.getAllKeys();r.onsuccess=()=>{t(r.result.map((e=>String(e))))}}))}async removeItem(e){const t=await this.getStore("readwrite");return new Promise((r=>{const n=t.delete(e);n.onsuccess=()=>{n.onsuccess=null,r()}}))}async writeItem(e,t){const r=await this.getStore("readwrite");return new Promise((n=>{const o=r.put(t,e);o.onsuccess=()=>{o.onsuccess=null,n()}}))}async itemExists(e){return null!=await this.readItem(e)}}class rt{constructor(){this.storageLayer=new tt("dashlane-ng",1,"module-data")}getAllKeys(){return this.storageLayer.getAllKeys()}async set(e,t){return await this.storageLayer.writeItem(e,t)}remove(e){return this.storageLayer.removeItem(e)}async get(e){return await this.storageLayer.readItem(e)??void 0}}class nt extends n.CronLowLevelSource{constructor(){super(...arguments),this.alarm$=new Ge.y((e=>{const t=self.setInterval((()=>{e.next()}),6e4);return()=>{self.clearInterval(t)}}))}}var ot=r(897280),st=r(531034),it=r(418477),at=r(665496);const ct="cron-source";class ut extends n.CronLowLevelSource{constructor(){super(...arguments),this.alarm$=((0,at.G)()?new Ge.y((e=>{const t=t=>{t.name===ct&&e.next()};return(0,st.U)(ct,{delayInMinutes:1,periodInMinutes:1}),it.i.addListener(t),()=>{it.i.removeListener(t)}})):new Ge.y((e=>{const t=self.setInterval((()=>{e.next()}),6e4);return()=>{self.clearInterval(t)}}))).pipe((0,ot.d)(1)),this.subscription=this.alarm$.subscribe()}stop(){this.subscription.unsubscribe()}}function dt(){return"undefined"!=typeof chrome&&void 0!==chrome.runtime&&void 0!==chrome.runtime.getManifest&&3===(0,ne.W)().manifest_version}var lt=r(507074);class pt{constructor(e,t){this.worker=e,this.channelName=t,this.autoConnects=!1,this.status$=(0,q.of)(n.ChannelState.Connected),this.messages$=new Ge.y((t=>{const r=e=>{(0,n.isSendMessageRequest)(e.data)&&!e.origin&&t.next(e.data.message)};return e.addEventListener("message",r),()=>{e.removeEventListener("message",r)}})).pipe((0,lt.B)())}async sendMessage(e){this.worker.postMessage((0,n.sendMessageRequest)({channelName:this.channelName,message:e}))}stop(){return Promise.resolve()}}var ft=r(769183),mt=r(20500);class ht{constructor(e,t){this.source=e,this.filter=t;let r=[];const n=new Set;this.listener=(e,t)=>{if(!this.filter(e,t))return!1;n.size?n.forEach((r=>r.next([e,t]))):r.push([e,t])},this.events$=new Ge.y((e=>(n.size||(r.forEach((t=>e.next(t))),r=[]),n.add(e),()=>{n.delete(e)}))),this.source.addListener(this.listener)}stop(){this.source.removeListener(this.listener)}}class yt{constructor(e){this.connectedChannels$=new Le.X({});const t=new Ge.y((t=>{const r={},o=o=>{const s=(0,ft.Z)();if(o.name!==e)return;const i=new ht({addListener:e=>o.onMessage.addListener(e),removeListener:e=>o.onMessage.removeListener(e)},(t=>(0,n.isSendMessageRequest)(t)&&t.channelName===e)),a=new Promise((e=>{const t=()=>{o.onDisconnect.removeListener(t),e(null)};o.onDisconnect.addListener(t)})),c=new Le.X(n.ChannelState.Connected);a.then((()=>{i.stop(),c.next(n.ChannelState.Disconnected),delete r[s],t.next(r)}));const u={autoConnects:!1,messages$:i.events$.pipe((0,F.U)((([e])=>e.message))),sendMessage:t=>(o.postMessage((0,n.sendMessageRequest)({channelName:e,message:t})),Promise.resolve()),stop:()=>(o.disconnect(),Promise.resolve()),status$:c},d=new n.AcknowledgedChannel(u);r[s]=d,t.next(r)};return mt.b.addListener(o),()=>{mt.b.removeListener(o)}}));this.subscription=t.subscribe((e=>this.connectedChannels$.next(e)))}stop(){this.subscription.unsubscribe()}}var vt=r(536414),bt=r(160399),gt=r(505441);class _t{constructor(e){this.autoConnects=!0,this.status$=new Le.X(n.ChannelState.Connected),this.port$=new Ge.y((t=>{let r;function n(){r?.onDisconnect.removeListener(n);const o=(0,gt.$)({name:e});o.onDisconnect.addListener(n),t.next(o),r=o}return n(),()=>{r?.onDisconnect.removeListener(n),r?.disconnect()}})).pipe((0,ot.d)(1)),this.portSubscription=this.port$.subscribe(),this.messages$=this.port$.pipe((0,vt.z)((t=>new Ge.y((r=>{const o=t=>{(0,n.isSendMessageRequest)(t)&&t.channelName===e&&r.next(t.message)};return t.onMessage.addListener(o),()=>{t.onMessage.removeListener(o)}})))))}async sendMessage(e){const t=await(0,bt.z)(this.port$);t.postMessage((0,n.sendMessageRequest)({channelName:t.name,message:e}))}stop(){return this.portSubscription.unsubscribe(),this.status$.next(n.ChannelState.Disconnected),Promise.resolve()}}var Ot=r(243978),Ct=r(317350);class St{constructor(e){this.autoConnects=!1,this.listener=new yt(e),this.channel$=this.listener.connectedChannels$.pipe((0,F.U)((e=>{const t=Object.values(e);if(t.length)return t[0]})),(0,ot.d)(1)),this.receivedMessages$=this.channel$.pipe((0,Ot.w)((e=>e?e.receivedMessages$:Ct.E))),this.channelState$=this.channel$.pipe((0,F.U)((e=>e?n.ChannelState.Connected:n.ChannelState.Disconnected)))}async send(e){const t=await(0,bt.z)(this.channel$);if(!t)throw new Error("Channel is not connected");await t.send(e)}stop(){this.listener.stop()}}},24836:(e,t,r)=>{r.d(t,{iz:()=>s,rq:()=>c,vF:()=>h,u7:()=>a,k$:()=>p});var n=r(696832);const o=(0,n.createContext)({appClient:null}),s=e=>{const t=n.useCallback((t=>e.client[t.name]),[e.client]),r=n.useMemo((()=>({appClient:{getModuleClient:t}})),[t]);return n.createElement(o.Provider,{value:r},e.children)},i=((0,n.createContext)(void 0),()=>(0,n.useContext)(o)),a=e=>{const{appClient:t}=i();return(0,n.useMemo)((()=>{if(!t)throw new Error("No app client available");const r=t.getModuleClient(e);if(!r)throw new Error(`Module ${e.name} is not available in the context`);return r}),[t,e]).commands};var c,u=r(287279);!function(e){e.Success="success",e.Loading="loading",e.Error="error"}(c||(c={}));const d={status:c.Loading,data:void 0,error:void 0},l=null;function p(...e){const{appClient:t}=i();if(!t)throw new Error("No app client available");const[r,o,s,a]=e,p=(0,n.useMemo)((()=>{const e=t.getModuleClient(r);if(!e)throw new Error(`Module ${r.name} is not available in the context`);return e.queries[o]}),[t,r,o]),[f,m]=(0,n.useState)(d),h=a??[JSON.stringify(s)];return(0,n.useEffect)((()=>{const e=p(s??l).subscribe((e=>{if((0,u.d6)(e)){const t={status:c.Success,data:e.data,error:void 0};m(t)}else{const t={status:c.Error,data:void 0,error:e.error};m(t)}}));return()=>e.unsubscribe()}),[p,...h]),f}var f=r(468224);const m={status:c.Loading,data:void 0,error:void 0};function h(e){const{appClient:t}=i();if(!t)throw new Error("No app client available");const[r,o]=(0,n.useState)(m);return(0,n.useEffect)((()=>{const r=t.getModuleClient(f.requestContextApi);if(!r)throw new Error(`Module ${f.requestContextApi.name} is not available in the context`);const n=r.queries.userFeatureFlips({requiredFeatureFlips:e}).subscribe((e=>{if((0,u.d6)(e)){const t={status:c.Success,data:e.data,error:void 0};o(t)}else{const t={status:c.Error,data:void 0,error:e.error};o(t)}}));return()=>n.unsubscribe()}),[]),r}r(530263)},660354:(e,t,r)=>{function n(...e){const t=[...e].reverse();return{decode:async t=>{for(const r of e)t=await r.decode(t);return t},encode:async e=>{for(const r of t)e=await r.encode(e);return e}}}r.d(t,{zW:()=>Ce,N2:()=>Se,RV:()=>Ve,z:()=>m,gO:()=>h,x4:()=>we,oo:()=>C,SD:()=>ne,a7:()=>$e,jN:()=>Re,eN:()=>xe,WM:()=>Ue,LE:()=>Ne,aW:()=>Te,Zn:()=>qe,WE:()=>ke,bL:()=>i,BU:()=>y,Eu:()=>u,xJ:()=>Ee,$k:()=>Pe,dC:()=>a,xw:()=>n,FO:()=>he,Ic:()=>be,Jo:()=>ge,gi:()=>_e,yL:()=>Oe});var o=r(89685),s=r(354066);class i{decode(e){return JSON.parse((0,o.v)(e))}encode(e){return(0,s.u)(JSON.stringify(e))}}class a{constructor(e){this.typeGuard=e}decode(e){if(this.typeGuard(e))return e;throw new Error("Bad type")}encode(e){return e}}const c=e=>e;class u{constructor(){this.encode=c,this.decode=c}}var d=r(707502),l=r(46041);function p(e){const t=e.length,r=[];for(let n=0;n<t;n+=3)r.push(l.U[e[n]>>2]),r.push(l.U[(3&e[n])<<4|e[n+1]>>4]),r.push(l.U[(15&e[n+1])<<2|e[n+2]>>6]),r.push(l.U[63&e[n+2]]);return r.join("")}function f(e,t=l.V){const r=new Uint8Array(e),n=r.length,o=t%3,s=0===o?t:t+(3-o),i=Math.ceil(n/s);let a="",c=-1;for(;c++<i;){const e=c*s,t=c===i-1?n:(c+1)*s,o=p(r.slice(e,t));a=a.concat(o)}return n%3==2?a.substring(0,a.length-1)+"=":n%3==1?a.substring(0,a.length-2)+"==":a}class m{decode(e){return(0,d.R)(e)}encode(e){return f(e)}}const h={algorithm:"aes256",mode:"cbchmac64",ivLength:16},y={algorithm:"aes256",mode:"cbchmac",ivLength:16,padding:16,bytesToKey:0,reuseSalt:!1},v={algorithm:"aes256",mode:"cbc",ivLength:16,saltLength:32,padding:0,bytesToKey:{algorithm:"sha1",iterations:3,keyLength:32}};var b=r(807165);const g=b.z.object({algorithm:b.z.literal("aes256"),mode:b.z.literal("cbchmac"),ivLength:b.z.literal(16)}),_=b.z.object({algorithm:b.z.literal("aes256"),mode:b.z.literal("cbchmac64"),ivLength:b.z.literal(16)}),O=b.z.union([g,_]),C={algorithm:"noderivation"},S={algorithm:"pbkdf2",saltLength:32,iterations:10204,hashAlgorithm:"sha1"},w=b.z.object({algorithm:b.z.literal("argon2d"),saltLength:b.z.literal(16),tCost:b.z.number(),mCost:b.z.number(),parallelism:b.z.number()}),P=b.z.object({algorithm:b.z.literal("pbkdf2"),saltLength:b.z.union([b.z.literal(16),b.z.literal(32)]),iterations:b.z.number(),hashAlgorithm:b.z.enum(["sha1","sha256"])}),E=b.z.object({algorithm:b.z.literal("noderivation")});var R=r(295087);function j({transportableData:e,marker:t,metadata:r}){const n=t.length+r.length;return e.substring(n)}function A({encipheredContents:e,marker:t,metadata:r}){const{derivation:n,cipher:o,type:i,version:a}=t,{iv:c,salt:u,signature:d}=r;return{type:i,version:a,derivationConfig:n,cipherConfig:o,salt:(0,s.u)(u),signature:(0,s.u)(d),iv:(0,s.u)(c),encipheredContents:(0,s.u)(e)}}function I({str:e,substr:t,occurrence:r}){if(r<1)return-1;let n=0,o=-1;for(;n<r;){if(o=e.indexOf(t,o+1),o<0)return o;n++}return o}const M="$",U=1;function D({transportableData:e,makeMarker:t,schema:r}){const n=r.count+1,o=I({str:e,substr:M,occurrence:n}),s=e.substring(1,o).split(M);if(s.length!==r.count)throw new Error("Marker and schema length mismatch");return t({bytes:o+1,markerSchema:r,values:s})}const N=b.z.literal("flexible"),T=b.z.object({version:b.z.literal(1),type:N,length:b.z.number(),derivation:w,cipher:g});function x({bytes:e,markerSchema:t,values:r}){const{version:n,derivation:o,saltLength:s,tCost:i,mCost:a,parallelism:c,cipher:u,mode:d,ivLength:l}=t.index,p=T.safeParse({version:Number(r[n]),type:"flexible",length:e,derivation:{algorithm:r[o],saltLength:Number(r[s]),tCost:Number(r[i]),mCost:Number(r[a]),parallelism:Number(r[c])},cipher:{algorithm:r[u],mode:r[d],ivLength:Number(r[l])}});if(!p.success)throw new Error(p.error.message);return p.data}const F={count:9,index:{version:0,derivation:1,saltLength:2,tCost:3,mCost:4,parallelism:5,cipher:6,mode:7,ivLength:8}},k={count:8,index:{version:0,derivation:1,saltLength:2,iterations:3,hashAlgorithm:4,cipher:5,mode:6,ivLength:7}},L={count:5,index:{version:0,derivation:1,cipher:2,mode:3,ivLength:4}},G=32;function B({transportableData:e,marker:t}){const{length:r,derivation:n,cipher:o}=t,s=n.saltLength,{ivLength:i}=o,a=r+0,c=a+s,u=c+i;return{iv:e.substring(c,c+i),length:s+i+G,salt:e.substring(a,a+s),signature:e.substring(u,u+G)}}const q=b.z.object({version:b.z.literal(1),type:N,length:b.z.number(),derivation:E,cipher:O});function H({bytes:e,markerSchema:t,values:r}){const{version:n,cipher:o,mode:s,ivLength:i}=t.index,a=q.safeParse({version:Number(r[n]),type:"flexible",length:e,derivation:{algorithm:"noderivation"},cipher:{algorithm:r[o],mode:r[s],ivLength:Number(r[i])}});if(!a.success)throw new Error(a.error.message);return a.data}const V=b.z.object({version:b.z.literal(1),type:N,length:b.z.number(),derivation:P,cipher:g});function $({bytes:e,markerSchema:t,values:r}){const{version:n,derivation:o,saltLength:s,iterations:i,hashAlgorithm:a,cipher:c,mode:u,ivLength:d}=t.index,l=V.safeParse({version:Number(r[n]),type:"flexible",length:e,derivation:{algorithm:r[o],saltLength:Number(r[s]),iterations:Number(r[i]),hashAlgorithm:r[a]},cipher:{algorithm:r[c],mode:r[u],ivLength:Number(r[d])}});if(!l.success)throw new Error(l.error.message);return l.data}function K({transportableData:e,index:t}){const r=t+1,n=I({str:e,substr:M,occurrence:r}),o=I({str:e,substr:M,occurrence:r+1});if(-1===n||-1===o)throw new Error("Marker info indices not found");return e.substring(n+1,o)}const Q=0,W=1;function z(e){switch(e){case"argon2d":return e=>{const t=D({transportableData:e,makeMarker:x,schema:F}),r=B({transportableData:e,marker:t});return A({encipheredContents:j({transportableData:e,marker:t,metadata:r}),marker:t,metadata:r})};case"pbkdf2":return e=>{const t=D({transportableData:e,makeMarker:$,schema:k}),r=B({transportableData:e,marker:t});return A({encipheredContents:j({transportableData:e,marker:t,metadata:r}),marker:t,metadata:r})};case"noderivation":return e=>{const t=D({transportableData:e,makeMarker:H,schema:L}),r=function({transportableData:e,marker:t}){const{length:r,cipher:n}=t,{ivLength:o}=n,s=r+0,i=s+o;return{iv:e.substring(s,s+o),length:o+G,signature:e.substring(i,i+G)}}({transportableData:e,marker:t});return function({encipheredContents:e,marker:t,metadata:r}){const{derivation:n,cipher:o,type:i,version:a}=t,{iv:c,signature:u}=r;return{type:i,version:a,derivationConfig:n,cipherConfig:o,signature:(0,s.u)(u),iv:(0,s.u)(c),encipheredContents:(0,s.u)(e)}}({encipheredContents:j({transportableData:e,marker:t,metadata:r}),marker:t,metadata:r})};default:(0,R.U)(e)}}function Y(...e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(new Uint8Array(t),e),e+t.byteLength)),0),r.buffer}function J(e){const t=M+e.join(M)+M;return(0,s.u)(t)}const X="KWC5",Z=16,ee=32,te=0,re={type:"KWC5",derivation:C,cipher:y};class ne{constructor(){this.derivateKeyCache=new Map}getCacheKey(...e){return f(e.reduce(((e,t)=>Y(e,t)),new ArrayBuffer(0)))}getCachedDerivation(e){return this.derivateKeyCache.get(e)}setCachedDerivation({cacheKey:e,data:t}){this.getCachedDerivation(e)||this.derivateKeyCache.set(e,t)}}const oe="flexible",se="KWC3",ie=0,ae=32,ce=4;function ue(e){const t=function(e){const t=e.slice(ae,ae+ce),r=(0,o.v)(t);if([se,X].includes(r))return r}(e);return t||(function(e){const t=new Uint8Array(e).slice(0,1);return(0,o.v)(t.buffer)===M}(e)?oe:void 0)}const de="SHA-512";async function le(e,t){const r=await t(e,de),n=new Uint8Array(r),o=r.byteLength/2,s=n.slice(0,o),i=n.slice(o,r.byteLength);return{encryptionKey:s.buffer,signatureKey:i.buffer}}function pe(e){const t=new Uint8Array(e),r=e.byteLength/2,n=t.slice(0,r),o=t.slice(r);return Promise.resolve({encryptionKey:n.buffer,signatureKey:o.buffer})}async function fe(e,t,r,n,o){const i=(0,s.u)(Object.values(r).join("")),a=t.getCacheKey(n,o,i),c=t.getCachedDerivation(a);if(c)return c;const u=function(e){switch(e){case"sha1":return"SHA-1";case"sha256":return"SHA-256";case"sha384":return"SHA-384";case"sha512":return"SHA-512";default:(0,R.U)(e)}}(r.hashAlgorithm),d=await e(n,o,{iterations:r.iterations,hashType:u});return t.setCachedDerivation({cacheKey:a,data:d}),d}function me(e,t,r,n,o,i){return"pbkdf2"===o.algorithm?fe(r,i,o,e,t):async function(e,t,r,n,o){const{tCost:i,mCost:a,parallelism:c}=r,u=(0,s.u)(Object.values(r).join("")),d=t.getCacheKey(n,o,u),l=t.getCachedDerivation(d);if(l)return l;const p={tCost:i,mCost:a,parallelism:c},f=await e(n,o,p);return t.setCachedDerivation({cacheKey:d,data:f}),f}(n,i,o,e,t)}async function he(e,t,r,n){const s=function(e){const t=(0,o.v)(e),r=K({transportableData:t,index:Q});if(Number(r)!==U)throw new Error("Marker version not supported");const n=K({transportableData:t,index:W});if(s=n,!["argon2d","pbkdf2","noderivation"].some((e=>e===s)))throw new Error("Derivation algorithm not supported");var s;return z(n)(t)}(n),{deriveKeyArgon2d:i,deriveKeyPbkdf2:a}=t,{derivationConfig:c,salt:u}=s,{algorithm:d}=c,l="pbkdf2"===d||"argon2d"===d;if(l&&!u)throw new Error("Need salt for derivation");const p=l&&u?await me(e,u,a,i,c,r):e,{mode:f}=s.cipherConfig,{computeHash:m}=t,{encryptionKey:h,signatureKey:y}="cbchmac64"===f?await pe(p):await le(p,m),{iv:v,encipheredContents:b}=s,g=Y(v,b),{verifyHmacSha:_}=t,{signature:O}=s;if(!await _(y,O,g))throw new Error("Signature cannot be verified");const{decryptAes256:C}=t;return C(h,v,b)}const ye={type:se,derivation:S,cipher:v};async function ve(e,t,r,n){const o=function(e){const t=function({transportableData:e,marker:t}){const{derivation:r,type:n}=t,{saltLength:o}=r,s=ie+o+n.length;return{salt:e.slice(ie,ie+o),encipheredContents:e.slice(s)}}({transportableData:e,marker:ye});return{salt:t.salt,type:se,encipheredContents:t.encipheredContents,derivationConfig:S,cipherConfig:v}}(n),{deriveKeyPbkdf2:s}=t,{derivationConfig:i,salt:a}=o,c=await fe(s,r,i,e,a),{computeHash:u}=t,{cipherConfig:{ivLength:d,bytesToKey:{iterations:l,keyLength:p}}}=o,f=await async function(e,t,r,n,o,s){const i=Y(t,s.slice(0,8));let a=i,c=new ArrayBuffer(0);for(let t=0;t<r;t++){const t=await e(a,"SHA-1");c=Y(c,t),a=Y(t,i)}const u=o+n;return Promise.resolve(c.slice(o,u))}(u,c,l,d,p,a),{decryptAes256:m}=t,{encipheredContents:h}=o;return m(c,f,h)}async function be(e,t,r){const n=function(e){const t=function({transportableData:e,marker:t}){const{cipher:r,type:n}=t,{ivLength:o}=r,s=te+o+Z+n.length,i=s+ee;return{iv:e.slice(te,te+o),signature:e.slice(s,s+ee),encipheredContents:e.slice(i)}}({transportableData:e,marker:re});return{iv:t.iv,type:X,signature:t.signature,encipheredContents:t.encipheredContents,derivationConfig:C,cipherConfig:y}}(r),{computeHash:o}=t,{encryptionKey:s,signatureKey:i}=await le(e,o),{iv:a,encipheredContents:c}=n,u=Y(a,c),{verifyHmacSha:d}=t,{signature:l}=n;if(!await d(i,l,u))throw new Error("Signature cannot be verified");const{decryptAes256:p}=t;return p(s,a,c)}async function ge(e,t,r,n){const o=ue(n);if(!o)throw new Error("Cannot find marker type");switch(o){case se:return await ve(e,t,r,n);case X:return await be(e,t,n);case oe:return he(e,t,r,n);default:(0,R.U)(o)}}async function _e(e,t,r,n,o,s,i){const{algorithm:a}=r,c="pbkdf2"===a||"argon2d"===a;if(c&&!i?.salt)throw new Error("Need salt for derivation");const{deriveKeyArgon2d:u,deriveKeyPbkdf2:d}=t,l=c&&i?.salt?await me(e,i.salt,d,u,r,n):e,{mode:p}=o,{computeHash:f}=t,{encryptionKey:m,signatureKey:h}="cbchmac64"===p?await pe(l):await le(l,f),{getRandomValues:y}=t,v=y(o.ivLength),{encryptAes256:b}=t,g=await b(m,v,s),{signHmacSha:_}=t,O=Y(v,g),C=await _(h,O);return function(e){const{encipheredContents:t,cipherConfig:r,derivationConfig:n,salt:o,signature:s,iv:i}=e,a=function({cipher:e,derivation:t}){const{algorithm:r}=t;switch(r){case"argon2d":return function({cipher:e,derivation:t}){const{count:r,index:n}=F,o=new Array(r);return o[n.version]=U,o[n.derivation]=t.algorithm,o[n.saltLength]=t.saltLength,o[n.tCost]=t.tCost,o[n.mCost]=t.mCost,o[n.parallelism]=t.parallelism,o[n.cipher]=e.algorithm,o[n.mode]=e.mode,o[n.ivLength]=e.ivLength,J(o)}({cipher:e,derivation:t});case"pbkdf2":return function({cipher:e,derivation:t}){const{count:r,index:n}=k,o=new Array(r);return o[n.version]=U,o[n.derivation]=t.algorithm,o[n.saltLength]=t.saltLength,o[n.iterations]=t.iterations,o[n.hashAlgorithm]=t.hashAlgorithm,o[n.cipher]=e.algorithm,o[n.mode]=e.mode,o[n.ivLength]=e.ivLength,J(o)}({cipher:e,derivation:t});case"noderivation":return function({cipher:e,derivation:t}){const{count:r,index:n}=L,o=new Array(r);return o[n.version]=U,o[n.derivation]=t.algorithm,o[n.cipher]=e.algorithm,o[n.mode]=e.mode,o[n.ivLength]=e.ivLength,J(o)}({cipher:e,derivation:t});default:(0,R.U)(r)}}({cipher:r,derivation:n});return o&&"noderivation"!==n.algorithm?Y(a,o,i,s,t):Y(a,i,s,t)}({type:"flexible",version:1,derivationConfig:r,cipherConfig:o,salt:i?.salt,iv:v,signature:C,encipheredContents:g})}async function Oe(e,t,r,n,o,i){const{computeHash:a}=t,{encryptionKey:c,signatureKey:u}=await le(e,a),{getRandomValues:d}=t,{ivLength:l}=n,p=d(l),{encryptAes256:f}=t,m=await f(c,p,o),{signHmacSha:h}=t,y=Y(p,m),v={type:"KWC5",derivationConfig:r,cipherConfig:n,iv:p,signature:await h(u,y),encipheredContents:m},{padding:b}=i;return function({secureData:e,randomValues:t}){if(t.byteLength!==Z)throw new Error("Encoding kwc5 requires 16 random bytes");const{encipheredContents:r,iv:n,type:o,signature:i}=e;return Y(n,t,(0,s.u)(o),i,r)}({secureData:v,randomValues:b})}const Ce="AES-CBC",Se=256,we="SHA-256",Pe="RSA-OAEP",Ee="RSASSA-PKCS1-v1_5";class Re{}var je=r(69885),Ae=r(734987),Ie=r(948844);class Me{constructor(e){this.chain=null,this.backend=e}handle(e){return this.backend.handle(e)}}class Ue{constructor(e){this.headers=new Map,this.normalizedNames=new Map,"string"==typeof e?this.initFromString(e):e&&this.initFromObject(e)}has(e){return this.headers.has(e.toLowerCase())}get(e){const t=this.headers.get(e.toLowerCase());return t?.[0]??null}keys(){return Array.from(this.normalizedNames.values())}getAll(e){return this.headers.get(e.toLowerCase())??null}append(e,t){return this.clone({name:e,value:t,op:0})}set(e,t){return this.clone({name:e,value:t,op:1})}delete(e,t){return this.clone({name:e,value:t,op:2})}deleteMultiple(e){return this.clone({names:e,op:3})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}clone(e){const t=new Ue;return t.initFromOther(this),t.applyUpdate(e),t}applyUpdate(e){switch(e.op){case 0:case 1:{const t=e.name.toLowerCase();let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const n=(0===e.op?this.headers.get(t):void 0)??[];n.push(...r),this.headers.set(t,n)}break;case 2:{const t=e.name.toLowerCase(),r=e.value;if(r){let e=this.headers.get(t);if(!e)return;const n=Array.isArray(r)?r:[r];e=e.filter((e=>!n.includes(e))),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}break;case 3:e.names.forEach((e=>{const t=e.toLowerCase();this.headers.delete(t),this.normalizedNames.delete(t)}))}}initFromOther(e){Array.from(e.headers.keys()).forEach((t=>{this.headers.set(t,[...e.headers.get(t)]),this.normalizedNames.set(t,e.normalizedNames.get(t))}))}initFromObject(e){Object.keys(e).forEach((t=>{let r=e[t];const n=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(n,r),this.maybeSetNormalizedName(t,n))}))}initFromString(e){e.split("\n").forEach((e=>{const t=e.indexOf(":");if(t>0){const r=e.slice(0,t),n=r.toLowerCase(),o=e.slice(t+1).trim();this.maybeSetNormalizedName(r,n),this.headers.has(n)?this.headers.get(n).push(o):this.headers.set(n,[o])}}))}}class De{encodeKey(e){return this.standardEncoding(e)}encodeValue(e){return this.standardEncoding(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}standardEncoding(e){return encodeURIComponent(e).replace(De.STANDARD_ENCODING_REGEX,((e,t)=>De.STANDARD_ENCODING_REPLACEMENTS[t]??e))}}De.STANDARD_ENCODING_REGEX=/%(\d[a-f0-9])/gi,De.STANDARD_ENCODING_REPLACEMENTS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};class Ne{constructor(e={},t={}){this.map=new Map,this.encoder=t.encoder??new De,"string"==typeof e?this.initFromString(e):this.initFromObject(e)}has(e){return this.map.has(e)}get(e){const t=this.map.get(e);return t?.[0]??null}getAll(e){return this.map.get(e)??null}keys(){return Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:0})}appendAll(e){const t=[];return Object.keys(e).forEach((r=>{const n=e[r];Array.isArray(n)?n.forEach((e=>{t.push({param:r,value:e,op:0})})):t.push({param:r,value:n,op:0})})),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:1})}delete(e,t){return this.clone({param:e,value:t,op:2})}toString(){return this.keys().map((e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map((e=>t+"="+this.encoder.encodeValue(e))).join("&")})).filter((e=>""!==e)).join("&")}clone(e){const t=new Ne({},{encoder:this.encoder});return t.initFromOther(this),t.applyUpdates(Array.isArray(e)?e:[e]),t}initFromOther(e){e.keys().forEach((t=>this.map.set(t,[...e.map.get(t)])))}initFromObject(e){Object.keys(e).forEach((t=>{const r=e[t],n=Ne.isValueArray(r)?r.map(Ne.valueToString):[Ne.valueToString(r)];this.map.set(t,n)}))}initFromString(e){const{encoder:t}=this;e.length>0&&e.replace(/^\?/,"").split("&").forEach((e=>{const r=e.indexOf("="),[n,o]=-1===r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],s=this.map.get(n)??[];s.push(o),this.map.set(n,s)}))}applyUpdates(e){e.forEach((e=>{switch(e.op){case 0:case 1:{const t=(0===e.op?this.map.get(e.param):void 0)??[];t.push(Ne.valueToString(e.value)),this.map.set(e.param,t);break}case 2:if(void 0===e.value){this.map.delete(e.param);break}{const t=this.map.get(e.param)??[],r=t.indexOf(Ne.valueToString(e.value));-1!==r&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}))}static valueToString(e){return`${e}`}static isValueArray(e){return Array.isArray(e)}}class Te{constructor(e,t,r,n){this.body=null,this.headers=new Ue,this.withCredentials=!1,this.timeout=void 0,this.responseType="json",this.params=new Ne({}),this.url=t,this.method=e,Te.mightHaveBody(this.method)&&(this.body=r??null),n&&(this.withCredentials=Boolean(n.withCredentials),n.responseType&&(this.responseType=n.responseType),n.headers&&(this.headers=this.getHeadersFromOptions(n.headers)),n.params&&(this.params=this.getParamsFromOptions(n.params)),n.timeout&&n.timeout>0&&(this.timeout=n.timeout),n.mode&&(this.mode=n.mode)),this.urlWithParams=this.initUrlWithParams()}serializeBody(){return null===this.body?null:Te.isArrayBuffer(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ne?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Te.isArrayBuffer(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ne?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method??this.method,r=e.url??this.url,n=e.responseType??this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,i=void 0!==e.timeout?e.timeout:this.timeout,a=e.mode??this.mode;let c=e.headers?this.getHeadersFromOptions(e.headers):this.headers,u=e.params?this.getParamsFromOptions(e.params):this.params;const d=e.setHeaders;d&&(c=Object.keys(d).reduce(((e,t)=>e.set(t,d[t])),c));const l=e.setParams;return l&&(u=Object.keys(l).reduce(((e,t)=>e.set(t,l[t])),u)),new Te(t,r,o,{params:u,headers:c,responseType:n,withCredentials:s,timeout:i,mode:a})}getHeadersFromOptions(e){return e instanceof Ue?e:new Ue(e)}getParamsFromOptions(e){return e instanceof Ne?e:new Ne(e)}initUrlWithParams(){const e=this.params.toString();if(0===e.length)return this.url;const t=this.url.indexOf("?"),r=-1===t?"?":t<this.url.length-1?"&":"";return this.url+r+e}static mightHaveBody(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":return!1;default:return!0}}static isArrayBuffer(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}}class xe{constructor(e){this.handler=new Me(e)}request(...e){return this.makeRequest(...e)}delete(e,t){return this.makeRequest("DELETE",e,t)}get(e,t){return this.makeRequest("GET",e,t)}head(e,t){return this.makeRequest("HEAD",e,t)}options(e,t){return this.makeRequest("OPTIONS",e,t)}patch(e,t,r){return this.makeRequest("PATCH",e,{body:t,...r})}post(e,t,r){return this.makeRequest("POST",e,{body:t,...r})}put(e,t,r){return this.makeRequest("PUT",e,{body:t,...r})}makeRequest(...e){let t,r,n;if(1===e.length)t=e[0],r="response";else{const[o,s,i]=e;t=new Te(o,s,void 0!==i.body?i.body:null,{headers:i.headers,params:i.params,responseType:i.responseType??"json",withCredentials:i.withCredentials}),r=i.observe??"body","json"===i.responseType&&"body"===i.observe&&(n=i.responseBodyDecoder)}const o=(0,je.of)(this.addContentTypeRequestHeader(t)).pipe((0,Ae.b)((e=>this.handler.handle(e))));switch(r){case"body":switch(t.responseType){case"arraybuffer":return o.pipe((0,Ie.Gx)((e=>e.arrayBuffer())));case"text":return o.pipe((0,Ie.Gx)((e=>e.text())));case"json":return o.pipe((0,Ie.Gx)((e=>e.json(n))));default:(0,R.U)(t.responseType)}break;case"response":return o;default:(0,R.U)(r)}}addContentTypeRequestHeader(e){if(!e.headers.has("content-type")){const t=e.detectContentTypeHeader();if(t)return e.clone({headers:e.headers.set("content-type",t)})}return e}}class Fe{constructor(e){this.values=e}matches(e){return!(this.values?.method&&this.values.method!==e.method||void 0!==this.values?.url&&this.values.url!==e.url||void 0!==this.values?.body&&JSON.stringify(this.values.body)!==JSON.stringify(e.body)||void 0!==this.values?.headers&&!Object.keys(this.values.headers).reduce(((t,r)=>{const n=this.values.headers[r],o=Array.isArray(n)?n:[n],s=e.headers.getAll(r).every((e=>o.includes(e)));return t&&s}),!0)||void 0!==this.values?.params||void 0!==this.values?.responseType&&this.values.responseType!==e.responseType||void 0!==this.values?.withCredentials&&this.values.withCredentials!==e.withCredentials||void 0!==this.values?.timeout&&this.values.timeout!==e.timeout||void 0!==this.values?.mode&&this.values.mode!==e.mode)}}"undefined"!=typeof expect&&expect.extend({toMatchHttpRequest(e,t){const r=new Fe(t).matches(e);return{message:()=>r?"Passed":"Failed",pass:r}}});var ke,Le=r(100225);async function Ge(e){const t=e.getReader();let r=new Uint8Array(0),n=await t.read();for(;!n.done;){const e=new Uint8Array(r.byteLength+n.value.byteLength);e.set(r,0),e.set(n.value,r.byteLength),r=e,n=await t.read()}return r}!function(e){e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired"}(ke||(ke={}));class Be{constructor(e){this.bytesRead=0,this.data=e}pull(e){const{bytesRead:t,data:r}=this;if(t>=r.byteLength)return void e.close();const n=Math.min(r.byteLength-t,e.desiredSize??1/0);if(n>0){const o=new Uint8Array(r,t,n);e.enqueue(o),this.bytesRead+=n}t>=r.byteLength&&e.close()}}class qe{constructor(e={},t=ke.Ok,r="OK"){this.headers=e.headers??new Ue,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText??r,this.url=e.url??null,this.ok=this.status>=200&&this.status<300,this.body=void 0!==e.body?e.body:null}clone(e={}){return new qe({body:void 0!==e.body?e.body:null===this.body?null:this.body instanceof Le.Pz?this.body.tee()[0]:this.body,headers:e.headers??this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText??this.statusText,url:e.url??this.url??void 0})}async arrayBuffer(){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name)return(await Ge(this.body)).buffer;if(!(this.body instanceof ArrayBuffer))throw new Error("Unexpected body type, not an ArrayBuffer");return this.body}async text(){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name){const e=await Ge(this.body);return(0,o.b)(e)}if("string"!=typeof this.body)throw new Error("Unexpected body type, not a string");return this.body}async json(e){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name){const t=await Ge(this.body),r=(0,o.b)(t);try{const t=JSON.parse(r);return e.decode(t)}catch(e){throw new Error("Failed to parse response body JSON")}}if(this.body instanceof ArrayBuffer||"string"==typeof this.body)throw new Error("Unexpected body type");return e.decode(this.body)}bodyStream(){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name)return this.body;if("string"==typeof this.body)return new Le.Pz(new Be((0,s.u)(this.body)));if(this.body instanceof ArrayBuffer)return new Le.Pz(new Be(this.body));const e=JSON.stringify(this.body);return new Le.Pz(new Be((0,s.u)(e)))}}var He=r(996168);class Ve extends((0,He.Hu)("BadStatus","The HTTP response has a non-successful status code (not 2XX)")){constructor(e){super(),this.response=e}}class $e extends((0,He.Hu)("FetchFailedError","Something happened while communicating to the server")){}},996168:(e,t,r)=>{r.d(t,{As:()=>o,BU:()=>s,Hu:()=>n});const n=(e,t)=>class extends Error{constructor(){super(t),this.tag=e}};function o(e,t){return t.includes(e.tag)}const s=e=>e.tag},220195:(e,t,r)=>{function n(e){if(e instanceof Error)throw e;if("string"==typeof e)throw new Error(e);throw new Error(e.tag)}r.d(t,{j:()=>n})},361475:(e,t,r)=>{r.r(t),r.d(t,{FunctionalError:()=>n.Hu,assertUnreachable:()=>s.U,concatMapFailure:()=>c.Tc,concatMapSuccess:()=>c.Gx,concatMatchResult:()=>c.RW,createMatchable:()=>i.H6,failure:()=>a.Rn,getBrander:()=>u.zq,getFailure:()=>a.Yv,getSuccess:()=>a.db,hasProperty:()=>u.l$,isFailure:()=>a.hx,isFunctionalErrorOfType:()=>n.As,isMatchable:()=>i.cw,isResult:()=>a.AZ,isSuccess:()=>a.d6,mapFailure:()=>a.SN,mapFailureObservable:()=>c.DZ,mapResultObservable:()=>c.vg,mapSuccess:()=>a.ty,mapSuccessObservable:()=>c.Qn,mapSuccessResultObservable:()=>c.lk,match:()=>i.EQ,matchResultObservable:()=>c.nb,panic:()=>o.j,safeCast:()=>u.Ay,success:()=>a.Vp,switchMapFailure:()=>c.pr,switchMapSuccess:()=>c.CP,switchMatchResult:()=>c.bM,toFunctionalErrorCode:()=>n.BU});var n=r(996168),o=r(220195),s=r(295087),i=r(18533),a=r(287279),c=r(948844),u=r(828489)},295087:(e,t,r)=>{function n(e,t){throw new Error(t??`Unreachable code detected (${e})`)}r.d(t,{U:()=>n})},18533:(e,t,r)=>{r.d(t,{EQ:()=>s,H6:()=>o,cw:()=>i});var n=r(828489);const o=(e,t)=>({tag:e,...t}),s=(e,t)=>{const r=e.tag,n=r in t?t[r]:null;if(!n)throw new Error("Unmatchable case");return n(e)},i=(e,...t)=>!("object"!=typeof e||!e)&&((0,n.l$)(e,"tag")&&t.includes(e.tag))},948844:(e,t,r)=>{r.d(t,{CP:()=>y,DZ:()=>d,Gx:()=>f,Qn:()=>u,RW:()=>h,Tc:()=>m,bM:()=>b,lk:()=>p,nb:()=>c,pr:()=>v,vg:()=>l});var n=r(87065),o=r(734987),s=r(243978),i=r(287279),a=r(18533);function c(e){return t=>t.pipe((0,n.U)((t=>(0,a.EQ)(t,{success:({data:t})=>e.success(t),failure:({error:t})=>e.failure(t)}))))}function u(e){return t=>t.pipe((0,n.U)((t=>(0,i.hx)(t)?t:(0,i.Vp)(e(t.data)))))}function d(e){return t=>t.pipe((0,n.U)((t=>(0,i.d6)(t)?t:(0,i.Rn)(e(t.error)))))}function l(e,t){return r=>r.pipe((0,n.U)((r=>(0,i.hx)(r)?t?t(r.error):r:e(r.data))))}function p(e){return t=>t.pipe((0,n.U)((t=>(0,i.hx)(t)?t:e(t.data))))}function f(e){return t=>t.pipe((0,o.b)((async t=>(0,i.hx)(t)?t:(0,i.Vp)(await e(t.data)))))}function m(e){return t=>t.pipe((0,o.b)((async t=>(0,i.d6)(t)?t:(0,i.Rn)(await e(t.error)))))}function h(e){return t=>t.pipe((0,o.b)((t=>(0,i.f2)(t,e))))}function y(e){return t=>t.pipe((0,s.w)((async t=>(0,i.hx)(t)?t:(0,i.Vp)(await e(t.data)))))}function v(e){return t=>t.pipe((0,s.w)((async t=>(0,i.d6)(t)?t:(0,i.Rn)(await e(t.error)))))}function b(e){return t=>t.pipe((0,s.w)((t=>(0,i.f2)(t,e))))}},287279:(e,t,r)=>{r.d(t,{Rn:()=>a,Yv:()=>f,db:()=>p,hx:()=>d,AZ:()=>l,d6:()=>u,SN:()=>h,ty:()=>m,f2:()=>c,Vp:()=>i});var n=r(18533);const o="success",s="failure",i=e=>(0,n.H6)("success",{data:e}),a=e=>(0,n.H6)("failure",{error:e}),c=(e,t)=>(0,n.EQ)(e,{success:({data:e})=>t.success(e),failure:({error:e})=>t.failure(e)}),u=e=>e.tag===o,d=e=>e.tag===s,l=e=>(0,n.cw)(e,o,s),p=e=>e.data,f=e=>e.error,m=(e,t)=>d(e)?e:i(t(e.data)),h=(e,t)=>u(e)?e:a(t(e.error))},828489:(e,t,r)=>{r.d(t,{Ay:()=>o,l$:()=>s,zq:()=>n});const n=e=>t=>Object.assign(t,{brand:e}),o=e=>e;function s(e,t){return t in e}}}]);