"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[1808],{336930:(e,t,a)=>{a.r(t),a.d(t,{NoteAddPanel:()=>v});var s=a(616274),i=a(704841),o=a(611792),n=a(696832),c=a(511494),r=a(148038),l=a(190481),u=a(854029),d=a(987364),S=a(959074),m=a(205838),h=a(762863),g=a(78372),p=a(419581),y=a(225002),C=a(846074),N=a(680441),b=a(202281),f=a(158668),E=a(145677),I=a(75032),T=a(750101);const{CONTENT:w,DOCUMENT_STORAGE:A}=g.J,F={noteCategories:{query:s.C.getNoteCategories}},k={strategies:F},v=(0,i.$)((0,o.i)((({lee:e,noteCategories:t})=>{var a,i;const{routes:o}=(0,S.Xo)(),g=(0,N.aV)(),F=(0,b.Y)(),{openPaywall:k}=(0,E.nL)(),v=(0,l.k6)(),[_,P]=(0,n.useState)(w),[D,O]=(0,n.useState)(!1),[U,V]=(0,n.useState)(!1),[q,z]=(0,n.useState)([]),[R,B]=(0,n.useState)({category:"noCategory",type:"GRAY",spaceId:null!=(a=(0,u.B)(e.globalState))?a:"",secured:!1}),[G,L]=(0,n.useState)(!1),[M,X]=(0,n.useState)(""),[Y,x]=(0,n.useState)(""),H={attachments:q.map(p.w),id:"",limitedPermissions:!1,content:M,title:Y,...R};if((0,n.useEffect)((()=>{(0,d.N)(c.PageView.ItemSecureNoteCreate)}),[]),F.status!==r.rq.Success||!F?.data)return null;const J=(0,f.n6)(f.Co.SecureNotes,F.data?.capabilities),K=()=>{(0,d.N)(c.PageView.ItemSecureNoteList),(0,C.z)(),(0,l.uX)(o.userSecureNotes)},Q=()=>O(!0);return J&&(k(f.qd.SecureNote),v.push("/secure-notes")),n.createElement(h.zI,{isViewingExistingItem:!1,itemHasBeenEdited:D,submitPending:U,onSubmit:async()=>{if(!U){V(!0);try{await(async()=>{await s.C.addSecureNote({...R,content:M,title:Y,attachments:H.attachments}),z([])})()}catch{V(!1)}(0,I.au)(),K()}},secondaryActions:_===A?[i||(i=n.createElement(y.d,{isQuotaReached:!1,isShared:!1,onFileUploadStarted:()=>{L(!0)},onFileUploadDone:async e=>{L(!1),e.success&&(await s.C.commitSecureFile({secureFileInfo:e.secureFileInfo}),z([...q,e.secureFileInfo]),O(!0))},key:"uploadAction",dataType:"KWSecureNote"}))]:[],primaryActions:[],onNavigateOut:()=>{q.forEach((async e=>{const{Id:t}=e;await s.C.deleteSecureFile({id:t})})),(0,C.z)(),z([]),K()},formId:"add_securenote_panel",header:n.createElement(T.h,{activeTab:_,backgroundColor:H.type,displayDocumentStorage:!0,displaySharedAccess:!1,setActiveTab:P,title:Y,setTitle:e=>{Q(),x(e)}})},n.createElement(m.T,{activeTab:_,data:H,content:M,setContent:X,handleFileInfoDetached:e=>{z(q.filter((t=>t.Id!==e)))},hasAttachment:!1,isAdmin:!1,isSecureNoteAttachmentEnabled:g,isShared:!1,isUploading:G,lee:e,noteCategories:t.items,onModifyData:Q,saveSecureNoteOptions:B}))}),k),F)}}]);