"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[6323],{787529:(e,t,a)=>{a.d(t,{t:()=>f});var r=a(696832),n=a(238250),l=a(708608),i=a(190481),d=a(925112),s=a(446389),c=a(160041),o=a(5727);const u=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:n}=(0,s.Z)();return(0,o.tZ)(l.Ejs,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexDirection:"row",flexWrap:"nowrap"},a?(0,o.tZ)(l.zxk,{type:"submit",form:e,disabled:r},n("webapp_panel_edition_generic_save_changes")):null,(0,o.tZ)(l.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button"},n("webapp_panel_edition_generic_cancel_changes")))};var _=a(987364),E=a(511494),m=a(75032);const p="id-add-form",R={GENERIC_ERROR:"_common_generic_error"};function f({addItem:e,children:t,initialValues:a,listRoute:o,reportError:f,countryToKeys:b,header:L,type:h}){const{translate:C}=(0,s.Z)(),[A,I]=r.useState(!1),[g,w]=r.useState(!1),[y,N]=r.useState(a.country),B=(0,d.V)();r.useEffect((()=>{const e={driverLicenses:E.PageView.ItemDriverLicenceCreate,fiscalIds:E.PageView.ItemFiscalStatementCreate,idCards:E.PageView.ItemIdCardCreate,passports:E.PageView.ItemPassportCreate,socialSecurityIds:E.PageView.ItemSocialSecurityStatementCreate};(0,_.N)(e[h])}),[h]);const S=()=>{(0,_.N)(E.PageView.ItemIdList),(0,i.uX)(o)},T=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;I(t),w(a),N(r.country)}}));return r.createElement(r.Fragment,null,L(y),r.createElement(c.P,{formId:p,formRef:T.current,handleSubmit:async(t,{setSubmitting:a,setFieldError:r})=>{try{const i=await e(t);!0===i.success?(B.showAlert(C(b(y).success),l.BLW.SUCCESS),(0,m.au)(),S()):(a(!1),i.error?.code===n.AddIdResultErrorCode.MISSING_ID_NUMBER?r("idNumber",""):(B.showAlert(C(R.GENERIC_ERROR),l.BLW.ERROR),f(new Error("[ids][add] Unable to add id"),i.error?.code)))}catch(e){a(!1),B.showAlert(C(R.GENERIC_ERROR),l.BLW.ERROR),f(e,"[ids][add] Unexpected exception while add id")}},initialValues:a,variant:"add"},(e=>t({values:e}))),r.createElement(u,{formId:p,handleCancel:()=>{S()},hasDataBeenModified:A,isSubmitting:g}))}},559769:(e,t,a)=>{a.r(t),a.d(t,{FiscalIdAddPanel:()=>p});var r,n=a(696832),l=a(616274),i=a(446389),d=a(854029),s=a(787529),c=a(974463),o=a(640461),u=a(531198);const _="fiscalIds",E=()=>({title:"webapp_id_creation_fiscalid_title_default",success:"webapp_id_creation_fiscalid_alert_add_success_default"}),m=e=>l.C.addFiscalId(e),p=({lee:e,listRoute:t,setDialogActive:a})=>{var l;const{translate:p}=(0,i.Z)(),R={idNumber:"",teledeclarantNumber:"",country:(0,o.lt)(e.carbon.currentLocation),spaceId:null!=(l=(0,d.B)(e.globalState))?l:""};return n.createElement(s.t,{addItem:m,initialValues:R,listRoute:t,reportError:e.reportError,setDialogActive:a,countryToKeys:E,type:_,header:e=>n.createElement(u.h,{title:p("webapp_id_creation_fiscalid_title_default"),country:e,type:_})},(()=>r||(r=n.createElement(c.U,{variant:"add"}))))}},974463:(e,t,a)=>{a.d(t,{U:()=>_});var r,n,l=a(696832),i=a(446389),d=a(820523),s=a(519843),c=a(984161),o=a(169491);const u={...c.k,TELEDECLARANT_NUMBER_LABEL:"webapp_id_form_field_label_teledeclarant_number",TELEDECLARANT_NUMBER_PLACEHOLDER:"webapp_id_form_field_placeholder_teledeclarant_number",TAX_NUMBER_LABEL_DEFAULT:"webapp_id_form_field_label_tax_number"},_=l.memo((({variant:e,handleCopy:t})=>{const{translate:a}=(0,i.Z)(),c=l.useRef(null);return l.useEffect("add"===e?()=>{const e=setTimeout((()=>{c.current?.focus()}),d.s);return()=>clearTimeout(e)}:()=>{},[]),l.createElement(l.Fragment,null,l.createElement(o.G1,{name:"idNumber",label:a(u.TAX_NUMBER_LABEL_DEFAULT),placeholder:a(u.ID_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0,ref:c}),l.createElement(o.xu,{name:"teledeclarantNumber",label:a(u.TELEDECLARANT_NUMBER_LABEL),placeholder:a(u.TELEDECLARANT_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0}),l.createElement(o.Dz,{name:"country",label:a(u.COUNTRY_LABEL)}),r||(r=l.createElement(s.c,{height:24})),n||(n=l.createElement(o.A0,{name:"spaceId"})))}))}}]);