"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[3123],{787529:(e,t,a)=>{a.d(t,{t:()=>L});var r=a(696832),n=a(238250),l=a(708608),s=a(190481),i=a(925112),o=a(446389),c=a(160041),d=a(5727);const u=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:n}=(0,o.Z)();return(0,d.tZ)(l.Ejs,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexDirection:"row",flexWrap:"nowrap"},a?(0,d.tZ)(l.zxk,{type:"submit",form:e,disabled:r},n("webapp_panel_edition_generic_save_changes")):null,(0,d.tZ)(l.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button"},n("webapp_panel_edition_generic_cancel_changes")))};var _=a(987364),E=a(511494),m=a(75032);const p="id-add-form",I={GENERIC_ERROR:"_common_generic_error"};function L({addItem:e,children:t,initialValues:a,listRoute:d,reportError:L,countryToKeys:f,header:C,type:R}){const{translate:b}=(0,o.Z)(),[h,A]=r.useState(!1),[S,y]=r.useState(!1),[g,w]=r.useState(a.country),P=(0,i.V)();r.useEffect((()=>{const e={driverLicenses:E.PageView.ItemDriverLicenceCreate,fiscalIds:E.PageView.ItemFiscalStatementCreate,idCards:E.PageView.ItemIdCardCreate,passports:E.PageView.ItemPassportCreate,socialSecurityIds:E.PageView.ItemSocialSecurityStatementCreate};(0,_.N)(e[R])}),[R]);const v=()=>{(0,_.N)(E.PageView.ItemIdList),(0,s.uX)(d)},D=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;A(t),y(a),w(r.country)}}));return r.createElement(r.Fragment,null,C(g),r.createElement(c.P,{formId:p,formRef:D.current,handleSubmit:async(t,{setSubmitting:a,setFieldError:r})=>{try{const s=await e(t);!0===s.success?(P.showAlert(b(f(g).success),l.BLW.SUCCESS),(0,m.au)(),v()):(a(!1),s.error?.code===n.AddIdResultErrorCode.MISSING_ID_NUMBER?r("idNumber",""):(P.showAlert(b(I.GENERIC_ERROR),l.BLW.ERROR),L(new Error("[ids][add] Unable to add id"),s.error?.code)))}catch(e){a(!1),P.showAlert(b(I.GENERIC_ERROR),l.BLW.ERROR),L(e,"[ids][add] Unexpected exception while add id")}},initialValues:a,variant:"add"},(e=>t({values:e}))),r.createElement(u,{formId:p,handleCancel:()=>{v()},hasDataBeenModified:h,isSubmitting:S}))}},144320:(e,t,a)=>{a.r(t),a.d(t,{PassportAddPanel:()=>m});var r=a(696832),n=a(616274),l=a(446389),s=a(854029),i=a(787529),o=a(640461),c=a(531198),d=a(32271);const u="passports",_=()=>({title:"webapp_id_creation_passport_title_default",success:"webapp_id_creation_passport_alert_add_success_default"}),E=e=>n.C.addPassport(e),m=({lee:e,listRoute:t,setDialogActive:a})=>{var n;const{translate:m}=(0,l.Z)(),p={name:"",idNumber:"",expirationDate:null,issueDate:null,country:(0,o.lt)(e.carbon.currentLocation),spaceId:null!=(n=(0,s.B)(e.globalState))?n:"",deliveryPlace:""};return r.createElement(i.t,{addItem:E,initialValues:p,listRoute:t,reportError:e.reportError,setDialogActive:a,countryToKeys:_,type:u,header:e=>r.createElement(c.h,{title:m("webapp_id_creation_passport_title_default"),country:e,type:u})},(({values:e})=>r.createElement(d.g,{variant:"add",values:e})))}},200539:(e,t,a)=>{a.d(t,{a:()=>n});var r=a(453576);const n=new Set([r.Country.AU,r.Country.GB,r.Country.IE,r.Country.NZ])},32271:(e,t,a)=>{a.d(t,{g:()=>E});var r,n,l=a(696832),s=a(446389),i=a(820523),o=a(519843),c=a(200539),d=a(984161),u=a(169491);const _={...d.k,PLACE_OF_ISSUE_LABEL:"webapp_id_form_field_label_place_of_issue",PLACE_OF_ISSUE_PLACEHOLDER:"webapp_id_form_field_placeholder_place_of_issue"},E=l.memo((({variant:e,handleCopy:t,values:a})=>{const{translate:d}=(0,s.Z)(),E=l.useRef(null);return l.useEffect("add"===e?()=>{const e=setTimeout((()=>{E.current?.focus()}),i.s);return()=>clearTimeout(e)}:()=>{},[]),l.createElement(l.Fragment,null,l.createElement(u.YI,{name:"name",label:d(_.NAME_LABEL),placeholder:d(_.NAME_PLACEHOLDER),ref:E}),l.createElement(u.G1,{name:"idNumber",label:d(_.ID_NUMBER_LABEL),placeholder:d(_.ID_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0}),l.createElement(u.Nn,{name:"issueDate",label:d(_.ISSUE_DATE_LABEL)}),l.createElement(u.Nn,{name:"expirationDate",label:d(c.a.has(a.country)?_.EXPIRATION_DATE_LABEL_UK:_.EXPIRATION_DATE_LABEL_US)}),l.createElement(u.Dz,{name:"country",label:d(_.COUNTRY_LABEL)}),l.createElement(u.YI,{name:"deliveryPlace",label:d(_.PLACE_OF_ISSUE_LABEL),placeholder:d(_.PLACE_OF_ISSUE_PLACEHOLDER)}),r||(r=l.createElement(o.c,{height:24})),n||(n=l.createElement(u.A0,{name:"spaceId"})))}))}}]);