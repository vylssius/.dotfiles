"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[2278],{787529:(e,t,a)=>{a.d(t,{t:()=>R});var r=a(696832),n=a(238250),l=a(708608),i=a(190481),s=a(925112),d=a(446389),o=a(160041),c=a(5727);const u=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:n}=(0,d.Z)();return(0,c.tZ)(l.Ejs,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexDirection:"row",flexWrap:"nowrap"},a?(0,c.tZ)(l.zxk,{type:"submit",form:e,disabled:r},n("webapp_panel_edition_generic_save_changes")):null,(0,c.tZ)(l.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button"},n("webapp_panel_edition_generic_cancel_changes")))};var E=a(987364),m=a(511494),_=a(75032);const p="id-add-form",I={GENERIC_ERROR:"_common_generic_error"};function R({addItem:e,children:t,initialValues:a,listRoute:c,reportError:R,countryToKeys:C,header:h,type:f}){const{translate:b}=(0,d.Z)(),[y,g]=r.useState(!1),[A,L]=r.useState(!1),[S,w]=r.useState(a.country),v=(0,s.V)();r.useEffect((()=>{const e={driverLicenses:m.PageView.ItemDriverLicenceCreate,fiscalIds:m.PageView.ItemFiscalStatementCreate,idCards:m.PageView.ItemIdCardCreate,passports:m.PageView.ItemPassportCreate,socialSecurityIds:m.PageView.ItemSocialSecurityStatementCreate};(0,E.N)(e[f])}),[f]);const N=()=>{(0,E.N)(m.PageView.ItemIdList),(0,i.uX)(c)},D=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;g(t),L(a),w(r.country)}}));return r.createElement(r.Fragment,null,h(S),r.createElement(o.P,{formId:p,formRef:D.current,handleSubmit:async(t,{setSubmitting:a,setFieldError:r})=>{try{const i=await e(t);!0===i.success?(v.showAlert(b(C(S).success),l.BLW.SUCCESS),(0,_.au)(),N()):(a(!1),i.error?.code===n.AddIdResultErrorCode.MISSING_ID_NUMBER?r("idNumber",""):(v.showAlert(b(I.GENERIC_ERROR),l.BLW.ERROR),R(new Error("[ids][add] Unable to add id"),i.error?.code)))}catch(e){a(!1),v.showAlert(b(I.GENERIC_ERROR),l.BLW.ERROR),R(e,"[ids][add] Unexpected exception while add id")}},initialValues:a,variant:"add"},(e=>t({values:e}))),r.createElement(u,{formId:p,handleCancel:()=>{N()},hasDataBeenModified:y,isSubmitting:A}))}},819544:(e,t,a)=>{a.r(t),a.d(t,{IdCardAddPanel:()=>_});var r=a(696832),n=a(616274),l=a(854029),i=a(446389),s=a(787529),d=a(640461),o=a(531198),c=a(84369);const u="idCards",E=()=>({title:"webapp_id_creation_idcard_title_default",success:"webapp_id_creation_idcard_alert_add_success_default"}),m=e=>n.C.addIdCard(e),_=({lee:e,listRoute:t,setDialogActive:a})=>{var n;const{translate:_}=(0,i.Z)(),p={name:"",idNumber:"",expirationDate:null,issueDate:null,country:(0,d.lt)(e.carbon.currentLocation),spaceId:null!=(n=(0,l.B)(e.globalState))?n:""};return r.createElement(s.t,{addItem:m,initialValues:p,listRoute:t,reportError:e.reportError,setDialogActive:a,countryToKeys:E,header:e=>r.createElement(o.h,{title:_("webapp_id_creation_idcard_title_default"),country:e,type:u}),type:u},(({values:e})=>r.createElement(c.P,{variant:"add",values:e})))}},200539:(e,t,a)=>{a.d(t,{a:()=>n});var r=a(453576);const n=new Set([r.Country.AU,r.Country.GB,r.Country.IE,r.Country.NZ])},84369:(e,t,a)=>{a.d(t,{P:()=>m});var r,n,l=a(696832),i=a(446389),s=a(820523),d=a(519843),o=a(200539),c=a(984161),u=a(169491);const E={...c.k},m=l.memo((({variant:e,handleCopy:t,values:a})=>{const{translate:c}=(0,i.Z)(),m=l.useRef(null);return l.useEffect("add"===e?()=>{const e=setTimeout((()=>{m.current?.focus()}),s.s);return()=>clearTimeout(e)}:()=>{},[]),l.createElement(l.Fragment,null,l.createElement(u.YI,{name:"name",label:c(E.NAME_LABEL),placeholder:c(E.NAME_PLACEHOLDER),ref:m}),l.createElement(u.G1,{name:"idNumber",label:c(E.ID_NUMBER_LABEL),placeholder:c(E.ID_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0}),l.createElement(u.Nn,{name:"issueDate",label:c(E.ISSUE_DATE_LABEL)}),l.createElement(u.Nn,{name:"expirationDate",label:c(o.a.has(a.country)?E.EXPIRATION_DATE_LABEL_UK:E.EXPIRATION_DATE_LABEL_US)}),l.createElement(u.Dz,{name:"country",label:c(E.COUNTRY_LABEL)}),r||(r=l.createElement(d.c,{height:24})),n||(n=l.createElement(u.A0,{name:"spaceId"})))}))}}]);