"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[74],{697672:(e,t,a)=>{a.d(t,{B:()=>r});var n=a(696832);const r=()=>{const[e,t]=n.useState(""),[a,r]=n.useState(!1),i=()=>{r(!1)};return n.useEffect((()=>{if(!a)return;const e=setTimeout(i,5e3);return()=>clearTimeout(e)}),[a,e]),{isAlertVisible:a,alertMessage:e,setAlertMessage:t,hide:i,show:()=>{r(!0)}}}},810822:(e,t,a)=>{a.r(t),a.d(t,{PaymentCardEditPanel:()=>D});var n=a(696832),r=a(526849),i=a(238250),o=a(708608),s=a(511494),l=a(925112),c=a(446389),d=a(616274),m=a(190481),u=a(987364),p=a(959074),_=a(937109),C=a(857795),g=a(777352),y=a(148038),S=a(697672),b=a(710938),f=a(762863),h=a(162886),E=a(927761),w=a(75032);const D=({lee:e,match:t})=>{const a=(e=>{const t=(0,y.qr)({queryConfig:{query:d.C.getPaymentCard,queryParam:e},liveConfig:{live:d.C.livePaymentCard,liveParam:e}},[e]);return t.status===y.rq.Success?t.data:void 0})(`{${t.params.uuid}}`),{translate:D}=(0,c.Z)(),{routes:A}=(0,p.Xo)(),B=(0,l.V)(),k=(0,S.B)(),{protectedItemsUnlockerShown:P}=(0,E.tY)(),L=()=>{B.showAlert(D("_common_generic_error"),o.BLW.ERROR)},[T,v]=n.useState(!1),[I,N]=n.useState(!1),[J,O]=n.useState(),[R,q]=n.useState(a);n.useEffect((()=>{(0,u.N)(s.PageView.ItemCreditCardDetails),a&&q(a)}),[a]);const G=n.useCallback((()=>{(0,u.N)(s.PageView.ItemPaymentList),(0,m.uX)(A.userPayments)}),[A]),U=n.useCallback((e=>{v(!(0,r.equals)(e,a)),q(e)}),[a]),V=n.useCallback((()=>{G()}),[G]),[W,Z]=n.useState(!1),M=n.useCallback((()=>Z(!0)),[]),z=n.useCallback((()=>Z(!1)),[]),Y=a?.name||D("payments_header_add_payment_card"),x=D("webapp_payment_edition_delete_text"),F={confirmDeleteConfirm:D("webapp_payment_edition_delete_confirm"),confirmDeleteDismiss:D("webapp_payment_edition_delete_dismiss"),confirmDeleteSubtitle:x,confirmDeleteTitle:D("webapp_payment_edition_delete_header")};return n.createElement(f.zI,{isViewingExistingItem:!0,itemHasBeenEdited:T,onNavigateOut:V,onSubmit:async()=>{if(!I&&a){N(!0);try{const e=await d.C.updatePaymentCard({...R,id:a.id});if(e.success){const e=R?.name||"",t=""===e?D("webapp_payment_edition_generic_update_alert"):D("webapp_payment_edition_name_update_alert",{paymentCard:e});B.showAlert(t,o.BLW.SUCCESS),(0,w.au)(),G()}else N(!1),e.error?.code===i.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE?O(new Set(["cardNumber","securityCode"])):L()}catch(e){N(!1),L()}}},onClickDelete:M,ignoreCloseOnEscape:W||P,formId:"edit_paymentcard_panel",header:n.createElement(f.V9,{icon:n.createElement(_.Z,{paymentCardColor:R?.color,iconSize:"large"}),iconBackgroundColor:(0,g.Z)(R?.color),title:Y})},R&&a?n.createElement(n.Fragment,null,n.createElement(C.g,{itemId:a.id,errors:J,paymentCardContent:R,signalEditedValues:U,showCopyAlert:e=>{k.setAlertMessage(e),k.show()}}),W&&n.createElement(h.h,{closeConfirmDeleteDialog:z,onDeleteConfirm:async()=>{if(a)if((await d.C.deletePaymentCard({id:a.id})).success){const e=""===a.name?D("webapp_payment_edition_generic_delete_alert"):D("webapp_payment_edition_name_delete_alert",{paymentCard:a.name});B.showAlert(e,o.BLW.SUBTLE)}else L();G()},translations:F})):null,k.isAlertVisible&&n.createElement("div",{className:b.Z.alertWrapper},n.createElement(o.bZj,{size:o.k3y.SMALL,severity:o.BLW.SUCCESS,closeIconName:D("_common_alert_dismiss_button"),onClose:()=>{k.hide()}},k.alertMessage)))}},162886:(e,t,a)=>{a.d(t,{Z:()=>c,h:()=>l});var n=a(708608),r=a(696832),i=a(765505),o=a(630886),s=a(174071);const l=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:a})=>{const{confirmDeleteSubtitle:i,confirmDeleteTitle:s,confirmDeleteDismiss:l,confirmDeleteConfirm:c}=a;return r.createElement(o.o,{isOpen:!0,disableBackgroundPanelClose:!0,footer:r.createElement(n.cNS,{primaryButtonTitle:c,primaryButtonOnClick:t,primaryButtonProps:{id:"deletion-dialog-confirm-button"},secondaryButtonTitle:l,secondaryButtonOnClick:e,secondaryButtonProps:{autoFocus:!0,id:"deletion-dialog-dismiss-button"},intent:"danger"}),onRequestClose:e,title:s},i)},c=({reason:e,translations:t,goToSharingAccess:a,closeCantDeleteDialog:l})=>{const c=((e,t)=>{const{groupSharingTitle:a,lastAdminTitle:n,genericErrorTitle:r}=e;switch(t){case i.J.LastAdmin:return n;case i.J.GroupSharing:return a;case i.J.Generic:return r;default:return(0,s.U)(t)}})(t,e),d=((e,t)=>{const{groupSharingSubtitle:a,lastAdminSubtitle:n,genericErrorSubtitle:r}=e;switch(t){case i.J.LastAdmin:return n;case i.J.GroupSharing:return a;case i.J.Generic:return r;default:return(0,s.U)(t)}})(t,e);return r.createElement(o.o,{isOpen:!0,showCloseIcon:!0,disableBackgroundPanelClose:!0,onRequestClose:l,title:c,footer:e===i.J.LastAdmin?r.createElement(n.cNS,{primaryButtonTitle:t.lastAdminActionLabel,primaryButtonOnClick:a,intent:"danger"}):null},d)}},765505:(e,t,a)=>{let n;a.d(t,{J:()=>n}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(n||(n={}))},710938:(e,t,a)=>{a.d(t,{Z:()=>n});const n={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);