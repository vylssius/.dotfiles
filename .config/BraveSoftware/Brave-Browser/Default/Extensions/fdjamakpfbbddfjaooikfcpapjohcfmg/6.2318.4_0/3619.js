"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[3619],{233619:(e,t,i)=>{i.r(t),i.d(t,{CredentialEditPanel:()=>he});var a=i(616274),n=i(704841),s=i(611792),r=i(696832),l=i(383849),o=i.n(l),c=i(453576),d=i(216530),g=i(24836),I=i(708608),u=i(925112),M=i(446389),C=i(190481),A=i(762863),D=i(162886),m=i(673486),N=i(295265),p=i(765505),w=i(639988),y=i(944537),k=i(879150),z=i(785362),_=i(75032),T=i(665968),x=i(63414),j=(i(135758),i(511494)),b=i(617509),L=i(292210),E=i(658273),S=i(277786),h=i(987364);const O=async e=>{const t=await(0,E.gm)(a.C);return await Promise.all(e.map((e=>(0,j.hashDomain)((e=>t?new L.ParsedURL(e).getRootDomain():(0,S.JI)(e))(e)))))};var v,Z=i(657818),Y=i(63703),P=i(645810);const G=r.memo((({credential:e,onClose:t,openWithNewUrlField:i,onUpdateLinkedWebsitesAddedByUser:a,hasLimitedRights:n})=>{const{translate:s}=(0,M.Z)(),[l,o]=r.useState(e.linkedWebsites.addedByUser),[c,d]=r.useState(i);return r.useEffect((()=>{const t=e.linkedWebsites.addedByUser,i=!(t.length===l.length&&t.every(((e,t)=>l[t]===e)));d(i),a(l)}),[l]),r.createElement("div",{className:Y.Z.form,"data-testid":"linked-websites-tab"},r.createElement("div",{className:P.Z.header},r.createElement("button",{className:P.Z.backButton,onClick:t},v||(v=r.createElement(I.wyc,{size:12}))),r.createElement(I.X6q,{size:"small"},s("webapp_credential_linked_websites_title"))),r.createElement("div",{className:Y.Z.containerBlock},r.createElement(Z.a,{label:"webapp_credential_linked_websites_section_primary",linkedWebsitesList:[e.url],areItemsLocked:n,credentialId:e.id,isEditing:!1})),r.createElement("div",{className:Y.Z.containerBlock},r.createElement(Z.a,{label:"webapp_credential_linked_websites_section_added_by_user",linkedWebsitesList:l,areItemsLocked:n,credentialId:e.id,isListEditable:!n,isEditing:c,showUrlProtocol:!0,updateLinkedWebsitesList:o})),e.linkedWebsites.addedByDashlane.length>1?r.createElement("div",{className:Y.Z.containerBlock},r.createElement(Z.a,{label:"webapp_credential_linked_websites_section_added_by_dashlane",linkedWebsitesList:e.linkedWebsites.addedByDashlane,areItemsLocked:!0,credentialId:e.id,isEditing:!1})):null)})),U=({onClose:e})=>{const{translate:t}=(0,M.Z)();return r.createElement(I.YcA,null,r.createElement(I.bZj,{size:I.k3y.SMALL,severity:I.BLW.SUCCESS,closeIconName:t("_common_alert_dismiss_button"),onClose:e},t("_common_toast_changes_saved")))};var W=i(630886);const f=({onCancel:e,onLeavePageWithoutSaving:t})=>{const{translate:i}=(0,M.Z)();return r.createElement(W.o,{isOpen:!0,showCloseIcon:!0,title:i("webapp_credential_linked_websites_discard_dialog_title"),onRequestClose:e,footer:r.createElement(I.Ejs,{justifyContent:"end",gap:"8px"},r.createElement(I.zxk,{type:"button",nature:"secondary",onClick:e},i("webapp_credential_linked_websites_discard_dialog_cancel")),r.createElement(I.zxk,{type:"button",onClick:t},i("webapp_credential_linked_websites_discard_dialog_discard")))},r.createElement(I.Ejs,{flexDirection:"column",gap:"8px",sx:{width:"576px"}},r.createElement(I.nvN,null,i.markup("webapp_credential_linked_websites_discard_dialog_description_markup"))))},Q=({duplicateData:e,onCancel:t,onSave:i})=>{const{translate:a}=(0,M.Z)(),n=e.length>1,s=n?a("webapp_credential_linked_websites_duplicate_prevention_dialog_title_multiple"):a("webapp_credential_linked_websites_duplicate_prevention_dialog_title_one",{url:e[0].linkedWebsite}),l=n?a("webapp_credential_linked_websites_duplicate_prevention_dialog_description_multiple"):a("webapp_credential_linked_websites_duplicate_prevention_dialog_description_one",{credentialName:e[0].credentialName}),o=a(n?"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_multiple":"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_one");return r.createElement(W.o,{isOpen:!0,showCloseIcon:!0,title:s,onRequestClose:t,footer:r.createElement(I.Ejs,{justifyContent:"end",gap:"8px"},r.createElement(I.zxk,{type:"button",nature:"secondary",onClick:t},a("webapp_credential_linked_websites_duplicate_prevention_dialog_cancel")),r.createElement(I.zxk,{type:"button",onClick:i},o))},r.createElement("div",null,r.createElement("p",null,l),n?r.createElement("ul",{className:"duplicatesList--SwGmL5ftwe"},e.map((e=>r.createElement("li",{key:e.linkedWebsite,className:"duplicateItem--mPX5urdfL2"},e.linkedWebsite)))):null))};var B,R=i(585921);const H="webapp_password_history_detailed_password_view_button",J=({credentialId:e,credHasPasswordHistory:t})=>{const{translate:i}=(0,M.Z)(),{routes:a}=(0,C.Xo)(),n=a.userPasswordHistoryFilteredByCredential(e);return t?r.createElement("div",null,r.createElement(C.rU,{to:n,tabIndex:-1},r.createElement(R.zx,{mood:"neutral",intensity:"quiet",title:i(H),icon:B||(B=r.createElement(I.tru,null)),layout:"iconLeading"},i(H)))):null};var V=i(670138),X=i(959074),F=i(373245),q=i(782038);const K={exit:"exit--p4spwlkedE",exitActive:"exitActive--BIpaDF7MkX",exitDone:"exitDone--KzowOK4h4K",appear:"appear--OcvlWdq5He",appearActive:"appearActive--HVwCcEJzKz",appearDone:"appearDone--KgBJPzbyTA"},$=r.memo((({onPrimaryClick:e})=>{const{translate:t}=(0,M.Z)(),[i,a]=r.useState(!1);return r.createElement(q.Z,{appear:!0,in:!i,timeout:600,classNames:K,onExited:e},r.createElement("div",{className:"infoboxWrapper--wv1g66AwDu"},r.createElement(I.vDh,{title:r.createElement("div",{className:"boxTitle--OPmhjIjNsk"},t("webapp_credential_edition_health_box_excluded_title")),severity:"subtle",size:"descriptive",actions:[r.createElement(I.zxk,{nature:"primary",onClick:e=>{e.preventDefault(),a(!0)},key:"primaryAction",size:"small",type:"button"},t("webapp_credential_edition_health_box_include"))]},r.createElement("div",{className:"descriptionWarning--MZGXiyazU_"},t("webapp_credential_edition_health_box_excluded_description")))))}));var ee=i(174071),te=i(740368),ie=i(847336);const ae={appear:"appear--MMCjEcRU3u",appearActive:"appearActive--LG103cUrNZ",appearDone:"appearDone--tuYaN3WTGO"},ne="infoboxWrapper--HmImoFEcPo",se=r.memo((({onPrimaryClick:e,onSecondaryClick:t,riskType:i,isLimitedSharingPassword:a})=>{const{translate:n}=(0,M.Z)(),s=((e,t)=>{switch(e.label){case ie.y.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case ie.y.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.count}),secondary:t("webapp_credential_edition_health_box_view_reused")};case ie.y.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,ee.U)(e)}})(i,n),r=i.level===te.r.Compromised?"warning":"brand";return(0,R.tZ)(q.Z,{in:!0,appear:!0,timeout:600,classNames:ae},(0,R.tZ)("div",{className:ne,sx:{backgroundColor:"ds.background.default"}},(0,R.tZ)(R.ke,{title:s.title,description:s.description,mood:r,size:"large",actions:[(0,R.tZ)(R.zx,{onClick:t,intensity:"quiet",key:"view_health",size:"small"},s.secondary),(0,R.tZ)(I.ua7,{passThrough:!a,key:"change_password",content:n("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2}},(0,R.tZ)(R.zx,{size:"small",onClick:e,disabled:a},n("webapp_credential_edition_health_box_change_password")))]})))})),re=JSON.parse('{"v":"5.7.0","fr":30,"ip":0,"op":26,"w":240,"h":240,"nm":"Loading Light Theme","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 4","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[120,122,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"load","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.05490196078,0.2078431373,0.2392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":12.5,"s":[42]},{"t":25,"s":[10]}],"ix":2},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.2],"y":[0]},"t":0,"s":[-19]},{"t":25,"s":[341]}],"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"load 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.9058823529,0.9215686275,0.9254901961,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":".","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0}],"markers":[]}');var le=i(383967);const oe="healthInfoContainer--Oetnuw7mbu",ce="loader--q4x90RGHZr";var de=i(154539);const ge=r.memo((({onPrimaryClick:e,onSecondaryClick:t,isLimitedSharingPassword:i,corruptionData:a})=>{const{translate:n}=(0,M.Z)();if(!a)return null;const s=((e,t)=>{const{riskType:i}=e;switch(i){case de.RiskType.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case de.RiskType.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.reuseCount}),secondary:t("webapp_credential_edition_health_box_view_reused")};case de.RiskType.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,ee.U)(i)}})(a,n),r=a.severity===de.CorruptionDataSeverity.STRONG?"warning":"brand";return(0,R.tZ)(q.Z,{in:!0,appear:!0,timeout:600,classNames:ae},(0,R.tZ)("div",{className:ne,sx:{backgroundColor:"ds.background.default"}},(0,R.tZ)(R.ke,{title:s.title,description:s.description,mood:r,size:"large",actions:[(0,R.tZ)(R.zx,{onClick:t,intensity:"quiet",key:"view_health",size:"small"},s.secondary),(0,R.tZ)(I.ua7,{passThrough:!i,key:"change_password",content:n("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2}},(0,R.tZ)(R.zx,{size:"small",onClick:e,disabled:i},n("webapp_credential_edition_health_box_change_password")))]})))}));var Ie=i(89184);const ue=({credential:e})=>{const t=(0,C.k6)(),{routes:i}=(0,X.Xo)(),a=(0,ie.j)(e.health),[n,s]=(0,r.useState)(null),l=(0,r.useCallback)((e=>s(e)),[]),o=(0,r.useCallback)((()=>s(null)),[]),c=e.sharingStatus?.isShared&&"limited"===e.sharingStatus.permission||!1,d=(0,r.useCallback)((t=>{t.preventDefault(),l(e.id)}),[e.domainIcon,e.id,e.title,e.url,e.redirectUrl,l,a.label]),I=(0,r.useCallback)((e=>{e.preventDefault(),t.push(i.userPasswordHealth)}),[t,i.userPasswordHealth]),{updateIsCredentialExcluded:u}=(0,Ie.$)(),{healthData:M}=(e=>{const{data:t}=(0,g.k$)(de.passwordHealthApi,"credentialHealthData",{credentialId:e});return{healthData:t}})(e.id),A=(0,r.useCallback)((()=>{u(e.id,!1)}),[e.id,u]);return null===M?null:M?r.createElement("div",{className:oe},n?r.createElement(le.R,{credentialId:n,dismissCallback:o}):null,r.createElement("div",{className:ce},r.createElement(F.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:re}})),M.excluded?r.createElement($,{onPrimaryClick:A}):r.createElement(ge,{onPrimaryClick:d,onSecondaryClick:I,isLimitedSharingPassword:c,corruptionData:M.corruptionData})):r.createElement("div",{className:oe},r.createElement("div",{className:ce},r.createElement(F.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:re}})))},Me=({credential:e})=>{const t=(0,C.k6)(),{routes:i}=(0,X.Xo)(),n=(0,ie.j)(e.health),[s,l]=(0,r.useState)(null),o=(0,r.useCallback)((e=>l(e)),[]),c=(0,r.useCallback)((()=>l(null)),[]),d=e.sharingStatus?.isShared&&"limited"===e.sharingStatus.permission||!1,g=(0,r.useCallback)((t=>{t.preventDefault(),o(e.id)}),[e.domainIcon,e.id,e.title,e.url,e.redirectUrl,o,n.label]),I=(0,r.useCallback)((e=>{e.preventDefault(),t.push(i.userPasswordHealth)}),[t,i.userPasswordHealth]),u=(0,r.useCallback)((async()=>{await a.C.updateCredential({id:e.id,update:{isExcludedFromHealth:!1}})}),[e.id]);return n.label!==ie.y.None||e.isExcludedFromHealth?n.label===ie.y.NotComputed?r.createElement("div",{className:oe},r.createElement("div",{className:ce},r.createElement(F.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:re}}))):r.createElement("div",{className:oe},s?r.createElement(le.R,{credentialId:s,dismissCallback:c}):null,r.createElement("div",{className:ce},r.createElement(F.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:re}})),n.label===ie.y.None?r.createElement($,{onPrimaryClick:u}):r.createElement(se,{onPrimaryClick:g,onSecondaryClick:I,riskType:n,isLimitedSharingPassword:d})):null},Ce=({credential:e})=>{const t=(0,V.w)("ims_web_ph_mv3_dev"),i=(0,V.w)("ims_web_ph_mv3_prod");return t||i?r.createElement(ue,{credential:e}):r.createElement(Me,{credential:e})};var Ae=i(982509),De=i(379380),me=i(178948);const{SHARED_ACCESS:Ne,ACCOUNT_DETAILS:pe}=De.Z,we=["160x106@2x","118x98@2x"],ye=({activeTab:e,credential:t,displayTabs:i,changeTab:a,showSecurityScore:n})=>{const{translate:s}=(0,M.Z)(),r=t.strength,l=(0,R.tZ)("div",null,(0,R.tZ)("img",{className:me.Z.icon,src:r<70?"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDE2IDE4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzOS4xICgzMTcyMCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbi1zZXQvcGFzc3dvcmQtc3RyZW5naHQtZmxhZzwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYXNzd29yZHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXZWJBcHBfcGFzc3dvcmRzXzE0NDB4OTAwX2RldGFpbHMtdmlldzJfbWNfdjMuMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk5Mi4wMDAwMDAsIC0xMzYuMDAwMDAwKSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxnIGlkPSJEZXRhaWxzLVZpZXciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgwMC4wMDAwMDAsIDYwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9IkVkaXQiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJIZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0ic3RyZW5ndGgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5Mi4wMDAwMDAsIDc0LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Imljb24tc2V0L3Bhc3N3b3JkLXN0cmVuZ2h0LWZsYWciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNC43MTY4NzEyLDExLjc0ODMwNzYgQzEyLjYyMzkwNTksMTYuNjA0MzQ2OSA4LjAxMDc1NjY1LDE3Ljk5NTc4NjUgOCwxOCBDNy45ODkyNDMzNSwxNy45OTU3ODY1IDMuMzc2MDk0MDcsMTYuNjA0MzQ2OSAxLjI4MzEyODgzLDExLjc0ODMwNzYgQzAuMzUsOS41ODMyNzI0NyAwLDYuNTQ0NTA4NDMgMCwyLjY2NDQ4MDM0IEMwLjE3NjI1NzY2OSwyLjYwNTI1OTgzIDgsMCA4LDAgQzgsMCAxNS44MjM3NDIzLDIuNjA1MjU5ODMgMTYsMi42NjQ0ODAzNCBDMTYsNi41NDQ1MDg0MyAxNS42NDk5Nzk2LDkuNTgzMjcyNDcgMTQuNzE2ODcxMiwxMS43NDgzMDc2IFogTTEwLjk2NTYyMzMsMTAuNDgxNzI3OCBDMTAuOTY1NjIzMywxMC40ODE3Mjc4IDcuOTk4MjQyNTYsMTAuNDgxNzI3OCA3Ljk5ODI0MjU2LDkuODkyNDc5ODUgQzcuOTk4MjQyNTYsOS41MzEzNDA0OCA2Ljg2OTk2MDkxLDkuMzk4NzAwOTkgNS45OTkxOTI5Niw5LjM1MDE4MzkgTDUuOTk5MTkyOTYsMTQgTDUsMTQgTDUsNCBMNS45OTkxOTI5Niw0IEw1Ljk5OTE5Mjk2LDQuMDUyMDM4NSBDNi44NzE2MjAxNSw0LjEzMzAzMDc1IDcuOTk4MjQyNTYsNC4zNDE5NjcyOSA3Ljk5ODI0MjU2LDQuODg0MjYzMjQgQzcuOTk4MjQyNTYsNS43NjgxMzUyMiAxMC45ODEyMjAxLDUuMTk3Mjc2NzggMTAuOTk2ODE3LDUuODA0OTE0MzEgQzExLjAxMjQxMzgsNi40MTI1NTE4NCAxMC45NjU2MjMzLDEwLjQ4MTcyNzggMTAuOTY1NjIzMywxMC40ODE3Mjc4IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4K":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDE2IDE4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzOS4xICgzMTcyMCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbi1zZXQvcGFzc3dvcmQtc3RyZW5naHQtc3Ryb25nPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhc3N3b3JkcyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IldlYkFwcF9wYXNzd29yZHNfMTQ0MHg5MDBfZGV0YWlscy12aWV3X21jX3YzLjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05OTIuMDAwMDAwLCAtMTM2LjAwMDAwMCkiIGZpbGw9IiNGRkZGRkYiPgogICAgICAgICAgICA8ZyBpZD0iRGV0YWlscy1WaWV3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MDAuMDAwMDAwLCA2MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJFZGl0Ij4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iSGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9InN0cmVuZ3RoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTIuMDAwMDAwLCA3NC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uLXNldC9wYXNzd29yZC1zdHJlbmdodC1zdHJvbmciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNC43MTY4NzEyLDExLjc0ODMwNzYgQzEyLjYyMzkwNTksMTYuNjA0MzQ2OSA4LjAxMDc1NjY1LDE3Ljk5NTc4NjUgOCwxOCBDNy45ODkyNDMzNSwxNy45OTU3ODY1IDMuMzc2MDk0MDcsMTYuNjA0MzQ2OSAxLjI4MzEyODgzLDExLjc0ODMwNzYgQzAuMzUsOS41ODMyNzI0NyAwLDYuNTQ0NTA4NDMgMCwyLjY2NDQ4MDM0IEMwLjE3NjI1NzY2OSwyLjYwNTI1OTgzIDgsMCA4LDAgQzgsMCAxNS44MjM3NDIzLDIuNjA1MjU5ODMgMTYsMi42NjQ0ODAzNCBDMTYsNi41NDQ1MDg0MyAxNS42NDk5Nzk2LDkuNTgzMjcyNDcgMTQuNzE2ODcxMiwxMS43NDgzMDc2IFogTTMuOTExOTQzOTgsOS4yODcwMTA5NyBDMy44NDM2NjM4Nyw5LjIxNzc2MDk3IDMuODA5NTIzODEsOS4xMTM4ODU5NyAzLjgwOTUyMzgxLDkuMDQ0NjM1OTcgQzMuODA5NTIzODEsOC45NzUzODU5NyAzLjg0MzY2Mzg3LDguODcxNTEwOTYgMy45MTE5NDM5OCw4LjgwMjI2MDk2IEw0LjM4OTkwNDc4LDguMzE3NTEwOTUgQzQuNTI2NDY1MDEsOC4xNzkwMTA5NCA0LjczMTMwNTM1LDguMTc5MDEwOTQgNC44Njc4NjU1OCw4LjMxNzUxMDk1IEw0LjkwMjAwNTYzLDguMzUyMTM1OTUgTDYuNzc5NzA4NzcsMTAuMzk1MDExIEM2Ljg0Nzk4ODg4LDEwLjQ2NDI2MSA2Ljk1MDQwOTA1LDEwLjQ2NDI2MSA3LjAxODY4OTE2LDEwLjM5NTAxMSBMMTEuNTkzNDU2OCw1LjU4MjEzNTg3IEwxMS42Mjc1OTY5LDUuNTgyMTM1ODcgQzExLjc2NDE1NzEsNS40NDM2MzU4NyAxMS45Njg5OTc0LDUuNDQzNjM1ODcgMTIuMTA1NTU3Nyw1LjU4MjEzNTg3IEwxMi41ODM1MTg0LDYuMDY2ODg1ODkgQzEyLjcyMDA3ODcsNi4yMDUzODU4OSAxMi43MjAwNzg3LDYuNDEzMTM1OSAxMi41ODM1MTg0LDYuNTUxNjM1OSBMNy4xMjExMDkzMywxMi4yOTkzODYxIEM3LjA1MjgyOTIyLDEyLjM2ODYzNjEgNi45ODQ1NDkxMSwxMi40MDMyNjExIDYuODgyMTI4OTQsMTIuNDAzMjYxMSBDNi43Nzk3MDg3NywxMi40MDMyNjExIDYuNzExNDI4NjUsMTIuMzY4NjM2MSA2LjY0MzE0ODU0LDEyLjI5OTM4NjEgTDMuOTgwMjI0MDksOS4zOTA4ODU5OCBMMy45MTE5NDM5OCw5LjI4NzAxMDk3IEwzLjkxMTk0Mzk4LDkuMjg3MDEwOTcgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPgo="}),Math.round(r),"%",(0,R.tZ)("img",{className:me.Z.icon,src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzOS4xICgzMTcyMCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbi1zZXQvaW5mbzwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxjaXJjbGUgaWQ9InBhdGgtMSIgY3g9IjgiIGN5PSI4IiByPSI4Ij48L2NpcmNsZT4KICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBtYXNrQ29udGVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgbWFza1VuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeD0iMCIgeT0iMCIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgPC9tYXNrPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhc3N3b3JkcyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IldlYkFwcF9wYXNzd29yZHNfMTQ0MHg5MDBfZGV0YWlscy12aWV3X21jX3YzLjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDYxLjAwMDAwMCwgLTEzNi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9IkRldGFpbHMtVmlldyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAwLjAwMDAwMCwgNjAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iRWRpdCI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJzdHJlbmd0aCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTkyLjAwMDAwMCwgNzQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbi1zZXQvaW5mbyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjkuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGlkPSJPdmFsLTIiIHN0cm9rZT0iI0ZGRkZGRiIgbWFzaz0idXJsKCNtYXNrLTIpIiBzdHJva2Utd2lkdGg9IjIiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOS43ODIzMjE0MywxMS44ODcxNDI5IEw5LjY0MzEyNSwxMi40NTYxNjA3IEM5LjIyNTUzNTcxLDEyLjYyMDk4MjEgOC44OTE5NjQyOSwxMi43NDY0Mjg2IDguNjQzNTcxNDMsMTIuODMyNjc4NiBDOC4zOTQ5MTA3MSwxMi45MTkxOTY0IDguMTA1OTgyMTQsMTIuOTYyMjMyMSA3Ljc3Njc4NTcxLDEyLjk2MjIzMjEgQzcuMjcxMjUsMTIuOTYyMjMyMSA2Ljg3ODAzNTcxLDEyLjgzODM5MjkgNi41OTc1ODkyOSwxMi41OTI0MTA3IEM2LjMxNzE0Mjg2LDEyLjM0NTQ0NjQgNi4xNzY4NzUsMTIuMDMyNSA2LjE3Njg3NSwxMS42NTI4NTcxIEM2LjE3Njg3NSwxMS41MDU4OTI5IDYuMTg3MDUzNTcsMTEuMzU0NzMyMSA2LjIwODIxNDI5LDExLjIwMDcxNDMgQzYuMjI5NTUzNTcsMTEuMDQ2NTE3OSA2LjI2MzQ4MjE0LDEwLjg3Mjg1NzEgNi4zMDk5MTA3MSwxMC42Nzg3NSBMNi44MzE3ODU3MSw4LjgzMTYwNzE0IEM2Ljg3ODIxNDI5LDguNjU0NzMyMTQgNi45MTc2Nzg1Nyw4LjQ4NzE0Mjg2IDYuOTQ5Mjg1NzEsOC4zMjg2NjA3MSBDNi45ODEzMzkyOSw4LjE3MTE2MDcxIDYuOTk2Nzg1NzEsOC4wMjYyNSA2Ljk5Njc4NTcxLDcuODk1ODAzNTcgQzYuOTk2Nzg1NzEsNy42NTk5MTA3MSA2Ljk0Nzk0NjQzLDcuNDk0OTEwNzEgNi44NTA3MTQyOSw3LjQwMjE0Mjg2IEM2Ljc1MzQ4MjE0LDcuMzA5NjQyODYgNi41Njc5NDY0Myw3LjI2MjY3ODU3IDYuMjkyNSw3LjI2MjY3ODU3IEM2LjE1NzU4OTI5LDcuMjYyNjc4NTcgNi4wMTg5Mjg1Nyw3LjI4NDI4NTcxIDUuODc3NTg5MjksNy4zMjYwNzE0MyBDNS43MzU2MjUsNy4zNjgwMzU3MSA1LjYxNDI4NTcxLDcuNDA4NTcxNDMgNS41MTI0MTA3MSw3LjQ0NjI1IEw1LjY1MTk2NDI5LDYuODc2Nzg1NzEgQzUuOTkzODM5MjksNi43Mzc1ODkyOSA2LjMyMDYyNSw2LjYxODM5Mjg2IDYuNjMzMjE0MjksNi41MTk0NjQyOSBDNi45NDU4MDM1Nyw2LjQyMDI2Nzg2IDcuMjQxMTYwNzEsNi4zNzA2MjUgNy41MjA1MzU3MSw2LjM3MDYyNSBDOC4wMjI1ODkyOSw2LjM3MDYyNSA4LjQxLDYuNDkxOTY0MjkgOC42ODIwNTM1Nyw2LjczNDY0Mjg2IEM4Ljk1NDEwNzE0LDYuOTc3NSA5LjA5MDA4OTI5LDcuMjkyMzIxNDMgOS4wOTAwODkyOSw3LjY4MDI2Nzg2IEM5LjA5MDA4OTI5LDcuNzYwNTM1NzEgOS4wODExNjA3MSw3LjkwMTk2NDI5IDkuMDYxOTY0MjksOC4xMDQxMDcxNCBDOS4wNDMyMTQyOSw4LjMwNjY5NjQzIDkuMDA4MzAzNTcsOC40OTIzMjE0MyA4Ljk1NzQxMDcxLDguNjYxMTYwNzEgTDguNDM3NzY3ODYsMTAuNTAwODkyOSBDOC4zOTUxNzg1NywxMC42NDg2NjA3IDguMzU2ODc1LDEwLjgxNzU4OTMgOC4zMjM1NzE0MywxMS4wMDc2Nzg2IEM4LjI4OTE5NjQzLDExLjE5NjUxNzkgOC4yNzI3Njc4NiwxMS4zNDA4MDM2IDguMjcyNzY3ODYsMTEuNDM3NTg5MyBDOC4yNzI3Njc4NiwxMS42ODE4NzUgOC4zMjcyMzIxNCwxMS44NDg2NjA3IDguNDM2NDI4NTcsMTEuOTM3MzIxNCBDOC41NDY0Mjg1NywxMi4wMjU5ODIxIDguNzM1ODkyODYsMTIuMDcwMDg5MyA5LjAwNSwxMi4wNzAwODkzIEM5LjEzMTMzOTI5LDEyLjA3MDA4OTMgOS4yNzUwODkyOSwxMi4wNDc2Nzg2IDkuNDM0ODIxNDMsMTIuMDAzNjYwNyBDOS41OTQxMDcxNCwxMS45NTk2NDI5IDkuNzEwMjY3ODYsMTEuOTIwOTgyMSA5Ljc4MjMyMTQzLDExLjg4NzE0MjkgTDkuNzgyMzIxNDMsMTEuODg3MTQyOSBMOS43ODIzMjE0MywxMS44ODcxNDI5IFogTTkuOTE0MTA3MTQsNC4xNjMzOTI4NiBDOS45MTQxMDcxNCw0LjQ4MzkyODU3IDkuNzkzMzAzNTcsNC43NTc2Nzg1NyA5LjU1MDUzNTcxLDQuOTgyNzY3ODYgQzkuMzA4MzkyODYsNS4yMDg2NjA3MSA5LjAxNjYwNzE0LDUuMzIxNjk2NDMgOC42NzUyNjc4Niw1LjMyMTY5NjQzIEM4LjMzMjg1NzE0LDUuMzIxNjk2NDMgOC4wNDAzNTcxNCw1LjIwODY2MDcxIDcuNzk1NDQ2NDMsNC45ODI3Njc4NiBDNy41NTA5ODIxNCw0Ljc1NzU4OTI5IDcuNDI4NDgyMTQsNC40ODM5Mjg1NyA3LjQyODQ4MjE0LDQuMTYzMzkyODYgQzcuNDI4NDgyMTQsMy44NDM0ODIxNCA3LjU1MDk4MjE0LDMuNTY5Mjg1NzEgNy43OTU0NDY0MywzLjM0MTMzOTI5IEM4LjAzOTkxMDcxLDMuMTEzNzUgOC4zMzI5NDY0MywzIDguNjc1MjY3ODYsMyBDOS4wMTY1MTc4NiwzIDkuMzA4MzkyODYsMy4xMTQwMTc4NiA5LjU1MDUzNTcxLDMuMzQxMzM5MjkgQzkuNzkzNDgyMTQsMy41NjkyODU3MSA5LjkxNDEwNzE0LDMuODQzNTcxNDMgOS45MTQxMDcxNCw0LjE2MzM5Mjg2IEw5LjkxNDEwNzE0LDQuMTYzMzkyODYgTDkuOTE0MTA3MTQsNC4xNjMzOTI4NiBaIiBpZD0iU2hhcGUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPgo="})),o=t.sharingStatus.isShared?t.sharingStatus.recipientsCount:0,c=[{active:e===pe,label:s("webapp_credential_edition_account_details"),onClick:()=>a(pe)},{active:e===Ne,label:`${s("webapp_credential_edition_shared_access")} (${o})`,onClick:()=>a(Ne)}],{domainIcon:d,title:g}=t,u=we.reduce(((e,t)=>e||d?.urls[t]),void 0),C=(0,Ae.d)({backgroundColor:d?.backgroundColor,mainColor:d?.mainColor,iconSource:u,variant:Ae.$.HEADER});return(0,R.tZ)(A.V9,{icon:(0,R.tZ)(I.plG,{size:"large",text:g,iconSource:u,backgroundColor:C}),title:t.title,tabs:i?c:void 0},n&&l)},{SHARED_ACCESS:ke,ACCOUNT_DETAILS:ze,LINKED_WEBSITES:_e}=De.Z;var Te=i(927761);const xe=e=>`{${e.match.params?.uuid||""}}`,je={query:a.C.getActiveSpaces},be={query:a.C.getShouldShowRequireMasterPassword},Le={activeSpaces:je,credential:{live:a.C.liveCredential,liveParam:xe,query:a.C.getCredential,queryParam:xe},credentialCategories:{query:a.C.getCredentialCategories},shouldShowRequireMasterPassword:be,credHasPasswordHistory:{query:a.C.getHasPasswordHistory,queryParam:xe}},Ee={strategies:Le},Se=(0,Te.DP)((({lee:e,location:t,activeSpaces:i,credential:n,credentialCategories:s,shouldShowRequireMasterPassword:l,onClose:v,credHasPasswordHistory:Z,protectedItemsUnlockerShown:P,areProtectedItemsUnlocked:W,openProtectedItemsUnlocker:B})=>{var R;const{translate:H}=(0,M.Z)(),{routes:V}=(0,C.Xo)(),X=(0,u.V)(),{createCollection:F,updateCollection:q}=(0,g.u7)(d.vaultOrganizationApi),K=r.createRef(),$=r.useRef(null),[ee,te]=r.useState((()=>{var e;const t=(0,C.CN)();return x.A0[null!=(e=t.get("tab"))?e:"account-details"]})()),[ie,ae]=r.useState(ze),[ne,se]=r.useState(!1),[re,le]=r.useState(null!=(R=n?.linkedWebsites.addedByUser)?R:[]),[oe,ce]=r.useState(!1),[de,ge]=r.useState(!1),[Ie,ue]=r.useState([]),[Me,Ae]=r.useState(!1),[De,me]=r.useState(!1),[Ne,pe]=r.useState(!1),[we,Te]=r.useState(null),[xe,je]=r.useState(!1),{current:be}=r.useRef({confirmDeleteConfirm:H("webapp_credential_edition_delete_confirm"),confirmDeleteDismiss:H("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:H("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:H("webapp_credential_edition_confirm_delete_title"),lastAdminActionLabel:H("webapp_credential_edition_change_permissions"),lastAdminTitle:H("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:H("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:H("webapp_credential_edition_group_sharing_title"),groupSharingSubtitle:H("webapp_credential_edition_group_sharing_subtitle")});if(r.useEffect((()=>{n||v()}),[n,v]),r.useEffect((()=>()=>{$.current&&clearTimeout($.current)}),[]),r.useEffect((()=>{var e,t,i;t=re,i=null!=(e=n?.linkedWebsites.addedByUser)?e:[],[...t,...i].filter(Boolean).some((e=>!(t.includes(e)&&i.includes(e))))&&se(!0)}),[re,n?.linkedWebsites.addedByUser]),!n)return null;const Le=e=>{ne?(ae(e),me(!0)):te(e)},Ee=()=>{me(!1),Ae(!1),ue([])},Se=e=>{ce(e),Le(_e)},he=()=>{te(ze),se(!1),Ee()},Oe=e=>{e?.preventDefault(),ne?(ae(ze),Ae(!0)):he()},ve=async()=>{(await a.C.updateLinkedWebsites({credentialId:n.id,updatedLinkedWebsitesDomainList:re})).success&&($.current=window.setTimeout((()=>pe(!1)),5e3),pe(!0),(async(e,t)=>{const i=t.filter((t=>t&&!e.linkedWebsites.addedByUser.includes(t))),n=e.linkedWebsites.addedByUser.filter((e=>e&&!t.includes(e))),s=await(0,E.gm)(a.C)?new L.ParsedURL(e.url).getRootDomain():(0,S.JI)(e.url);(0,h.K)(new j.AnonymousUpdateCredentialEvent({action:j.Action.Edit,associatedWebsitesAddedList:await O(i),associatedWebsitesRemovedList:await O(n),fieldList:[j.Field.AssociatedWebsitesList],domain:{type:j.DomainType.Web,id:await(0,j.hashDomain)(s)},space:e.spaceId?j.Space.Professional:j.Space.Personal})),(0,h.K)(new j.UserUpdateVaultItemEvent({action:j.Action.Edit,itemId:e.id,itemType:j.ItemType.Credential,fieldsEdited:[j.Field.AssociatedWebsitesList],space:e.spaceId?j.Space.Professional:j.Space.Personal}))})(n,re)),he()},Ze=ee===_e?(e,t)=>Oe(t):()=>{t?.state?.entity?(0,y.d)({routes:V,location:t}):v()},Ye=de||P;return r.createElement(A.zI,{isViewingExistingItem:!0,itemHasBeenEdited:ne,isSomeDialogOpen:Me||Ie.length>0||De,onSubmit:async()=>{if(ee===_e)return void(async()=>{const e=await(async(e,t)=>{const i=await(0,E.gm)(a.C),n=t.filter((t=>t&&!e.linkedWebsites.addedByUser.includes(t))).map((e=>i?new L.ParsedURL(e).getRootDomain():(0,b.extractRootDomain)(e))),s=n.map((async t=>await a.C.getCredentialsByDomain(((e,t)=>({domain:e,sortToken:{sortCriteria:[{field:"lastUse",direction:"descend"}],uniqField:"id"},filterToken:{filterCriteria:[{field:"email",value:t,type:"equals"}]}}))(t,e.email))));return(await Promise.all(s)).map(((e,t)=>({...e,linkedWebsite:n[t]}))).filter((e=>e.matchingCount>0)).map((e=>({credentialName:e.items[0].title,linkedWebsite:e.linkedWebsite})))})(n,re);ue(e),ee!==_e||e.length||ve()})();if(!K.current?.isFormValid())return;const e=K.current?.getValues();if(!e)return;var t;je(!0),e.autoProtected&&e.autoProtected!==n.autoProtected&&(0,z.ih)(e.autoProtected,n.id,n.url,null!=(t=e.spaceId)?t:void 0);const i=K.current?.getVaultItemCollections(),s={kwType:"KWAuthentifiant",origin:c.SaveOrigin.MANUAL,content:{...e,id:n.id}},r=await a.C.savePersonalDataItem(s);r.success&&i&&((e,t)=>{for(const i of t)i.initiallyExisting&&!i.hasBeenDeleted||(i.vaultItems=[{id:e,type:c.DataModelType.KWAuthentifiant}],i.id?q({id:i.id,collection:i,operationType:i.hasBeenDeleted?d.OperationType.SUBSTRACT:d.OperationType.APPEND}):F({content:i}))})(r.itemId,i),X.showAlert(H("_common_toast_changes_saved"),I.BLW.SUCCESS),je(!1),(0,_.au)(),v()},secondaryActions:ee===_e?[]:[r.createElement(J,{key:"pwhist",credentialId:n.id,credHasPasswordHistory:Z}),r.createElement(N.N,{item:n,getSharing:e=>(0,w.Ei)(e),key:"shareaction"})],onNavigateOut:Ze,onClickDelete:()=>{const{sharingStatus:e}=n;if(e.isShared){if(e.groupSharing)return void Te({reason:p.J.GroupSharing});if(e.lastAdmin)return void Te({reason:p.J.LastAdmin})}ge(!0)},withoutDeleteButton:ee===_e,withoutConfirmationDialog:ee===_e,ignoreCloseOnEscape:Ye,formId:"edit_credential_panel",submitPending:xe,header:r.createElement(ye,{activeTab:ee,credential:n,displayTabs:n.sharingStatus.isShared,changeTab:Le,showSecurityScore:!1})},n.sharingStatus.isShared&&ee===ke?r.createElement(k.u,{isAdmin:"admin"===n.sharingStatus.permission,id:n.id}):null,ee===ze?r.createElement("div",{className:"healthEditContainer--lJ8iSk3hnU"},r.createElement(Ce,{credential:n}),r.createElement("div",{className:o()(Y.Z.form,"formWithHealth--rKaIE4Sw6v")},r.createElement(T.S,{ref:K,currentValues:(e=>{var t,i;const a=e.sharingStatus.isShared&&"limited"===e.sharingStatus.permission;return{autoLogin:e.autoLogin,autoProtected:e.autoProtected,category:null!=(t=e.category?.id)?t:"",email:e.email,id:e.id,forceCategorizedSpace:e.forceCategorizedSpace,limitedPermissions:a,login:e.login,note:e.note,onlyForThisSubdomain:e.subdomainOnly,otpSecret:e.otpSecret,otpUrl:e.otpUrl,password:e.password,protectWithMasterPassword:e.autoProtected,secondaryLogin:null!=(i=e.secondaryLogin)?i:"",spaceId:e.spaceId,subdomainOnly:e.subdomainOnly,title:e.title,type:e.kwType,url:e.url,redirectUrl:e.redirectUrl,linkedWebsites:e.linkedWebsites}})(n),lee:e,signalEditedValues:e=>{se(e)},additionalProps:{activeSpaces:i,credentialCategories:s.items,areProtectedItemsUnlocked:W,openProtectedItemsUnlocker:B,protectedItemsUnlockerShown:P,shouldShowRequireMasterPassword:l,onClickLinkedWebsitesCount:()=>Se(!1),onClickAddNewWebsite:()=>Se(!0)}}))):null,ee===_e?r.createElement(G,{credential:n,onClose:Oe,openWithNewUrlField:oe,onUpdateLinkedWebsitesAddedByUser:le,hasLimitedRights:n.sharingStatus.isShared&&"limited"===n.sharingStatus.permission}):null,de?r.createElement(D.h,{closeConfirmDeleteDialog:()=>ge(!1),onDeleteConfirm:async()=>{const e=K.current?.getValues();e&&(await a.C.removePersonalDataItem({id:n.id}),v())},translations:be}):null,we?r.createElement(D.Z,{reason:we.reason,translations:be,goToSharingAccess:()=>{Te(null),Le(ke)},closeCantDeleteDialog:()=>Te(null)}):null,Me?r.createElement(f,{onCancel:()=>Ae(!1),onLeavePageWithoutSaving:he}):null,Ie.length>0?r.createElement(Q,{duplicateData:Ie,onCancel:()=>ue([]),onSave:ve}):null,De?r.createElement(m.a,{onDismissClick:()=>me(!1),onConfirmClick:()=>{te(ie),se(!1),Ee()}}):null,Ne?r.createElement(U,{onClose:()=>pe(!1)}):null)})),he=(0,n.$)((0,s.i)(Se,Ee),Le)},162886:(e,t,i)=>{i.d(t,{Z:()=>c,h:()=>o});var a=i(708608),n=i(696832),s=i(765505),r=i(630886),l=i(174071);const o=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{confirmDeleteSubtitle:s,confirmDeleteTitle:l,confirmDeleteDismiss:o,confirmDeleteConfirm:c}=i;return n.createElement(r.o,{isOpen:!0,disableBackgroundPanelClose:!0,footer:n.createElement(a.cNS,{primaryButtonTitle:c,primaryButtonOnClick:t,primaryButtonProps:{id:"deletion-dialog-confirm-button"},secondaryButtonTitle:o,secondaryButtonOnClick:e,secondaryButtonProps:{autoFocus:!0,id:"deletion-dialog-dismiss-button"},intent:"danger"}),onRequestClose:e,title:l},s)},c=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:o})=>{const c=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:a,genericErrorTitle:n}=e;switch(t){case s.J.LastAdmin:return a;case s.J.GroupSharing:return i;case s.J.Generic:return n;default:return(0,l.U)(t)}})(t,e),d=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:a,genericErrorSubtitle:n}=e;switch(t){case s.J.LastAdmin:return a;case s.J.GroupSharing:return i;case s.J.Generic:return n;default:return(0,l.U)(t)}})(t,e);return n.createElement(r.o,{isOpen:!0,showCloseIcon:!0,disableBackgroundPanelClose:!0,onRequestClose:o,title:c,footer:e===s.J.LastAdmin?n.createElement(a.cNS,{primaryButtonTitle:t.lastAdminActionLabel,primaryButtonOnClick:i,intent:"danger"}):null},d)}},295265:(e,t,i)=>{i.d(t,{N:()=>r});var a=i(696832),n=i(446389),s=i(673146);const r=({item:e,getSharing:t})=>{const{translate:i}=(0,n.Z)();if(!(e=>e&&(!e.sharingStatus.isShared||"admin"===e.sharingStatus.permission)&&!e.attachments.length)(e))return null;const r=t(e.id);return a.createElement(s.Z,{tooltipPlacement:"top-start",sharing:r,text:i("webapp_sharing_invite_share")})}},765505:(e,t,i)=>{let a;i.d(t,{J:()=>a}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(a||(a={}))},879150:(e,t,i)=>{i.d(t,{u:()=>z});var a=i(696832),n=i(148038),s=i(453576),r=i(585921),l=i(708608),o=i(616274),c=i(526849);const d=(0,c.sortBy)((0,c.compose)(c.toLower,(0,c.prop)("name"))),g=(0,c.sortBy)((0,c.compose)(c.toLower,(0,c.prop)("alias")));var I,u,M=i(108951),C=i(691330),A=i(394222),D=i(405611),m=i(285628),N=i(785802),p=i(446389);const w=({cancelStatus:e,itemGroup:t,setCancelStatus:i,userOrGroup:n})=>{const{translate:s}=(0,p.Z)(),c=e===A.V.Loading,d={type:"user",alias:"groupId"in n?n.groupId:n.userId};(0,a.useEffect)((()=>{let t;return e===A.V.Failure&&(t=window.setTimeout((()=>i(null)),2e3)),()=>{clearTimeout(t)}}),[e,i]);const g=e?()=>i(null):()=>i(A.V.Confirm);return e===A.V.Failure?(0,r.tZ)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"}},I||(I=(0,r.tZ)(l.aNP,{color:"ds.text.danger.standard"}))," ",s("webapp_shared_access_cancel_failure")):(0,r.tZ)("div",null,(0,r.tZ)(r.zx,{intensity:e?"quiet":"supershy",disabled:c,onClick:g},s(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")),e?(0,r.tZ)(r.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:c,onClick:()=>(async()=>{i(A.V.Loading);const e=await(async()=>{try{const{success:e}=await o.C.revokeSharing({itemGroupId:t.groupId,recipient:d});return e}catch(e){return!1}})();i(e?A.V.Success:A.V.Failure)})()},c?u||(u=(0,r.tZ)(l.HoD,null)):s("webapp_shared_access_confirm")):null)};var y;const k=({isAdmin:e,itemGroup:t,openEditPermissionsDialog:i,userOrGroup:s})=>{const[l,c]=(0,a.useState)(null),d=(()=>{const e=(0,n.qr)({queryConfig:{query:o.C.getUserLoginStatus},liveConfig:{live:o.C.liveLoginStatus}},[]);return e.status===n.rq.Success?e.data:void 0})()?.login,{translate:g}=(0,p.Z)();if(l===A.V.Success)return null;const I="groupId"in s,{permission:u,status:M}=s,C=I?s.groupId:s.userId,k=I?s.name:s.alias,z=e&&d!==C,_=I?{type:"userGroup",groupId:C,name:k}:{type:"user",alias:C};let T="pending"===M?"webapp_shared_access_pending_invitation":"";T="accepted"===M?"admin"===u?"webapp_sharing_permissions_full_rights":"webapp_sharing_permissions_limited_rights":T;const x="pending"===M?(0,r.tZ)(w,{userOrGroup:s,itemGroup:t,cancelStatus:l,setCancelStatus:c}):(0,r.tZ)(r.zx,{intensity:"supershy",onClick:()=>i(_,u)},g("webapp_shared_access_edit_permissions"));return(0,r.tZ)("li",{key:C,sx:{alignItems:"center",borderStyle:"solid",borderBottomWidth:"1px",borderColor:"ds.border.neutral.standard.idle",display:"flex",minHeight:"64px",overflow:"hidden",position:"relative"}},(0,r.tZ)(m.r,{infoAction:z?x:null,logo:I?y||(y=(0,r.tZ)(N.Z,null)):(0,r.tZ)(D.q,{email:k,size:36}),text:g(T),title:k,disabled:l===A.V.Loading}))},z=({id:e,isAdmin:t})=>{const[i,c]=(0,a.useState)(!1),[I,u]=(0,a.useState)(null),D=(0,M.b)(e),m=(N=e,(0,n.qr)({queryConfig:{query:o.C.getUserRecipients,queryParam:N},liveConfig:{live:o.C.liveUserRecipients,liveParam:N}},[]));var N;const p=function(e){return(0,n.qr)({queryConfig:{query:o.C.getGroupRecipients,queryParam:e},liveConfig:{live:o.C.liveGroupRecipients,liveParam:e}},[])}(e);if(D.status!==n.rq.Success||m.status!==n.rq.Success||p.status!==n.rq.Success||!D.data)return(0,r.tZ)(l.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});const w=D.data,y=m.data,z=p.data,_=e=>{I&&u({...I,step:e})},T=async()=>{if(!I)return;const{recipient:e,permission:t}=I;c(!0);const i="revoke"===t?await(async e=>{try{const{success:t}=await o.C.revokeSharing({itemGroupId:w.groupId,recipient:e});return t}catch(e){return!1}})(e):await(async(e,t)=>{try{const{success:i}=await o.C.updateSharingPermission({itemGroupId:w?.groupId,recipient:e,permission:t});return i}catch(e){return!1}})(e,t);if(i){const e="revoke"===t?A.L.RevokeSuccess:A.L.Success;_(e)}else _(A.L.Failure);c(!1)},x=(e,t)=>{const i={recipient:e,permission:t,originPermission:t,step:A.L.Permission,name:(0,s.isGroupRecipient)(e)?e.name:e.alias};u(i)};return(0,r.tZ)("div",{sx:{flex:"1",overflowY:"auto",p:"24px"}},(0,r.tZ)("ul",{sx:{flex:"1"}},d(z).map((e=>(0,r.tZ)(k,{key:e.groupId,userOrGroup:e,isAdmin:t,itemGroup:w,openEditPermissionsDialog:x}))),g(y).map((e=>(0,r.tZ)(k,{key:e.userId,userOrGroup:e,isAdmin:t,itemGroup:w,openEditPermissionsDialog:x})))),I&&(0,r.tZ)(C.E,{isOpen:!0,loading:i,onCancelRevoke:()=>{I&&u({...I,step:A.L.Permission})},onConfirmRevoke:T,onDismiss:()=>u(null),onSelectPermission:e=>{I&&u({...I,permission:e})},onValidatePermission:()=>{"revoke"===I?.permission?u({...I,step:A.L.ConfirmRevoke}):T()},originPermission:I.originPermission,permission:I.permission,recipient:I.recipient,step:I.step}))}},944537:(e,t,i)=>{i.d(t,{d:()=>s});var a=i(230107),n=i(190481);const s=({routes:e,location:t})=>{t?.state?.entity?(0,a.yy)(t?.state?.entity)?(0,n.uX)(e.userSharingGroupInfo(t?.state?.entity?.groupId)):(0,n.uX)(e.userSharingUserInfo(t?.state?.entity?.alias)):(0,n.uX)(e.userSharingCenter)}}}]);