"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4954],{613483:(e,t,n)=>{n.r(t),n.d(t,{Connected:()=>A});var r,a=n(616274),o=n(704841),i=n(611792),c=n(696832),s=n(238250),l=n(708608),u=n(511494),m=n(925112),d=n(446389),p=n(987364),_=n(190481),b=n(959074),g=n(762863),k=n(162886),C=n(416098),h=n(633499),f=n(697672),S=n(508159),E=n(710938);const y=e=>`{${e.match.params.uuid}}`,B={item:{live:a.C.liveBankAccount,liveParam:y,query:a.C.getBankAccount,queryParam:y}},w={strategies:B},A=(0,o.$)((0,i.i)((({item:e,lee:t})=>{const{translate:n}=(0,d.Z)(),{routes:o}=(0,b.Xo)(),{current:i}=c.useRef([]),[y,B]=c.useState(!1),[w,A]=c.useState(!1),[D,I]=c.useState(new Set),[L,T]=c.useState(e),[P,U]=c.useState(!1),{areProtectedItemsUnlocked:N,openProtectedItemsUnlocker:v,protectedItemsUnlockerShown:O}=(0,S.t)(),G=(0,f.B)(),J=(0,m.V)();c.useEffect((()=>((0,p.N)(u.PageView.ItemBankStatementDetails),()=>{i.forEach((e=>e()))})),[]);const V=()=>{(0,p.N)(u.PageView.ItemPaymentList),(0,_.uX)(o.userPayments)},W=c.useRef({}),M=c.useCallback((t=>{Object.entries(t).forEach((([t,n])=>{e[t]!==n?W.current[t]=n:delete W.current[t]})),B(Object.keys(W.current).length>0),T(t)}),[e]),Z=e.name,R={confirmDeleteConfirm:n("webapp_payment_edition_bank_account_delete_confirm"),confirmDeleteDismiss:n("webapp_payment_edition_bank_account_delete_dismiss"),confirmDeleteSubtitle:n("webapp_payment_edition_bank_account_delete_subtitle"),confirmDeleteTitle:n("webapp_payment_edition_bank_account_delete_title")},q=O||P;return c.createElement(g.zI,{onNavigateOut:()=>{V()},ignoreCloseOnEscape:q,formId:"bank-account-edit-form",onSubmit:async()=>{if(!w){A(!0);try{const r=await a.C.updateBankAccount({...W.current,id:e.id});if(!0===r.success){const e=""===L.name?n("webapp_payment_edition_bank_account_generic_update_alert"):n("webapp_payment_edition_bank_account_name_update_alert",{accountName:L.name});J.showAlert(e,l.BLW.SUCCESS),V()}else A(!1),r.error?.code===s.UpdateBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN?I(new Set(["BIC","IBAN"])):t.reportError(new Error("[payments][edit-bank-account] Unable to update bank account"),r.error?.code)}catch(e){A(!1),t.reportError(e,"[payments][edit-bank-account] Unexpected exception while updating bank account")}}},header:c.createElement(g.V9,{icon:r||(r=c.createElement(C.L,null)),iconBackgroundColor:l.O9T.dashGreen06,title:Z}),onClickDelete:()=>{U(!0)},itemHasBeenEdited:y,isViewingExistingItem:!0},c.createElement(h.o,{itemId:e.id,bankAccount:L,errors:D,onCopy:e=>{G.setAlertMessage(e),G.show()},reportError:t.reportError,signalEditedValues:M,areProtectedItemsUnlocked:N,openProtectedItemsUnlocker:v,variant:"edit"}),G.isAlertVisible&&c.createElement("div",{className:E.Z.alertWrapper},c.createElement(l.bZj,{size:l.k3y.SMALL,severity:l.BLW.SUCCESS,closeIconName:n("_common_alert_dismiss_button"),onClose:()=>{G.hide()}},G.alertMessage)),P&&c.createElement(k.h,{closeConfirmDeleteDialog:()=>{U(!1)},onDeleteConfirm:()=>{i.push((()=>a.C.deleteBankAccount({id:e.id})));const t=""===L.name?n("webapp_payment_edition_bank_account_generic_delete_alert"):n("webapp_payment_edition_bank_account_name_delete_alert",{accountName:L.name});J.showAlert(c.createElement("strong",null,t),l.BLW.SUBTLE),V()},translations:R}))}),w),B)},697672:(e,t,n)=>{n.d(t,{B:()=>a});var r=n(696832);const a=()=>{const[e,t]=r.useState(""),[n,a]=r.useState(!1),o=()=>{a(!1)};return r.useEffect((()=>{if(!n)return;const e=setTimeout(o,5e3);return()=>clearTimeout(e)}),[n,e]),{isAlertVisible:n,alertMessage:e,setAlertMessage:t,hide:o,show:()=>{a(!0)}}}},162886:(e,t,n)=>{n.d(t,{Z:()=>l,h:()=>s});var r=n(708608),a=n(696832),o=n(765505),i=n(630886),c=n(174071);const s=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:n})=>{const{confirmDeleteSubtitle:o,confirmDeleteTitle:c,confirmDeleteDismiss:s,confirmDeleteConfirm:l}=n;return a.createElement(i.o,{isOpen:!0,disableBackgroundPanelClose:!0,footer:a.createElement(r.cNS,{primaryButtonTitle:l,primaryButtonOnClick:t,primaryButtonProps:{id:"deletion-dialog-confirm-button"},secondaryButtonTitle:s,secondaryButtonOnClick:e,secondaryButtonProps:{autoFocus:!0,id:"deletion-dialog-dismiss-button"},intent:"danger"}),onRequestClose:e,title:c},o)},l=({reason:e,translations:t,goToSharingAccess:n,closeCantDeleteDialog:s})=>{const l=((e,t)=>{const{groupSharingTitle:n,lastAdminTitle:r,genericErrorTitle:a}=e;switch(t){case o.J.LastAdmin:return r;case o.J.GroupSharing:return n;case o.J.Generic:return a;default:return(0,c.U)(t)}})(t,e),u=((e,t)=>{const{groupSharingSubtitle:n,lastAdminSubtitle:r,genericErrorSubtitle:a}=e;switch(t){case o.J.LastAdmin:return r;case o.J.GroupSharing:return n;case o.J.Generic:return a;default:return(0,c.U)(t)}})(t,e);return a.createElement(i.o,{isOpen:!0,showCloseIcon:!0,disableBackgroundPanelClose:!0,onRequestClose:s,title:l,footer:e===o.J.LastAdmin?a.createElement(r.cNS,{primaryButtonTitle:t.lastAdminActionLabel,primaryButtonOnClick:n,intent:"danger"}):null},u)}},765505:(e,t,n)=>{let r;n.d(t,{J:()=>r}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(r||(r={}))},710938:(e,t,n)=>{n.d(t,{Z:()=>r});const r={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);